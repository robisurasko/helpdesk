import{B as k,d as F,q as E,b as T,u as U,e as y,M as w,ac as j,C as G,r as $,o as l,f as S,w as c,g as n,h as s,dB as Y,dC as M,l as e,k as d,y as C,H as D,I as N,x as O,t as Z,dD as J,dE as K,j as Q,O as W,Z as B,a0 as X,dk as ee,E as te}from"./index-7cfac70d.js";import{c as ae,a as oe,_ as se,b as ne,d as P,e as le}from"./layoutSettings-63cb64ae.js";import{u as ie,c as re}from"./useView-6086fe67.js";import"./more-horizontal-baf6d079.js";import"./dayjs-44da97f0.js";import{u as ue,L as ce}from"./bell-ad01738c.js";import"./knowledgeBase-7671002e.js";import"./Dropdown.vue_vue_type_script_setup_true_lang-78ec013f.js";const v=k(!1),de={class:"relative z-10 flex h-full w-[230px] flex-col border-r bg-gray-50 transition-all duration-300 ease-in-out"},pe={key:0,class:"overflow-y-auto px-2"},fe={class:"mb-3 flex flex-col"},me={key:0,class:"mx-2 my-2 h-1"},_e=["onClick"],ve={class:"flex flex-col ml-2 mr-1"},be=F({__name:"MobileSidebar",setup(V){const{pinnedViews:o,publicViews:f}=ie(),p=ue(),m=E(),_=T(),t=U(),L=y(()=>{var h,x;const a=[{label:"All Views",hideLabel:!0,opened:!0,views:w.value?ae:oe}];return(h=f.value)!=null&&h.length&&!w.value&&a.push({label:"Public Views",opened:!0,hideLabel:!1,views:b(f.value)}),(x=o.value)!=null&&x.length&&a.push({label:"Private Views",opened:!0,hideLabel:!1,views:b(o.value)}),a});function b(i){return i.map(a=>({label:a.label,icon:a.icon,to:{name:a.route_name,query:{view:a.name}},onClick:()=>{re.value={label:a.label,icon:a.icon}}}))}const g=y(()=>[{label:"Log out",icon:"log-out",onClick:()=>t.logout()}]),I=y(()=>[{component:j(se)},{icon:"user",label:"My Profile",onClick:()=>window.open(`${window.location.origin}/me`)},{label:"Customer portal",icon:"users",onClick:()=>{const i=_.resolve({name:G});window.open(i.href)}},{label:"Log out",icon:"log-out",onClick:()=>t.logout()}]),z=y(()=>w.value?g.value:I.value);function H(i){var a;return m.query.view?m.query.view==((a=i==null?void 0:i.query)==null?void 0:a.view):m.name===i}return(i,a)=>{const h=$("Badge"),x=$("FeatherIcon");return l(),S(s(K),{show:s(v)},{default:c(()=>[n(s(Y),{as:"div",onClose:a[0]||(a[0]=r=>v.value=!1),class:"fixed inset-0 z-40"},{default:c(()=>[n(s(M),{as:"template",enter:"transition ease-in-out duration-200 transform","enter-from":"-translate-x-full","enter-to":"translate-x-0",leave:"transition ease-in-out duration-200 transform","leave-from":"translate-x-0","leave-to":"-translate-x-full"},{default:c(()=>[e("div",de,[e("div",null,[n(ne,{class:"p-2 mb-2",options:z.value},null,8,["options"])]),s(w)?C("",!0):(l(),d("div",pe,[e("div",fe,[n(P,{class:"relative",label:"Notifications",icon:s(ce),"on-click":()=>v.value=!1,"is-expanded":!0,to:"Notifications"},{right:c(()=>[s(p).unread?(l(),S(h,{key:0,label:s(p).unread,theme:"gray",variant:"subtle"},null,8,["label"])):C("",!0)]),_:1},8,["icon","on-click"])])])),(l(!0),d(D,null,N(L.value,r=>{var A;return l(),d("div",{key:r.label},[!r.hideLabel&&((A=r.views)!=null&&A.length)?(l(),d("div",me)):C("",!0),n(s(le),{label:r.label,hideLabel:r.hideLabel,opened:r.opened},{header:c(({opened:u,hide:R,toggle:q})=>[R?C("",!0):(l(),d("div",{key:0,class:O(["flex cursor-pointer gap-1.5 px-1 text-base font-medium text-ink-gray-5 transition-all duration-300 ease-in-out","ml-2 mt-4 h-7 w-auto opacity-100"]),onClick:Be=>q()},[n(x,{name:"chevron-right",class:O(["h-4 text-ink-gray-9 transition-all duration-300 ease-in-out",{"rotate-90":u}])},null,8,["class"]),e("span",null,Z(r.label),1)],8,_e))]),default:c(()=>[e("nav",ve,[(l(!0),d(D,null,N(r.views,u=>(l(),S(P,{icon:u.icon,label:u.label,to:u.to,key:u.label,"is-expanded":!0,"is-active":H(u.to),class:"my-0.5",onClick:u.onClick},null,8,["icon","label","to","is-active","onClick"]))),128))])]),_:2},1032,["label","hideLabel","opened"])])}),128))])]),_:1}),n(s(M),{as:"template",enter:"transition-opacity ease-linear duration-200","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:c(()=>[n(s(J),{class:"fixed inset-0 bg-gray-600 bg-opacity-50"})]),_:1})]),_:1})]),_:1},8,["show"])}}});const ge={class:"flex border-b h-12 items-center"},he={class:"z-20 -mr-4 ml-1 flex items-center justify-center"},xe={class:"flex flex-col items-center"},ye={class:"flex items-center gap-2"},we={class:"flex items-center gap-1"},Ce={class:"relative"},ke={__name:"MobileAppHeader",setup(V){const o=k("Offline"),f=k(""),p=k("");W(()=>{B({url:"frappe.auth.get_logged_user"}).submit().then(_=>{f.value=_,B({url:"frappe.client.get_list",params:{doctype:"HD Agent",fields:["name","custom_current_status"],filters:{name:_},limit:1}}).submit().then(t=>{t&&t.length>0&&(p.value=t[0].name,o.value=t[0].custom_current_status||"Offline")})})});function m(){p.value&&B({url:"frappe.client.set_value",params:{doctype:"HD Agent",name:p.value,fieldname:"custom_current_status",value:o.value}}).submit()}return(_,t)=>{const L=$("FeatherIcon"),b=$("Button");return l(),d("div",ge,[e("div",he,[n(b,{variant:"ghosted",onClick:t[0]||(t[0]=g=>v.value=!s(v))},{default:c(()=>[n(L,{name:"menu",class:"size-4"})]),_:1})]),t[4]||(t[4]=e("header",{id:"app-header",class:"w-full"},null,-1)),e("div",xe,[e("div",ye,[e("div",we,[e("div",{class:O(["w-2 h-2 rounded-full",{"bg-green-500":o.value==="Online","bg-yellow-500":o.value==="Busy","bg-red-500":o.value==="Offline"}])},null,2),e("div",Ce,[X(e("select",{"onUpdate:modelValue":t[1]||(t[1]=g=>o.value=g),class:"appearance-none bg-gray-100 border border-gray-300 rounded text-xs px-1.5 py-0.5 pr-5 focus:outline-none focus:ring-1 focus:ring-blue-500 h-[1.25rem]",onChange:m},t[2]||(t[2]=[e("option",{value:"Online"},"Online",-1),e("option",{value:"Busy"},"Busy",-1),e("option",{value:"Offline"},"Offline",-1)]),544),[[ee,o.value]]),t[3]||(t[3]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-1 text-gray-500"},[e("svg",{class:"fill-current h-2.5 w-2.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[e("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1))])])])])])}}},$e=Q(ke,[["__scopeId","data-v-7fdcd6fe"]]),Le={class:"flex h-screen w-screen"},Se={class:"flex h-full flex-col flex-1 overflow-auto"},ze={__name:"MobileLayout",setup(V){return(o,f)=>(l(),d("div",Le,[n(be),e("div",Se,[n($e),te(o.$slots,"default")])]))}};export{ze as default};
//# sourceMappingURL=MobileLayout-c87ac5df.js.map
