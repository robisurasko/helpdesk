import{_ as y}from"./plus-67bfab41.js";import{j as w,J as Q,b0 as b,W as C,B as g,r as c,o as d,k as p,g as o,ae as S,w as a,s as f,l as m,f as k,y as h,z as A,H as E,I as V,t as B,d as F,e as D,K as N,Q as T,h as I}from"./index-6a3ac2ad.js";import{_ as $}from"./Avatar.vue_vue_type_script_setup_true_lang-8ff52837.js";import"./useView-6d572c4e.js";import"./more-horizontal-14937468.js";import"./dayjs-a716d1bc.js";import{_ as R}from"./LayoutHeader-5106993c.js";import"./knowledgeBase-77ec454d.js";import{_ as z}from"./ListViewBuilder.vue_vue_type_script_setup_true_lang-60baa997.js";import"./Dropdown.vue_vue_type_script_setup_true_lang-b567f657.js";import"./label-90312d52.js";import"./StarRating.vue_vue_type_script_setup_true_lang-12029462.js";import"./Link-9287dea6.js";import"./FadedScrollableDiv.vue_vue_type_script_setup_true_lang-bce5a402.js";import"./EmptyState.vue_vue_type_script_setup_true_lang-6aa45258.js";const H={name:"AddNewAgentsDialog",props:["show"],components:{Dialog:Q,Input:b,FeatherIcon:C},setup(){const t=g(""),e=g([]),r=g(!1);return{searchInput:t,inviteQueue:e,currentInputIsValidEmail:r}},methods:{testEmailRegex(t){return/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(t)},onSearchInputChange(t){if(t=t.replaceAll(" ",""),t==""){document.getElementById("searchInput").value="";return}const e=t,r=t.split(",");let n=!1;this.currentInputIsValidEmail=!1,r.forEach(i=>{this.testEmailRegex(i)&&(r.length>1?(this.addToInviteQueue(i),n=!0):e.includes(",")?(this.addToInviteQueue(i),n=!0):this.currentInputIsValidEmail=!0)}),n&&this.clearSearchInput()},addToInviteQueue(t){this.inviteQueue=[...new Set([...this.inviteQueue,t])]},removeEmailFromQueue(t){this.inviteQueue=this.inviteQueue.filter(e=>e!==t)},removeAllEmailFromQueue(){this.inviteQueue=[]},clearSearchInput(){this.currentInputIsValidEmail=!1,this.searchInput="";const t=document.getElementById("searchInput");t.value="",t.focus()},close(){this.searchInput="",this.inviteQueue=[],this.$emit("close")},sentInvites(){this.$resources.sentInvites.submit({emails:this.inviteQueue})}},resources:{sentInvites(){return{url:"helpdesk.api.agent.sent_invites",onSuccess:t=>{this.currentInputIsValidEmail=!1,this.searchInput="",this.inviteQueue=[],this.$toast({title:"Invites Sent Successfully!",icon:"check",iconClasses:"text-green-500"}),this.close()}}}}},L={class:"space-y-3"},M={key:0,class:"flex max-h-[300px] min-h-[100px] flex-col overflow-y-auto rounded border bg-gray-100 px-2"},P={class:"flex flex-wrap gap-2 py-2"},j=["title"],J={class:"ml-2 text-base"},K=["onClick"],U={class:"grow mt-2"};function W(t,e,r,n,i,l){const v=c("Input"),u=c("Button"),_=c("FeatherIcon"),x=c("Dialog");return d(),p("div",null,[o(x,{options:{title:"Add Agents"},show:r.show,onClose:e[7]||(e[7]=s=>l.close())},S({"body-content":a(()=>[m("div",L,[m("form",{onSubmit:e[3]||(e[3]=A((...s)=>t.onSubmit&&t.onSubmit(...s),["prevent"])),class:"flex flex-row items-center space-x-2"},[o(v,{id:"searchInput",class:"w-full",type:"text",modelValue:n.searchInput,"onUpdate:modelValue":e[0]||(e[0]=s=>n.searchInput=s),placeholder:"Type emails",onInput:e[1]||(e[1]=s=>l.onSearchInputChange(s))},null,8,["modelValue"]),o(u,{appearance:"primary",type:"submit",disabled:!n.currentInputIsValidEmail,onClick:e[2]||(e[2]=()=>{l.addToInviteQueue(n.searchInput),l.clearSearchInput()})},{default:a(()=>e[8]||(e[8]=[f(" Add ")])),_:1},8,["disabled"])],32),n.inviteQueue.length?(d(),p("div",M,[m("ul",P,[(d(!0),p(E,null,V(n.inviteQueue.slice().reverse(),s=>(d(),p("li",{class:"flex items-center space-x-2 rounded bg-white p-1 shadow",key:s,title:s},[m("span",J,B(s),1),m("button",{class:"grid h-4 w-4 place-items-center rounded text-gray-700 hover:bg-gray-300",onClick:O=>l.removeEmailFromQueue(s)},[o(_,{class:"w-3",name:"x"})],8,K)],8,j))),128))])])):h("",!0)])]),_:2},[n.inviteQueue.length?{name:"actions",fn:a(()=>[o(u,{disabled:n.inviteQueue.length==0,appearance:"primary",onClick:e[4]||(e[4]=s=>l.sentInvites()),class:"mr-2",loading:t.$resources.sentInvites.loading},{default:a(()=>e[9]||(e[9]=[f("Send Invites")])),_:1},8,["disabled","loading"]),o(u,{appearance:"secondary",class:"mr-2",onClick:e[5]||(e[5]=s=>l.close())},{default:a(()=>e[10]||(e[10]=[f("Cancel")])),_:1}),m("div",U,[n.inviteQueue.length>1?(d(),k(u,{key:0,onClick:e[6]||(e[6]=s=>l.removeAllEmailFromQueue())},{default:a(()=>e[11]||(e[11]=[f(" Clear All ")])),_:1})):h("",!0)])]),key:"0"}:void 0]),1032,["show"])])}const q=w(H,[["render",W]]),G={class:"flex flex-col"},ce=F({__name:"Agents",setup(t){const e=g(!1),r=D(()=>({doctype:"HD Agent",defaultFilters:{is_active:["=",1]},columnConfig:{agent_name:{prefix:({row:n})=>N($,{shape:"circle",image:n.user_image,label:n.agent_name,size:"sm"})}},emptyState:{title:"No Agents Found"}}));return T(()=>({title:"Agents"})),(n,i)=>{const l=y,v=c("Button");return d(),p("div",G,[o(I(R),null,{"left-header":a(()=>i[3]||(i[3]=[m("div",{class:"text-lg font-medium text-gray-900"},"Agents",-1)])),"right-header":a(()=>[o(v,{label:"New agent",theme:"gray",variant:"solid",onClick:i[0]||(i[0]=u=>e.value=!e.value)},{prefix:a(()=>[o(l,{class:"h-4 w-4"})]),_:1})]),_:1}),o(I(z),{options:r.value,onEmptyStateAction:i[1]||(i[1]=u=>e.value=!0)},null,8,["options"]),o(q,{show:e.value,onClose:i[2]||(i[2]=u=>e.value=!1)},null,8,["show"])])}}});export{ce as default};
//# sourceMappingURL=Agents-a1363241.js.map
