{"version":3,"file":"TicketCommunication.vue_vue_type_script_setup_true_lang-9b6a6159.js","sources":["../../../../desk/src/pages/ticket/TicketCommunication.vue"],"sourcesContent":["<template>\n  <div class=\"border rounded flex-1 px-3 pt-2.5 shadow bg-white\">\n    <div class=\"mb-4 flex items-center justify-between text-base\">\n      <div class=\"flex items-center gap-0.5\">\n        <UserAvatar v-bind=\"user\" size=\"lg\" expand strong :hide-avatar=\"true\" />\n        <Icon icon=\"lucide:dot\" class=\"text-gray-500\" />\n        <Tooltip :text=\"dayjs(date).long()\">\n          <span class=\"text-gray-600\">\n            {{ dayjs.tz(date).fromNow() }}\n          </span>\n        </Tooltip>\n      </div>\n    </div>\n\n    <EmailContent :content=\"sanitize(content)\" />\n    <div class=\"flex flex-wrap gap-2 mb-2\">\n      <AttachmentItem\n        v-for=\"a in attachments\"\n        :key=\"a.file_url\"\n        :label=\"a.file_name\"\n        :url=\"a.file_url\"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { Tooltip } from \"frappe-ui\";\nimport sanitizeHtml from \"sanitize-html\";\nimport { Icon } from \"@iconify/vue\";\nimport { dayjs } from \"@/dayjs\";\nimport { UserInfo } from \"@/types\";\nimport { AttachmentItem, UserAvatar } from \"@/components\";\n\ninterface Attachment {\n  file_name: string;\n  file_url: string;\n}\n\ninterface P {\n  content: string;\n  date: string;\n  user: UserInfo;\n  cc?: string;\n  bcc?: string;\n  attachments?: Attachment[];\n}\n\nwithDefaults(defineProps<P>(), {\n  cc: () => \"\",\n  bcc: () => \"\",\n  attachments: () => [],\n});\n\nfunction sanitize(html: string) {\n  return sanitizeHtml(html, {\n    allowedTags: sanitizeHtml.defaults.allowedTags.concat([\"img\", \"video\"]),\n    allowedAttributes: {\n      a: [\"href\"],\n      video: [\"src\", \"controls\"],\n      img: [\"src\"],\n    },\n  });\n}\n</script>\n"],"names":["sanitize","html","sanitizeHtml"],"mappings":"i5BAsDA,SAASA,EAASC,EAAc,CAC9B,OAAOC,EAAaD,EAAM,CACxB,YAAaC,EAAa,SAAS,YAAY,OAAO,CAAC,MAAO,OAAO,CAAC,EACtE,kBAAmB,CACjB,EAAG,CAAC,MAAM,EACV,MAAO,CAAC,MAAO,UAAU,EACzB,IAAK,CAAC,KAAK,CACb,CAAA,CACD,CACH"}