import{_ as H}from"./plus-900064b5.js";import{d as $,m as A,n as F,p as P,Z as T,V as y,r as x,o as v,k as b,g as l,w as _,l as r,h as n,z as R,b0 as N,J as E,e as k,b1 as q,f as U,t as J,y as I,B as V,K,Q as L}from"./index-7cfac70d.js";import{_ as M}from"./Avatar.vue_vue_type_script_setup_true_lang-c9c85df3.js";import{F as O}from"./FileUploader-027c469b.js";import{u as Q}from"./error-f09983fa.js";import{_ as Z}from"./LayoutHeader-ae45b9e1.js";import{_ as j}from"./ListViewBuilder.vue_vue_type_script_setup_true_lang-bd20e346.js";import"./Dropdown.vue_vue_type_script_setup_true_lang-78ec013f.js";import"./label-a6163831.js";import"./useView-6086fe67.js";import"./dayjs-44da97f0.js";import"./more-horizontal-baf6d079.js";import"./StarRating.vue_vue_type_script_setup_true_lang-17a5994f.js";import"./knowledgeBase-7671002e.js";import"./Link-b119251e.js";import"./FadedScrollableDiv.vue_vue_type_script_setup_true_lang-98fbbde4.js";import"./EmptyState.vue_vue_type_script_setup_true_lang-42636ac5.js";const G={class:"space-y-4"},W={class:"space-y-1"},X={class:"space-y-1"},Y={class:"float-right flex space-x-2"},ee=$({__name:"NewCustomerDialog",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:A(["customerCreated"],["update:modelValue"]),setup(C,{emit:m}){const u=m,i=F(C,"modelValue"),t=P({customer:"",domain:""}),s=T({url:"frappe.client.insert",method:"POST",data:{doc:{doctype:"HD Customer",customer_name:t.customer,domain:t.domain}},onSuccess:()=>{t.customer="",t.domain="",y({title:"Customer Created Successfully ",icon:"check",iconClasses:"text-green-600"}),u("customerCreated")},onError:c=>{y({title:c.messages[0],icon:"x",iconClasses:"text-red-600"})}});function p(){if(!t.customer){y({title:"Customer Name is required",icon:"x",iconClasses:"text-red-600"});return}s.submit({doc:{doctype:"HD Customer",customer_name:t.customer,domain:t.domain}})}return(c,o)=>{const e=x("Button");return v(),b("div",null,[l(n(E),{modelValue:i.value,"onUpdate:modelValue":o[2]||(o[2]=a=>i.value=a),options:{title:"Add New Customer",size:"sm"}},{"body-content":_(()=>[r("div",G,[r("div",W,[l(n(N),{modelValue:t.customer,"onUpdate:modelValue":o[0]||(o[0]=a=>t.customer=a),label:"Customer Name",type:"text",placeholder:"Tesla Inc."},null,8,["modelValue"])]),r("div",X,[l(n(N),{modelValue:t.domain,"onUpdate:modelValue":o[1]||(o[1]=a=>t.domain=a),label:"Domain",type:"text",placeholder:"eg: tesla.com, mycompany.com"},null,8,["modelValue"])]),r("div",Y,[l(e,{label:"Add",theme:"gray",variant:"solid",onClick:R(p,["prevent"])})])])]),_:1},8,["modelValue"])])}}}),te={class:"flex flex-col items-center gap-4 p-6"},oe={class:"text-xl font-medium text-gray-900"},se={class:"flex gap-2"},ae=$({__name:"CustomerDialog",props:{name:{type:String,required:!0}},emits:["customer-updated"],setup(C,{emit:m}){const u=C,i=m,t=k({get(){var e;return(e=s.doc)==null?void 0:e.domain},set(e){s.doc.domain=e}}),s=q({doctype:"HD Customer",name:u.name,auto:!0,setValue:{onSuccess(){y({title:"Customer updated",icon:"check",iconClasses:"text-green-500"})},onError:Q({title:"Error updating customer"})}}),p=k(()=>{var e;return{title:(e=s.doc)==null?void 0:e.name,actions:[{label:"Save",theme:"gray",variant:"solid",onClick:()=>c()}]}});async function c(){await s.setValue.submit({domain:t.value}),i("customer-updated")}function o(e){s.setValue.submit({image:(e==null?void 0:e.file_url)||null}),i("customer-updated")}return(e,a)=>{const g=x("Button"),d=x("Input");return v(),U(n(E),{options:p.value},{"body-main":_(()=>{var h,B,D,w;return[r("div",te,[r("div",oe,J((h=n(s).doc)==null?void 0:h.name),1),l(n(M),{size:"lg",label:(B=n(s).doc)==null?void 0:B.name,image:(D=n(s).doc)==null?void 0:D.image,class:"cursor-pointer hover:opacity-80"},null,8,["label","image"]),r("div",se,[l(n(O),{onSuccess:a[0]||(a[0]=f=>o(f))},{default:_(({uploading:f,openFileSelector:z})=>{var S;return[l(g,{label:(S=n(s).doc)!=null&&S.image?"Change photo":"Upload photo",loading:f,onClick:z},null,8,["label","loading","onClick"])]}),_:1}),(w=n(s).doc)!=null&&w.image?(v(),U(g,{key:0,label:"Remove photo",onClick:a[1]||(a[1]=f=>o(null))})):I("",!0)]),r("form",{class:"w-full",onSubmit:R(c,["prevent"])},[l(d,{modelValue:t.value,"onUpdate:modelValue":a[2]||(a[2]=f=>t.value=f),label:"Domain",placeholder:"example.com"},null,8,["modelValue"])],32)])]}),_:1},8,["options"])}}}),le={class:"flex flex-col"},ne={key:0},$e=$({__name:"Customers",setup(C){const m=V(!1),u=V(!1),i=V(null),t=V(null);function s(o){i.value=o,u.value=!0}function p(o=!1){var e;o?u.value=!1:m.value=!1,(e=t.value)==null||e.reload()}const c=k(()=>({doctype:"HD Customer",columnConfig:{name:{prefix:({row:o})=>K(M,{shape:"circle",image:o.image,label:o.name,size:"sm"})}},emptyState:{title:"No Customers Found"}}));return L(()=>({title:"Customers"})),(o,e)=>{const a=H,g=x("Button");return v(),b("div",le,[l(Z,null,{"left-header":_(()=>e[5]||(e[5]=[r("div",{class:"text-lg font-medium text-gray-900"},"Customers",-1)])),"right-header":_(()=>[l(g,{label:"New customer",theme:"gray",variant:"solid",onClick:e[0]||(e[0]=d=>m.value=!m.value)},{prefix:_(()=>[l(a,{class:"h-4 w-4"})]),_:1})]),_:1}),l(j,{ref_key:"listViewRef",ref:t,options:c.value,onRowClick:s,onEmptyStateAction:e[1]||(e[1]=d=>m.value=!0)},null,8,["options"]),l(ee,{modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=d=>m.value=d),onCustomerCreated:p},null,8,["modelValue"]),u.value?(v(),b("span",ne,[l(ae,{modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=d=>u.value=d),name:i.value,onCustomerUpdated:e[4]||(e[4]=d=>p(!0))},null,8,["modelValue","name"])])):I("",!0)])}}});export{$e as default};
//# sourceMappingURL=Customers-a71e7cd7.js.map
