{"version":3,"file":"MobileNotifications-081380ed.js","sources":["../../../../desk/src/pages/MobileNotifications.vue"],"sourcesContent":["<template>\n  <LayoutHeader>\n    <template #left-header>\n      <Breadcrumbs\n        :items=\"[{ label: 'Notifications', route: { name: 'Notifications' } }]\"\n      />\n    </template>\n    <template #right-header>\n      <Tooltip :text=\"'Mark all as read'\">\n        <div>\n          <Button\n            :label=\"'Mark all as read'\"\n            @click=\"() => notificationStore.clear.submit()\"\n          >\n            <template #prefix>\n              <LucideCheckCheck class=\"h-4 w-4\" />\n            </template>\n          </Button>\n        </div>\n      </Tooltip>\n    </template>\n  </LayoutHeader>\n  <div v-if=\"notificationStore.data.length\" class=\"divide-y text-base\">\n    <RouterLink\n      v-for=\"n in notificationStore.data\"\n      :key=\"n.name\"\n      class=\"flex cursor-pointer items-start gap-3.5 px-5 py-2.5 hover:bg-gray-100\"\n      :to=\"getRoute(n)\"\n      @click=\"\n        () => {\n          notificationStore.read(n.reference_ticket);\n        }\n      \"\n    >\n      <UserAvatar :name=\"n.user_from\" />\n      <div>\n        <div class=\"mb-2 leading-5\">\n          <span class=\"space-x-1 text-gray-700\">\n            <span class=\"font-medium text-gray-900\">{{ n.user_from }}</span>\n            <span v-if=\"n.notification_type === 'Mention'\"\n              >mentioned you in ticket</span\n            >\n            <span v-if=\"n.notification_type === 'Assignment'\"\n              >assigned you a ticket</span\n            >\n            <span v-if=\"n.notification_type === 'Reaction'\"\n              >has reopened the ticket</span\n            >\n            <span class=\"font-medium text-gray-900\">{{\n              n.reference_ticket\n            }}</span>\n          </span>\n        </div>\n        <div class=\"flex items-center gap-2\">\n          <div class=\"text-sm text-gray-600\">\n            {{ dayjs.tz(n.creation).fromNow() }}\n          </div>\n          <div v-if=\"!n.read\" class=\"h-1.5 w-1.5 rounded-full bg-blue-400\" />\n        </div>\n      </div>\n    </RouterLink>\n  </div>\n  <div v-else class=\"flex flex-1 flex-col items-center gap-2\">\n    <LucideBell class=\"h-20 w-20 text-gray-300\" />\n    <div class=\"text-lg font-medium text-gray-500\">\n      {{ \"No new notifications\" }}\n    </div>\n  </div>\n</template>\n<script setup lang=\"ts\">\nimport { Breadcrumbs, Tooltip } from \"frappe-ui\";\nimport LayoutHeader from \"@/components/LayoutHeader.vue\";\nimport { useNotificationStore } from \"@/stores/notification\";\nimport { ref } from \"vue\";\nimport { onClickOutside } from \"@vueuse/core\";\nimport { dayjs } from \"@/dayjs\";\nimport { Notification } from \"@/types\";\nimport { UserAvatar } from \"@/components\";\nimport LucideBell from \"~icons/lucide/bell\";\nconst notificationStore = useNotificationStore();\nconst target = ref(null);\nonClickOutside(\n  target,\n  () => {\n    if (notificationStore.visible) {\n      notificationStore.toggle();\n    }\n  },\n  {\n    ignore: [\"#notifications-btn\"],\n  }\n);\n\nfunction getRoute(n: Notification) {\n  switch (n.notification_type) {\n    case \"Mention\":\n      return {\n        name: \"TicketAgent\",\n        params: {\n          ticketId: n.reference_ticket,\n        },\n        hash: \"#\" + n.reference_comment,\n      };\n    case \"Assignment\":\n    case \"Reaction\":\n      return {\n        name: \"TicketAgent\",\n        params: {\n          ticketId: n.reference_ticket,\n        },\n      };\n  }\n}\n</script>\n"],"names":["notificationStore","useNotificationStore","target","ref","onClickOutside","getRoute","n"],"mappings":"ymCA+EA,MAAMA,EAAoBC,IACpBC,EAASC,EAAI,IAAI,EACvBC,EACEF,EACA,IAAM,CACAF,EAAkB,SACpBA,EAAkB,OAAO,CAE7B,EACA,CACE,OAAQ,CAAC,oBAAoB,CAC/B,CAAA,EAGF,SAASK,EAASC,EAAiB,CACjC,OAAQA,EAAE,kBAAmB,CAC3B,IAAK,UACI,MAAA,CACL,KAAM,cACN,OAAQ,CACN,SAAUA,EAAE,gBACd,EACA,KAAM,IAAMA,EAAE,iBAAA,EAElB,IAAK,aACL,IAAK,WACI,MAAA,CACL,KAAM,cACN,OAAQ,CACN,SAAUA,EAAE,gBACd,CAAA,CAEN,CACF"}