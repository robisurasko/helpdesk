{"version":3,"file":"SearchArticles.vue_vue_type_script_setup_true_lang-1a4214e1.js","sources":["../../../../desk/src/components/SearchArticles.vue"],"sourcesContent":["<template>\n  <div\n    v-if=\"!isEmpty(articles.data) && query.length > 2\"\n    class=\"rounded border p-4 text-base\"\n  >\n    <div class=\"mb-2 font-medium pl-2\" v-if=\"!hideViewAll\">\n      These articles may already cover what you are looking for\n      <RouterLink\n        class=\"group cursor-pointer space-x-1 hover:text-gray-900\"\n        :to=\"{\n          name: 'CustomerKnowledgeBase',\n        }\"\n        target=\"_blank\"\n      >\n        <span class=\"text-xs underline\">(View All)</span>\n      </RouterLink>\n    </div>\n    <dl\n      class=\"mx-auto w-full flex flex-col gap-2\"\n      v-if=\"articles.data.length > 0\"\n    >\n      <div\n        v-for=\"a in articles.data\"\n        :key=\"a.id\"\n        class=\"rounded-md border-2 p-2 border-hidden hover:bg-surface-gray-2\"\n      >\n        <RouterLink\n          class=\"group cursor-pointer hover:text-gray-900 flex flex-col gap-1\"\n          :to=\"{\n            name: 'ArticlePublic',\n            params: {\n              articleId: a.name.split('#')[0],\n            },\n            hash: `#${a.name.split('#')[1]}`,\n          }\"\n          @click=\"handleSearchArticleClick(a)\"\n          target=\"_blank\"\n        >\n          <dt class=\"font-base\">{{ a.subject }} - {{ a.headings }}</dt>\n          <!-- eslint-disable-next-line vue/no-v-html -->\n          <dd\n            class=\"font-base text-p-sm text-gray-600 line-clamp-1\"\n            v-html=\"a.description\"\n          ></dd>\n        </RouterLink>\n      </div>\n    </dl>\n  </div>\n  <div\n    v-else-if=\"\n      !articles.loading && articles.data?.length === 0 && query.length > 2\n    \"\n    class=\"flex flex-col items-center justify-center h-[240px] gap-2 rounded border\"\n  >\n    <Icon icon=\"heroicons-outline:search\" class=\"h-8 w-8 text-gray-400\" />\n    <div class=\"flex items-center flex-col justify-center\">\n      <p class=\"font-base\">No answers found</p>\n      <span class=\"font-base text-p-sm text-gray-600 text-center\"\n        >Rephrase the question and try again with some keywords</span\n      >\n    </div>\n  </div>\n  <div\n    v-else-if=\"articles.loading\"\n    class=\"flex flex-col items-center justify-center h-[240px] gap-2 rounded border\"\n  >\n    <Icon icon=\"heroicons-outline:search\" class=\"h-8 w-8 text-gray-400\" />\n    <div class=\"flex items-center flex-col justify-center\">\n      <p class=\"font-base\">Searching...</p>\n      <span class=\"font-base text-p-sm text-gray-600 text-center\"\n        >Please wait while we search for the answers</span\n      >\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { watch } from \"vue\";\nimport { createResource } from \"frappe-ui\";\nimport { isEmpty } from \"lodash\";\nimport { Icon } from \"@iconify/vue\";\nimport { capture } from \"@/telemetry\";\ninterface P {\n  query: string;\n  hideViewAll?: boolean;\n}\n\nconst { query = \"\", hideViewAll = false } = defineProps<P>();\nconst articles = createResource({\n  url: \"helpdesk.api.article.search\",\n  debounce: 500,\n  auto: false,\n});\nwatch(\n  () => query,\n  (query) => {\n    if (query.length < 3) return;\n    articles.update({\n      params: {\n        query: query,\n      },\n    });\n    articles.reload();\n  }\n);\n\nfunction handleSearchArticleClick(article) {\n  capture(\"kb_customer_search_article_clicked\", {\n    data: {\n      article: article.subject,\n    },\n  });\n}\n</script>\n"],"names":["articles","createResource","watch","__props","query","handleSearchArticleClick","article","capture"],"mappings":"wpBAwFA,MAAMA,EAAWC,EAAe,CAC9B,IAAK,8BACL,SAAU,IACV,KAAM,EAAA,CACP,EACDC,EACE,IAAMC,QACLC,GAAU,CACLA,EAAM,OAAS,IACnBJ,EAAS,OAAO,CACd,OAAQ,CACN,MAAAI,CACF,CAAA,CACD,EACDJ,EAAS,OAAO,EAClB,CAAA,EAGF,SAASK,EAAyBC,EAAS,CACzCC,EAAQ,qCAAsC,CAC5C,KAAM,CACJ,QAASD,EAAQ,OACnB,CAAA,CACD,CACH"}