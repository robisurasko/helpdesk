{"version":3,"file":"MobileLayout-732a6a33.js","sources":["../../../../desk/src/composables/mobile.ts","../../../../desk/src/components/layouts/MobileSidebar.vue"],"sourcesContent":["import { ref } from \"vue\";\n\nexport const mobileSidebarOpened = ref(false);\n","<template>\n  <TransitionRoot :show=\"sidebarOpened\">\n    <Dialog as=\"div\" @close=\"sidebarOpened = false\" class=\"fixed inset-0 z-40\">\n      <TransitionChild\n        as=\"template\"\n        enter=\"transition ease-in-out duration-200 transform\"\n        enter-from=\"-translate-x-full\"\n        enter-to=\"translate-x-0\"\n        leave=\"transition ease-in-out duration-200 transform\"\n        leave-from=\"translate-x-0\"\n        leave-to=\"-translate-x-full\"\n      >\n        <div\n          class=\"relative z-10 flex h-full w-[230px] flex-col border-r bg-gray-50 transition-all duration-300 ease-in-out\"\n        >\n          <!-- user dropwdown -->\n          <div><UserMenu class=\"p-2 mb-2\" :options=\"profileSettings\" /></div>\n          <!-- notifications -->\n          <div class=\"overflow-y-auto px-2\" v-if=\"!isCustomerPortal\">\n            <div class=\"mb-3 flex flex-col\">\n              <SidebarLink\n                class=\"relative\"\n                label=\"Notifications\"\n                :icon=\"LucideBell\"\n                :on-click=\"() => (sidebarOpened = false)\"\n                :is-expanded=\"true\"\n                to=\"Notifications\"\n              >\n                <template #right>\n                  <Badge\n                    v-if=\"notificationStore.unread\"\n                    :label=\"notificationStore.unread\"\n                    theme=\"gray\"\n                    variant=\"subtle\"\n                  />\n                </template>\n              </SidebarLink>\n            </div>\n          </div>\n\n          <div v-for=\"view in allViews\" :key=\"view.label\">\n            <div\n              v-if=\"!view.hideLabel && view.views?.length\"\n              class=\"mx-2 my-2 h-1\"\n            />\n            <Section\n              :label=\"view.label\"\n              :hideLabel=\"view.hideLabel\"\n              :opened=\"view.opened\"\n            >\n              <template #header=\"{ opened, hide, toggle }\">\n                <div\n                  v-if=\"!hide\"\n                  class=\"flex cursor-pointer gap-1.5 px-1 text-base font-medium text-ink-gray-5 transition-all duration-300 ease-in-out\"\n                  :class=\"'ml-2 mt-4 h-7 w-auto opacity-100'\"\n                  @click=\"toggle()\"\n                >\n                  <FeatherIcon\n                    name=\"chevron-right\"\n                    class=\"h-4 text-ink-gray-9 transition-all duration-300 ease-in-out\"\n                    :class=\"{ 'rotate-90': opened }\"\n                  />\n                  <span>{{ view.label }}</span>\n                </div>\n              </template>\n              <nav class=\"flex flex-col ml-2 mr-1\">\n                <SidebarLink\n                  v-for=\"link in view.views\"\n                  :icon=\"link.icon\"\n                  :label=\"link.label\"\n                  :to=\"link.to\"\n                  :key=\"link.label\"\n                  :is-expanded=\"true\"\n                  :is-active=\"isActiveTab(link.to)\"\n                  class=\"my-0.5\"\n                  :onClick=\"link.onClick\"\n                />\n              </nav>\n            </Section>\n          </div>\n        </div>\n      </TransitionChild>\n      <TransitionChild\n        as=\"template\"\n        enter=\"transition-opacity ease-linear duration-200\"\n        enter-from=\"opacity-0\"\n        enter-to=\"opacity-100\"\n        leave=\"transition-opacity ease-linear duration-200\"\n        leave-from=\"opacity-100\"\n        leave-to=\"opacity-0\"\n      >\n        <DialogOverlay class=\"fixed inset-0 bg-gray-600 bg-opacity-50\" />\n      </TransitionChild>\n    </Dialog>\n  </TransitionRoot>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, markRaw } from \"vue\";\nimport {\n  TransitionRoot,\n  TransitionChild,\n  Dialog,\n  DialogOverlay,\n} from \"@headlessui/vue\";\nimport { useRouter, useRoute } from \"vue-router\";\n\nimport UserMenu from \"@/components/UserMenu.vue\";\nimport SidebarLink from \"@/components/SidebarLink.vue\";\nimport { Section } from \"@/components\";\nimport { useNotificationStore } from \"@/stores/notification\";\n\nimport { useView, currentView } from \"@/composables/useView\";\nimport { mobileSidebarOpened as sidebarOpened } from \"@/composables/mobile\";\n\nimport LucideBell from \"~icons/lucide/bell\";\n\nimport { CUSTOMER_PORTAL_LANDING } from \"@/router\";\nimport Apps from \"../Apps.vue\";\nimport {\n  agentPortalSidebarOptions,\n  customerPortalSidebarOptions,\n} from \"./layoutSettings\";\nimport { useAuthStore } from \"@/stores/auth\";\nconst { pinnedViews, publicViews } = useView();\nimport { isCustomerPortal } from \"@/utils\";\n\nconst notificationStore = useNotificationStore();\nconst route = useRoute();\nconst router = useRouter();\nconst authStore = useAuthStore();\n\nconst allViews = computed(() => {\n  const items = isCustomerPortal.value\n    ? customerPortalSidebarOptions\n    : agentPortalSidebarOptions;\n\n  const options = [\n    {\n      label: \"All Views\",\n      hideLabel: true,\n      opened: true,\n      views: items,\n    },\n  ];\n  if (publicViews.value?.length && !isCustomerPortal.value) {\n    options.push({\n      label: \"Public Views\",\n      opened: true,\n      hideLabel: false,\n      views: parseViews(publicViews.value),\n    });\n  }\n  if (pinnedViews.value?.length) {\n    options.push({\n      label: \"Private Views\",\n      opened: true,\n      hideLabel: false,\n      views: parseViews(pinnedViews.value),\n    });\n  }\n  return options;\n});\nfunction parseViews(views) {\n  return views.map((view) => {\n    return {\n      label: view.label,\n      icon: view.icon,\n      to: {\n        name: view.route_name,\n        query: { view: view.name },\n      },\n      onClick: () => {\n        currentView.value = {\n          label: view.label,\n          icon: view.icon,\n        };\n      },\n    };\n  });\n}\n\nconst customerPortalDropdown = computed(() => [\n  {\n    label: \"Log out\",\n    icon: \"log-out\",\n    onClick: () => authStore.logout(),\n  },\n]);\n\nconst agentPortalDropdown = computed(() => [\n  {\n    component: markRaw(Apps),\n  },\n  {\n    label: \"Customer portal\",\n    icon: \"users\",\n    onClick: () => {\n      const path = router.resolve({ name: CUSTOMER_PORTAL_LANDING });\n      window.open(path.href);\n    },\n  },\n  {\n    icon: \"life-buoy\",\n    label: \"Support\",\n    onClick: () => window.open(\"https://t.me/frappedesk\"),\n  },\n  {\n    icon: \"book-open\",\n    label: \"Docs\",\n    onClick: () => window.open(\"https://docs.frappe.io/helpdesk\"),\n  },\n  {\n    label: \"Log out\",\n    icon: \"log-out\",\n    onClick: () => authStore.logout(),\n  },\n]);\n\nconst profileSettings = computed(() => {\n  return isCustomerPortal.value\n    ? customerPortalDropdown.value\n    : agentPortalDropdown.value;\n});\n\nfunction isActiveTab(to: string) {\n  if (route.query.view) {\n    return route.query.view == to?.query?.view;\n  }\n  return route.name === to;\n}\n</script>\n\n<style scoped></style>\n"],"names":["mobileSidebarOpened","ref","pinnedViews","publicViews","useView","notificationStore","useNotificationStore","route","useRoute","router","useRouter","authStore","useAuthStore","allViews","computed","options","isCustomerPortal","customerPortalSidebarOptions","agentPortalSidebarOptions","_a","parseViews","_b","views","view","currentView","customerPortalDropdown","agentPortalDropdown","markRaw","Apps","path","CUSTOMER_PORTAL_LANDING","profileSettings","isActiveTab","to"],"mappings":"gkBAEa,MAAAA,EAAsBC,EAAI,EAAK,2TC0H5C,KAAM,CAAE,YAAAC,EAAa,YAAAC,CAAY,EAAIC,GAAQ,EAGvCC,EAAoBC,KACpBC,EAAQC,IACRC,EAASC,IACTC,EAAYC,IAEZC,EAAWC,EAAS,IAAM,SAK9B,MAAMC,EAAU,CACd,CACE,MAAO,YACP,UAAW,GACX,OAAQ,GACR,MATUC,EAAiB,MAC3BC,EACAC,CAQF,CAAA,EAEF,OAAIC,EAAAhB,EAAY,QAAZ,MAAAgB,EAAmB,QAAU,CAACH,EAAiB,OACjDD,EAAQ,KAAK,CACX,MAAO,eACP,OAAQ,GACR,UAAW,GACX,MAAOK,EAAWjB,EAAY,KAAK,CAAA,CACpC,GAECkB,EAAAnB,EAAY,QAAZ,MAAAmB,EAAmB,QACrBN,EAAQ,KAAK,CACX,MAAO,gBACP,OAAQ,GACR,UAAW,GACX,MAAOK,EAAWlB,EAAY,KAAK,CAAA,CACpC,EAEIa,CAAA,CACR,EACD,SAASK,EAAWE,EAAO,CAClB,OAAAA,EAAM,IAAKC,IACT,CACL,MAAOA,EAAK,MACZ,KAAMA,EAAK,KACX,GAAI,CACF,KAAMA,EAAK,WACX,MAAO,CAAE,KAAMA,EAAK,IAAK,CAC3B,EACA,QAAS,IAAM,CACbC,GAAY,MAAQ,CAClB,MAAOD,EAAK,MACZ,KAAMA,EAAK,IAAA,CAEf,CAAA,EAEH,CACH,CAEM,MAAAE,EAAyBX,EAAS,IAAM,CAC5C,CACE,MAAO,UACP,KAAM,UACN,QAAS,IAAMH,EAAU,OAAO,CAClC,CAAA,CACD,EAEKe,EAAsBZ,EAAS,IAAM,CACzC,CACE,UAAWa,EAAQC,CAAI,CACzB,EACA,CACE,MAAO,kBACP,KAAM,QACN,QAAS,IAAM,CACb,MAAMC,EAAOpB,EAAO,QAAQ,CAAE,KAAMqB,EAAyB,EACtD,OAAA,KAAKD,EAAK,IAAI,CACvB,CACF,EACA,CACE,KAAM,YACN,MAAO,UACP,QAAS,IAAM,OAAO,KAAK,yBAAyB,CACtD,EACA,CACE,KAAM,YACN,MAAO,OACP,QAAS,IAAM,OAAO,KAAK,iCAAiC,CAC9D,EACA,CACE,MAAO,UACP,KAAM,UACN,QAAS,IAAMlB,EAAU,OAAO,CAClC,CAAA,CACD,EAEKoB,EAAkBjB,EAAS,IACxBE,EAAiB,MACpBS,EAAuB,MACvBC,EAAoB,KACzB,EAED,SAASM,EAAYC,EAAY,OAC3B,OAAA1B,EAAM,MAAM,KACPA,EAAM,MAAM,QAAQY,EAAAc,GAAA,YAAAA,EAAI,QAAJ,YAAAd,EAAW,MAEjCZ,EAAM,OAAS0B,CACxB"}