{"version":3,"file":"DesktopLayout-50f2634a.js","sources":["../../../../desk/src/components/notifications/Notifications.vue","../../../../desk/src/components/layouts/AppHeader.vue","../../../../node_modules/frappe-ui/frappe/Help/help.js","../../../../node_modules/frappe-ui/frappe/Onboarding/onboarding.js","../../../../node_modules/frappe-ui/frappe/HelpCenter/helpCenter.js","../../../../node_modules/frappe-ui/frappe/Icons/LightningIcon.vue","../../../../node_modules/frappe-ui/frappe/Billing/TrialBanner.vue","../../../../desk/src/assets/images/gmail.png","../../../../desk/src/assets/images/outlook.png","../../../../desk/src/assets/images/sendgrid.png","../../../../desk/src/assets/images/sparkpost.webp","../../../../desk/src/assets/images/yahoo.png","../../../../desk/src/assets/images/yandex.png","../../../../desk/src/assets/images/frappe-mail.svg","../../../../desk/src/components/Settings/emailConfig.ts","../../../../desk/src/components/Settings/EmailAdd.vue","../../../../desk/src/components/Settings/EmailAccountCard.vue","../../../../desk/src/components/Settings/EmailAccountList.vue","../../../../desk/src/components/Settings/EmailEdit.vue","../../../../desk/src/components/Settings/EmailConfig.vue","../../../../desk/src/components/Settings/Branding.vue","../../../../desk/src/components/Settings/SettingsModal.vue","../../../../desk/src/components/layouts/Sidebar.vue"],"sourcesContent":["<template>\n  <span\n    v-if=\"notificationStore.visible\"\n    ref=\"target\"\n    class=\"fixed z-10 h-screen overflow-auto bg-white\"\n    :style=\"{\n      'box-shadow': '8px 0px 8px rgba(0, 0, 0, 0.1)',\n      'max-width': '350px',\n      'min-width': '350px',\n      left: sidebarStore.width,\n    }\"\n  >\n    <div\n      class=\"sticky top-0 z-10 flex items-center justify-between border-b bg-white px-5 py-2.5\"\n    >\n      <span class=\"text-lg font-medium\">Notifications</span>\n      <span>\n        <Button\n          theme=\"blue\"\n          variant=\"ghost\"\n          @click=\"() => notificationStore.clear.submit()\"\n        >\n          <template #icon>\n            <LucideCheckCheck class=\"h-4 w-4\" />\n          </template>\n        </Button>\n        <Button\n          theme=\"gray\"\n          variant=\"ghost\"\n          @click=\"() => notificationStore.toggle()\"\n        >\n          <template #icon>\n            <LucideX class=\"h-4 w-4\" />\n          </template>\n        </Button>\n      </span>\n    </div>\n    <div class=\"divide-y text-base\">\n      <RouterLink\n        v-for=\"n in notificationStore.data\"\n        :key=\"n.name\"\n        class=\"flex cursor-pointer items-start gap-3.5 px-5 py-2.5 hover:bg-gray-100\"\n        :to=\"getRoute(n)\"\n        @click=\"\n          () => {\n            handleNotificationClick(n);\n          }\n        \"\n      >\n        <UserAvatar :name=\"n.user_from\" />\n        <span>\n          <div class=\"mb-2 leading-5\">\n            <span class=\"space-x-1 text-gray-700\">\n              <span class=\"font-medium text-gray-900\">{{ n.user_from }}</span>\n              <span v-if=\"n.notification_type === 'Mention'\"\n                >mentioned you in ticket</span\n              >\n              <span v-if=\"n.notification_type === 'Assignment'\"\n                >assigned you a ticket</span\n              >\n              <span v-if=\"n.notification_type === 'Reaction'\"\n                >has reopened the ticket</span\n              >\n              <span class=\"font-medium text-gray-900\">{{\n                n.reference_ticket\n              }}</span>\n            </span>\n          </div>\n          <div class=\"flex items-center gap-2\">\n            <div class=\"text-sm text-gray-600\">\n              {{ dayjs.tz(n.creation).fromNow() }}\n            </div>\n            <div v-if=\"!n.read\" class=\"h-1.5 w-1.5 rounded-full bg-blue-400\" />\n          </div>\n        </span>\n      </RouterLink>\n    </div>\n  </span>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from \"vue\";\nimport { onClickOutside } from \"@vueuse/core\";\nimport { dayjs } from \"@/dayjs\";\nimport { Notification } from \"@/types\";\nimport { useSidebarStore } from \"@/stores/sidebar\";\nimport { useNotificationStore } from \"@/stores/notification\";\nimport { UserAvatar } from \"@/components\";\n\nconst notificationStore = useNotificationStore();\nconst sidebarStore = useSidebarStore();\nconst target = ref(null);\nonClickOutside(\n  target,\n  () => {\n    if (notificationStore.visible) {\n      notificationStore.toggle();\n    }\n  },\n  {\n    ignore: [\"#notifications-btn\"],\n  }\n);\n\nfunction handleNotificationClick(n: Notification) {\n  notificationStore.toggle();\n  if (n.read) return;\n  notificationStore.read(n.reference_ticket);\n}\n\nfunction getRoute(n: Notification) {\n  switch (n.notification_type) {\n    case \"Mention\":\n      return {\n        name: \"TicketAgent\",\n        params: {\n          ticketId: n.reference_ticket,\n        },\n        hash: \"#\" + n.reference_comment,\n      };\n    case \"Assignment\":\n    case \"Reaction\":\n      return {\n        name: \"TicketAgent\",\n        params: {\n          ticketId: n.reference_ticket,\n        },\n      };\n  }\n}\n</script>\n","<template>\n  <div class=\"border-b\">\n    <div id=\"app-header\" class=\"w-full px-2 py-1\">\n      <!-- Status dropdown moved to its own line -->\n      <div class=\"flex flex-col items-center\">\n        <div class=\"flex items-center gap-2\">\n          <span class=\"text-xs text-gray-600\">My Status</span>\n          <div class=\"flex items-center gap-1\">\n            <div class=\"w-2 h-2 rounded-full\" :class=\"{\n              'bg-green-500': agentStatus === 'Online',\n              'bg-yellow-500': agentStatus === 'Busy',\n              'bg-red-500': agentStatus === 'Offline'\n            }\"></div>\n            \n            <div class=\"relative\">\n              <select \n                v-model=\"agentStatus\" \n                class=\"appearance-none bg-gray-100 border border-gray-300 rounded text-xs px-1.5 py-0.5 pr-5 focus:outline-none focus:ring-1 focus:ring-blue-500 h-[1.25rem]\"\n                @change=\"updateAgentStatus\"\n              >\n                <option value=\"Online\">Online</option>\n                <option value=\"Busy\">Busy</option>\n                <option value=\"Offline\">Offline</option>\n              </select>\n              <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-1 text-gray-500\">\n                <svg class=\"fill-current h-2.5 w-2.5\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\">\n                  <path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"/>\n                </svg>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue';\nimport { createResource } from 'frappe-ui';\n\nconst agentStatus = ref('Online');\nconst currentUser = ref('');\nconst agentDocName = ref('');\n\n// Load current user and their status\nonMounted(() => {\n  createResource({\n    url: 'frappe.auth.get_logged_user'\n  }).submit().then(user => {\n    currentUser.value = user;\n    \n    // Get the agent record for this user\n    createResource({\n      url: 'frappe.client.get_list',\n      params: {\n        doctype: 'HD Agent',\n        fields: ['name', 'custom_current_status'],\n        filters: { name: user },\n        limit: 1\n      }\n    }).submit().then(data => {\n      if (data && data.length > 0) {\n        agentDocName.value = data[0].name;\n        agentStatus.value = data[0].custom_current_status || 'Offline';\n      }\n    });\n  });\n});\n\n// Update agent status\nfunction updateAgentStatus() {\n  if (!agentDocName.value) return;\n  \n  createResource({\n    url: 'frappe.client.set_value',\n    params: {\n      doctype: 'HD Agent',\n      name: agentDocName.value,\n      fieldname: 'custom_current_status',\n      value: agentStatus.value\n    }\n  }).submit();\n}\n</script>\n\n<style scoped>\nselect {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  background-image: none;\n}\n</style>","import { ref } from 'vue'\n\nexport const showHelpModal = ref(false)\nexport const minimize = ref(false)\n","import call from '../../src/utils/call'\nimport { createResource } from '../../src/resources'\nimport { minimize } from '../Help/help'\nimport { useStorage } from '@vueuse/core'\nimport { computed, reactive } from 'vue'\n\nconst onboardings = reactive({})\nconst onboardingStatus = useStorage('onboardingStatus', {})\n\nexport function useOnboarding(appName) {\n  const isOnboardingStepsCompleted = useStorage(\n    'isOnboardingStepsCompleted' + appName,\n    false,\n  )\n\n  const onboardingSteps = computed(\n    () => onboardingStatus.value?.[appName + '_onboarding_status'] || [],\n  )\n\n  if (!onboardingSteps.value.length && !isOnboardingStepsCompleted.value) {\n    createResource({\n      url: 'frappe.onboarding.get_onboarding_status',\n      cache: 'onboarding_status',\n      auto: true,\n      onSuccess: (data) => {\n        onboardingStatus.value = data\n        syncStatus()\n      },\n    })\n  }\n\n  const stepsCompleted = computed(\n    () => onboardings[appName]?.filter((step) => step.completed).length || 0,\n  )\n  const totalSteps = computed(() => onboardings[appName]?.length || 0)\n\n  const completedPercentage = computed(() =>\n    Math.floor((stepsCompleted.value / totalSteps.value) * 100),\n  )\n\n  function skip(step, callback = null) {\n    updateOnboardingStep(step, true, true, callback)\n  }\n\n  function skipAll(callback = null) {\n    updateAll(true, callback)\n  }\n\n  function reset(step, callback = null) {\n    updateOnboardingStep(step, false, false, callback)\n  }\n\n  function resetAll(callback = null) {\n    updateAll(false, callback)\n  }\n\n  function updateOnboardingStep(\n    step,\n    value = true,\n    skipped = false,\n    callback = null,\n  ) {\n    if (isOnboardingStepsCompleted.value) return\n\n    if (!onboardingSteps.value.length) {\n      onboardingStatus.value[appName + '_onboarding_status'] = onboardings[\n        appName\n      ].map((s) => {\n        return { name: s.name, completed: false }\n      })\n    }\n\n    let index = onboardingSteps.value.findIndex((s) => s.name === step)\n    if (index !== -1) {\n      onboardingSteps.value[index].completed = value\n      onboardings[appName][index].completed = value\n    }\n\n    updateUserOnboardingStatus(onboardingSteps.value)\n\n    callback?.(step, skipped)\n\n    minimize.value = false\n  }\n\n  function updateAll(value, callback = null) {\n    if (isOnboardingStepsCompleted.value && value) return\n\n    if (!onboardingSteps.value.length) {\n      onboardingStatus.value[appName + '_onboarding_status'] = onboardings[\n        appName\n      ].map((s) => {\n        return { name: s.name, completed: value }\n      })\n    } else {\n      onboardingSteps.value.forEach((step) => {\n        step.completed = value\n      })\n    }\n\n    onboardings[appName].forEach((step) => {\n      step.completed = value\n    })\n\n    updateUserOnboardingStatus(onboardingSteps.value)\n\n    callback?.(value)\n  }\n\n  function updateUserOnboardingStatus(steps) {\n    call('frappe.onboarding.update_user_onboarding_status', {\n      steps: JSON.stringify(steps),\n      appName,\n    })\n  }\n\n  function syncStatus() {\n    if (isOnboardingStepsCompleted.value) return\n\n    if (onboardingSteps.value.length) {\n      let _steps = onboardingSteps.value\n      _steps.forEach((step, index) => {\n        onboardings[appName][index].completed = step.completed\n      })\n      isOnboardingStepsCompleted.value = _steps.every((step) => step.completed)\n    } else {\n      isOnboardingStepsCompleted.value = false\n    }\n  }\n\n  function setUp(steps) {\n    if (onboardings[appName]) return\n\n    onboardings[appName] = steps\n    syncStatus()\n  }\n\n  return {\n    steps: onboardings[appName],\n    stepsCompleted,\n    totalSteps,\n    completedPercentage,\n    isOnboardingStepsCompleted,\n    updateOnboardingStep,\n    skip,\n    skipAll,\n    reset,\n    resetAll,\n    setUp,\n    syncStatus,\n  }\n}\n","import { ref } from 'vue'\n\nexport const showHelpCenter = ref(false)\n","<template>\n  <svg\n    width=\"17\"\n    height=\"16\"\n    viewBox=\"0 0 17 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M6.2641 1C5.5758 1 4.97583 1.46845 4.80889 2.1362L3.57555 7.06953C3.33887 8.01625 4.05491 8.93333 5.03077 8.93333H7.50682L6.72168 14.4293C6.68838 14.6624 6.82229 14.8872 7.04319 14.9689C7.26408 15.0507 7.51204 14.9671 7.63849 14.7684L13.2161 6.00354C13.6398 5.33782 13.1616 4.46667 12.3725 4.46667H9.59038L10.3017 1.62127C10.3391 1.4719 10.3055 1.31365 10.2108 1.19229C10.116 1.07094 9.97063 1 9.81666 1H6.2641ZM5.77903 2.37873C5.83468 2.15615 6.03467 2 6.2641 2H9.17627L8.46492 4.8454C8.42758 4.99477 8.46114 5.15302 8.55589 5.27437C8.65064 5.39573 8.79602 5.46667 8.94999 5.46667H12.3725L8.0395 12.2757L8.5783 8.50404C8.5988 8.36056 8.55602 8.21523 8.46105 8.10573C8.36608 7.99623 8.22827 7.93333 8.08332 7.93333H5.03077C4.70548 7.93333 4.4668 7.62764 4.5457 7.31207L5.77903 2.37873Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <div\n    v-if=\"!isSidebarCollapsed && showBanner\"\n    class=\"flex flex-col gap-3 shadow-sm rounded-lg py-2.5 px-3 bg-surface-modal text-base\"\n  >\n    <div class=\"flex flex-col gap-1\">\n      <div class=\"inline-flex text-ink-gray-9 gap-2 items-center font-medium\">\n        <FeatherIcon class=\"h-4\" name=\"info\" />\n        {{ trialTitle }}\n      </div>\n      <div class=\"text-ink-gray-7 text-p-sm\">\n        {{ trialMessage }}\n      </div>\n    </div>\n    <Button :label=\"'Upgrade plan'\" theme=\"blue\" @click=\"upgradePlan\">\n      <template #prefix>\n        <LightningIcon class=\"size-4\" />\n      </template>\n    </Button>\n  </div>\n  <Button v-else-if=\"isSidebarCollapsed && showBanner\" @click=\"upgradePlan\">\n    <LightningIcon class=\"h-4 my-0.5 shrink-0\" />\n  </Button>\n</template>\n<script setup>\nimport LightningIcon from '../Icons/LightningIcon.vue'\nimport FeatherIcon from '../../src/components/FeatherIcon.vue'\nimport { Button } from '../../src/components/Button'\nimport { createResource } from '../../src/resources'\nimport { ref, computed } from 'vue'\n\nconst props = defineProps({\n  isSidebarCollapsed: {\n    type: Boolean,\n    default: false,\n  },\n  afterUpgrade: {\n    type: Function,\n    default: () => {},\n  },\n})\n\nconst trialEndDays = ref(0)\nconst showBanner = ref(false)\nconst baseEndpoint = ref('https://frappecloud.com')\nconst siteName = ref('')\n\nconst trialTitle = computed(() => {\n  return trialEndDays.value > 1\n    ? 'Trial ends in ' + trialEndDays.value + ' days'\n    : 'Trial ends tomorrow'\n})\n\nconst trialMessage = 'Upgrade to a paid plan for uninterrupted services'\n\ncreateResource({\n  url: 'frappe.integrations.frappe_providers.frappecloud_billing.current_site_info',\n  cache: 'current_site_info_data',\n  auto: true,\n  onSuccess: (data) => {\n    trialEndDays.value = calculateTrialEndDays(data.trial_end_date)\n    baseEndpoint.value = data.base_url\n    siteName.value = data.site_name\n    showBanner.value =\n      data.setup_complete && data.plan.is_trial_plan && trialEndDays.value > 0\n  },\n})\n\nfunction calculateTrialEndDays(trialEndDate) {\n  if (!trialEndDate) return 0\n\n  trialEndDate = new Date(trialEndDate)\n  const today = new Date()\n  const diffTime = trialEndDate - today\n  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24))\n  return diffDays\n}\n\nfunction upgradePlan() {\n  window.open(\n    `${baseEndpoint.value}/dashboard/sites/${siteName.value}`,\n    '_blank',\n  )\n  props.afterUpgrade?.()\n}\n</script>\n","export default \"__VITE_ASSET__ae42638a__\"","export default \"__VITE_ASSET__7cc0e65d__\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAwMAAALUBAMAAAClQPMzAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAlwSFlzAAAuIwAALiMBeKU/dgAAACRQTFRFR3BMNqzpdMXvXb3tr+f3o+P1AJ/ZGoPjALPjmeH1dc3uBqfjM5e/jQAAAAZ0Uk5TAPVwwVLTgnc47wAABIBJREFUeNrt1rEJwlAYhdEHNpZa2UpwAxewcAXtbdJYpQo4gATsBVdwAOcTd/DyknC+9zY4XPhLkSRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJGmGL/cTazo5gOWR69KFWCBAgQIAAAQIECBAgmArBHYEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAMHfO4U6X9tP4reb9aX77/v9rqtH8Ar1bEOl1oWgNsGAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAjqEfShbu9QTajD/AhS8yqzCwECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIKheE2p3DFUkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZLG2Bet4fvU2eVggAAAAABJRU5ErkJggg==\"","export default \"__VITE_ASSET__b6543205__\"","export default \"__VITE_ASSET__14b6d168__\"","export default \"__VITE_ASSET__d995bd23__\"","export default \"__VITE_ASSET__61f532d2__\"","import LogoGmail from \"@/assets/images/gmail.png\";\nimport LogoOutlook from \"@/assets/images/outlook.png\";\nimport LogoSendgrid from \"@/assets/images/sendgrid.png\";\nimport LogoSparkpost from \"@/assets/images/sparkpost.webp\";\nimport LogoYahoo from \"@/assets/images/yahoo.png\";\nimport LogoYandex from \"@/assets/images/yandex.png\";\nimport LogoFrappeMail from \"@/assets/images/frappe-mail.svg\";\nimport { RenderField, EmailService, EmailAccount } from \"@/types\";\nimport { validateEmailWithZod } from \"@/utils\";\nconst fixedFields: RenderField[] = [\n  {\n    label: \"Account Name\",\n    name: \"email_account_name\",\n    type: \"text\",\n    placeholder: \"Support / Sales\",\n  },\n  {\n    label: \"Email ID\",\n    name: \"email_id\",\n    type: \"email\",\n    placeholder: \"johndoe@example.com\",\n  },\n];\n\nexport const incomingOutgoingFields: RenderField[] = [\n  {\n    label: \"Enable Incoming\",\n    name: \"enable_incoming\",\n    type: \"checkbox\",\n    description:\n      \"If enabled, tickets can be created from the incoming emails on this account.\",\n  },\n  {\n    label: \"Enable Outgoing\",\n    name: \"enable_outgoing\",\n    type: \"checkbox\",\n    description: \"If enabled, outgoing emails can be sent from this account.\",\n  },\n  {\n    label: \"Default Incoming\",\n    name: \"default_incoming\",\n    type: \"checkbox\",\n    description:\n      \"If enabled, all replies to your company (eg: replies@yourcomany.com) will come to this account. Note: Only one account can be default incoming.\",\n  },\n  {\n    label: \"Default Outgoing\",\n    name: \"default_outgoing\",\n    type: \"checkbox\",\n    description:\n      \"If enabled, all outgoing emails will be sent from this account. Note: Only one account can be default outgoing.\",\n  },\n];\n\nexport const popularProviderFields = [\n  ...fixedFields,\n  {\n    label: \"Password\",\n    name: \"password\",\n    type: \"password\",\n    placeholder: \"********\",\n  },\n];\n\nexport const customProviderFields = [\n  ...fixedFields,\n  {\n    label: \"Frappe Mail Site\",\n    name: \"frappe_mail_site\",\n    type: \"text\",\n    placeholder: \"https://frappemail.com\",\n  },\n  {\n    label: \"API Key\",\n    name: \"api_key\",\n    type: \"text\",\n    placeholder: \"********\",\n  },\n  {\n    label: \"API Secret\",\n    name: \"api_secret\",\n    type: \"password\",\n    placeholder: \"********\",\n  },\n];\n\nexport const services: EmailService[] = [\n  {\n    name: \"GMail\",\n    icon: LogoGmail,\n    info: `Setting up GMail requires you to enable two factor authentication\n\t\t  and app specific passwords. Read more`,\n    link: \"https://support.google.com/accounts/answer/185833\",\n    custom: false,\n  },\n  {\n    name: \"Outlook\",\n    icon: LogoOutlook,\n    info: `Setting up Outlook requires you to enable two factor authentication\n\t\t  and app specific passwords. Read more`,\n    link: \"https://support.microsoft.com/en-us/account-billing/how-to-get-and-use-app-passwords-5896ed9b-4263-e681-128a-a6f2979a7944\",\n    custom: false,\n  },\n  {\n    name: \"Sendgrid\",\n    icon: LogoSendgrid,\n    info: `Setting up Sendgrid requires you to enable two factor authentication\n\t\t  and app specific passwords. Read more `,\n    link: \"https://sendgrid.com/docs/ui/account-and-settings/two-factor-authentication/\",\n    custom: false,\n  },\n  {\n    name: \"SparkPost\",\n    icon: LogoSparkpost,\n    info: `Setting up SparkPost requires you to enable two factor authentication\n\t\t  and app specific passwords. Read more `,\n    link: \"https://support.sparkpost.com/docs/my-account-and-profile/enabling-two-factor-authentication\",\n    custom: false,\n  },\n  {\n    name: \"Yahoo\",\n    icon: LogoYahoo,\n    info: `Setting up Yahoo requires you to enable two factor authentication\n\t\t  and app specific passwords. Read more `,\n    link: \"https://help.yahoo.com/kb/SLN15241.html\",\n    custom: false,\n  },\n  {\n    name: \"Yandex\",\n    icon: LogoYandex,\n    info: `Setting up Yandex requires you to enable two factor authentication\n\t\t  and app specific passwords. Read more `,\n    link: \"https://yandex.com/support/id/authorization/app-passwords.html\",\n    custom: false,\n  },\n  {\n    name: \"Frappe Mail\",\n    icon: LogoFrappeMail,\n    info: `Setting up Frappe Mail requires you to have an API key and API Secret of your email account. Read more `,\n    link: \"https://github.com/frappe/mail\",\n    custom: true,\n  },\n];\n\nexport const emailIcon = {\n  GMail: LogoGmail,\n  Outlook: LogoOutlook,\n  Sendgrid: LogoSendgrid,\n  SparkPost: LogoSparkpost,\n  Yahoo: LogoYahoo,\n  Yandex: LogoYandex,\n  \"Frappe Mail\": LogoFrappeMail,\n};\n\nexport function validateInputs(state: EmailAccount, isCustom: boolean) {\n  if (!state.email_account_name) {\n    return \"Account name is required\";\n  }\n  if (!state.email_id) {\n    return \"Email ID is required\";\n  }\n  const validEmail = validateEmailWithZod(state.email_id);\n  if (!validEmail) {\n    return \"Invalid email ID\";\n  }\n  if (!isCustom && !state.password) {\n    return \"Password is required\";\n  }\n  if (isCustom) {\n    if (!state.api_key) {\n      return \"API Key is required\";\n    }\n    if (!state.api_secret) {\n      return;\n    }\n  }\n  return \"\";\n}\n","<template>\n  <div class=\"flex h-full flex-col gap-4\">\n    <!-- title and desc -->\n    <div role=\"heading\" aria-level=\"1\" class=\"flex flex-col gap-1\">\n      <h5 class=\"text-lg font-semibold\">Setup Email</h5>\n      <p class=\"text-sm text-gray-600\">\n        Choose the email service provider you want to configure.\n      </p>\n    </div>\n    <!-- email service provider selection -->\n    <div class=\"flex flex-wrap items-center gap-4\">\n      <div\n        v-for=\"s in services\"\n        :key=\"s.name\"\n        class=\"min-w-3 mt-4 flex flex-col items-center gap-1\"\n        @click=\"handleSelect(s)\"\n      >\n        <EmailProviderIcon\n          :service-name=\"s.name\"\n          :logo=\"s.icon\"\n          :selected=\"selectedService?.name === s?.name\"\n        />\n      </div>\n    </div>\n    <div v-if=\"selectedService\" class=\"flex flex-col gap-4\">\n      <!-- email service provider info -->\n      <div class=\"flex items-center gap-2 rounded-md p-2 ring-1 ring-gray-200\">\n        <CircleAlert\n          class=\"h-6 w-5 w-min-5 w-max-5 min-h-5 max-w-5 text-blue-500\"\n        />\n        <div class=\"text-wrap text-xs text-gray-700\">\n          {{ selectedService.info }}\n          <a\n            :href=\"selectedService.link\"\n            target=\"_blank\"\n            class=\"text-blue-500 underline\"\n            >here</a\n          >\n          .\n        </div>\n      </div>\n      <!-- service provider fields -->\n      <div class=\"flex flex-col gap-4\">\n        <div class=\"grid grid-cols-1 gap-4\">\n          <div\n            v-for=\"field in fields\"\n            :key=\"field.name\"\n            class=\"flex flex-col gap-1\"\n          >\n            <FormControl\n              v-model=\"state[field.name]\"\n              :label=\"field.label\"\n              :name=\"field.name\"\n              :type=\"field.type\"\n              :placeholder=\"field.placeholder\"\n            />\n          </div>\n        </div>\n        <div class=\"grid grid-cols-2 gap-4\">\n          <div\n            v-for=\"field in incomingOutgoingFields\"\n            :key=\"field.name\"\n            class=\"flex flex-col gap-1\"\n          >\n            <FormControl\n              v-model=\"state[field.name]\"\n              :label=\"field.label\"\n              :name=\"field.name\"\n              :type=\"field.type\"\n            />\n            <p class=\"text-gray-500 text-p-sm\">{{ field.description }}</p>\n          </div>\n        </div>\n        <ErrorMessage v-if=\"error\" class=\"ml-1\" :message=\"error\" />\n      </div>\n    </div>\n    <!-- action button -->\n    <div v-if=\"selectedService\" class=\"mt-auto flex justify-between\">\n      <Button\n        label=\"Back\"\n        theme=\"gray\"\n        variant=\"outline\"\n        :disabled=\"addEmailRes.loading\"\n        @click=\"emit('update:step', 'email-list')\"\n      />\n      <Button\n        label=\"Create\"\n        variant=\"solid\"\n        :loading=\"addEmailRes.loading\"\n        @click=\"createEmailAccount\"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, Reactive, reactive, Ref, ref } from \"vue\";\nimport { createResource } from \"frappe-ui\";\nimport CircleAlert from \"~icons/lucide/circle-alert\";\nimport { createToast } from \"@/utils\";\nimport {\n  customProviderFields,\n  popularProviderFields,\n  services,\n  validateInputs,\n  incomingOutgoingFields,\n} from \"./emailConfig\";\nimport EmailProviderIcon from \"./EmailProviderIcon.vue\";\nimport { EmailService, EmailAccount, EmailStep } from \"@/types\";\n\ninterface E {\n  (event: \"update:step\", value: EmailStep): void;\n}\n\nconst emit = defineEmits<E>();\n\nconst state: Reactive<EmailAccount> = reactive({\n  service: \"\",\n  email_account_name: \"\",\n  email_id: \"\",\n  password: \"\",\n  api_key: \"\",\n  api_secret: \"\",\n  frappe_mail_site: \"\",\n  enable_incoming: false,\n  enable_outgoing: false,\n  default_incoming: false,\n  default_outgoing: false,\n});\n\nconst selectedService: Ref<EmailService> = ref(null);\nconst fields = computed(() =>\n  selectedService.value.custom ? customProviderFields : popularProviderFields\n);\n\nfunction handleSelect(service: EmailService) {\n  selectedService.value = service;\n  state.service = service.name;\n}\n\nconst addEmailRes = createResource({\n  url: \"helpdesk.api.settings.create_email_account\",\n  makeParams: (val: EmailAccount) => {\n    return {\n      ...val,\n    };\n  },\n  onSuccess: () => {\n    createToast({\n      title: \"Email account created successfully\",\n      icon: \"check\",\n      iconClasses: \"text-green-600\",\n    });\n    emit(\"update:step\", \"email-list\");\n  },\n  onError: () => {\n    error.value = \"Failed to create email account, Invalid credentials\";\n  },\n});\n\nconst error = ref<string | undefined>();\nfunction createEmailAccount() {\n  error.value = validateInputs(state, selectedService.value.custom);\n  if (error.value) return;\n\n  addEmailRes.submit({ data: state });\n}\n</script>\n\n<style scoped></style>\n","<template>\n  <div\n    class=\"flex justify-between items-center border-b border-gray-200 p-2 cursor-pointer\"\n  >\n    <!-- avatar and name -->\n    <div class=\"flex justify-between items-center gap-2\">\n      <EmailProviderIcon :logo=\"emailIcon[emailAccount.service]\" />\n      <div>\n        <p class=\"text-gray-700 font-semibold\">\n          {{ emailAccount.email_account_name }}\n        </p>\n        <div class=\"text-sm text-gray-500\">{{ emailAccount.email_id }}</div>\n      </div>\n    </div>\n    <div>\n      <Badge\n        variant=\"subtle\"\n        :label=\"badgeTitleColor[0]\"\n        :theme=\"badgeTitleColor[1]\"\n      />\n    </div>\n    <!-- email id -->\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { EmailAccount } from \"@/types\";\nimport { emailIcon } from \"./emailConfig\";\nimport EmailProviderIcon from \"./EmailProviderIcon.vue\";\nimport { computed } from \"vue\";\n\ninterface P {\n  emailAccount: EmailAccount;\n}\n\nconst props = defineProps<P>();\n\nconst badgeTitleColor = computed(() => {\n  if (\n    props.emailAccount.default_incoming &&\n    props.emailAccount.default_outgoing\n  ) {\n    const color =\n      props.emailAccount.enable_incoming && props.emailAccount.enable_outgoing\n        ? \"blue\"\n        : \"gray\";\n    return [\"Default Sending and Inbox\", color];\n  } else if (props.emailAccount.default_incoming) {\n    const color = props.emailAccount.enable_incoming ? \"blue\" : \"gray\";\n    return [\"Default Inbox\", color];\n  } else if (props.emailAccount.default_outgoing) {\n    const color = props.emailAccount.enable_outgoing ? \"blue\" : \"gray\";\n    return [\"Default Sending\", color];\n  } else {\n    const color = props.emailAccount.enable_incoming ? \"blue\" : \"gray\";\n    return [\"Inbox\", color];\n  }\n});\n</script>\n\n<style scoped></style>\n","<template>\n  <div>\n    <!-- header -->\n    <div class=\"flex items-center justify-between\">\n      <h1 class=\"text-lg font-semibold\">Email Accounts</h1>\n      <Button\n        label=\"Add Account\"\n        theme=\"gray\"\n        variant=\"solid\"\n        @click=\"emit('update:step', 'email-add')\"\n      >\n        <template #prefix>\n          <LucidePlus class=\"h-4 w-4\" />\n        </template>\n      </Button>\n    </div>\n    <!-- list accounts -->\n    <div\n      v-if=\"!emailAccounts.loading && Boolean(emailAccounts.data?.length)\"\n      class=\"mt-4\"\n    >\n      <div v-for=\"emailAccount in emailAccounts.data\" :key=\"emailAccount.name\">\n        <EmailAccountCard\n          :emailAccount=\"emailAccount\"\n          @click=\"emit('update:step', 'email-edit', emailAccount)\"\n        />\n      </div>\n    </div>\n    <!-- fallback if no email accounts -->\n    <div v-else class=\"flex items-center justify-center h-64 text-gray-500\">\n      Please add an email account to continue.\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { createListResource } from \"frappe-ui\";\nimport EmailAccountCard from \"./EmailAccountCard.vue\";\nimport { EmailAccount } from \"@/types\";\n\nconst emit = defineEmits([\"update:step\"]);\n\nconst emailAccounts = createListResource({\n  doctype: \"Email Account\",\n  cache: true,\n  fields: [\"*\"],\n  filters: {\n    email_id: [\"Not Like\", \"%example%\"],\n  },\n  pageLength: 10,\n  auto: true,\n  onSuccess: (accounts: EmailAccount[]) => {\n    // convert 0 to false to handle boolean fields\n    accounts.forEach((account) => {\n      account.enable_incoming = Boolean(account.enable_incoming);\n      account.enable_outgoing = Boolean(account.enable_outgoing);\n      account.default_incoming = Boolean(account.default_incoming);\n      account.default_outgoing = Boolean(account.default_outgoing);\n    });\n  },\n});\n</script>\n","<template>\n  <div class=\"flex h-full flex-col gap-4\">\n    <!-- title and desc -->\n    <div role=\"heading\" aria-level=\"1\" class=\"flex gap-1 justify-between\">\n      <h5 class=\"text-lg font-semibold\">Edit Email</h5>\n    </div>\n    <div class=\"w-fit\">\n      <EmailProviderIcon\n        :logo=\"emailIcon[accountData.service]\"\n        :service-name=\"accountData.service\"\n      />\n    </div>\n    <!-- banner for setting up email account -->\n    <div class=\"flex items-center gap-2 rounded-md p-2 ring-1 ring-gray-200\">\n      <CircleAlert\n        class=\"h-6 w-5 w-min-5 w-max-5 min-h-5 max-w-5 text-blue-500\"\n      />\n      <div class=\"text-wrap text-xs text-gray-700\">\n        {{ info.description }}\n        <a :href=\"info.link\" target=\"_blank\" class=\"text-blue-500 underline\"\n          >here</a\n        >\n        .\n      </div>\n    </div>\n    <!-- fields -->\n    <div class=\"flex flex-col gap-4\">\n      <div class=\"grid grid-cols-1 gap-4\">\n        <div\n          v-for=\"field in fields\"\n          :key=\"field.name\"\n          class=\"flex flex-col gap-1\"\n        >\n          <FormControl\n            v-model=\"state[field.name]\"\n            :label=\"field.label\"\n            :name=\"field.name\"\n            :type=\"field.type\"\n            :placeholder=\"field.placeholder\"\n          />\n        </div>\n      </div>\n      <div class=\"grid grid-cols-2 gap-4\">\n        <div\n          v-for=\"field in incomingOutgoingFields\"\n          :key=\"field.name\"\n          class=\"flex flex-col gap-1\"\n        >\n          <FormControl\n            v-model=\"state[field.name]\"\n            :label=\"field.label\"\n            :name=\"field.name\"\n            :type=\"field.type\"\n          />\n          <p class=\"text-p-sm text-gray-500\">{{ field.description }}</p>\n        </div>\n      </div>\n      <ErrorMessage v-if=\"error\" class=\"ml-1\" :message=\"error\" />\n    </div>\n    <!-- action buttons -->\n    <div class=\"mt-auto flex justify-between\">\n      <Button\n        label=\"Back\"\n        theme=\"gray\"\n        variant=\"outline\"\n        :disabled=\"loading\"\n        @click=\"emit('update:step', 'email-list')\"\n      />\n      <Button\n        label=\"Update Account\"\n        variant=\"solid\"\n        @click=\"updateAccount\"\n        :loading=\"loading\"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, reactive, ref } from \"vue\";\nimport { call } from \"frappe-ui\";\nimport EmailProviderIcon from \"./EmailProviderIcon.vue\";\nimport {\n  emailIcon,\n  services,\n  popularProviderFields,\n  customProviderFields,\n  validateInputs,\n  incomingOutgoingFields,\n} from \"./emailConfig\";\nimport { EmailAccount, EmailStep } from \"@/types\";\nimport { createToast } from \"@/utils\";\nimport CircleAlert from \"~icons/lucide/circle-alert\";\n\ninterface P {\n  accountData: EmailAccount;\n}\n\ninterface E {\n  (event: \"update:step\", step: EmailStep): void;\n}\n\nconst props = withDefaults(defineProps<P>(), {\n  accountData: null,\n});\n\nconst emit = defineEmits<E>();\n\nconst state = reactive({\n  email_account_name: props.accountData.email_account_name || \"\",\n  service: props.accountData.service || \"\",\n  email_id: props.accountData.email_id || \"\",\n  api_key: props.accountData?.api_key || null,\n  api_secret: props.accountData?.api_secret || null,\n  password: props.accountData?.password || null,\n  frappe_mail_site: props.accountData?.frappe_mail_site || \"\",\n  enable_incoming: props.accountData.enable_incoming || false,\n  enable_outgoing: props.accountData.enable_outgoing || false,\n  default_outgoing: props.accountData.default_outgoing || false,\n  default_incoming: props.accountData.default_incoming || false,\n});\n\nconst info = {\n  description: \"To know more about setting up email accounts, click\",\n  link: \"https://docs.erpnext.com/docs/user/manual/en/email-account\",\n};\n\nconst isCustomService = computed(() => {\n  return services.find((s) => s.name === props.accountData.service).custom;\n});\n\nconst fields = computed(() => {\n  if (isCustomService.value) {\n    return customProviderFields;\n  }\n  return popularProviderFields;\n});\n\nconst error = ref<string | undefined>();\nconst loading = ref(false);\nasync function updateAccount() {\n  error.value = validateInputs(state, isCustomService.value);\n  if (error.value) return;\n  const old = { ...props.accountData };\n  const updatedEmailAccount = { ...state };\n\n  const nameChanged =\n    old.email_account_name !== updatedEmailAccount.email_account_name;\n  delete old.email_account_name;\n  delete updatedEmailAccount.email_account_name;\n\n  const otherFieldsChanged = isDirty.value;\n  const values = updatedEmailAccount;\n\n  if (!nameChanged && !otherFieldsChanged) {\n    createToast({\n      title: \"No changes made\",\n      icon: \"info\",\n      iconClasses: \"text-blue-600\",\n    });\n    return;\n  }\n\n  if (nameChanged) {\n    try {\n      loading.value = true;\n      await callRenameDoc();\n      succesHandler();\n    } catch (err) {\n      errorHandler();\n    }\n  }\n  if (otherFieldsChanged) {\n    try {\n      loading.value = true;\n      await callSetValue(values);\n      succesHandler();\n    } catch (err) {\n      errorHandler();\n    }\n  }\n}\n\nconst isDirty = computed(() => {\n  return (\n    state.email_id !== props.accountData.email_id ||\n    state.api_key !== props.accountData.api_key ||\n    state.api_secret !== props.accountData.api_secret ||\n    state.password !== props.accountData.password ||\n    state.enable_incoming !== props.accountData.enable_incoming ||\n    state.enable_outgoing !== props.accountData.enable_outgoing ||\n    state.default_outgoing !== props.accountData.default_outgoing ||\n    state.default_incoming !== props.accountData.default_incoming ||\n    state.frappe_mail_site !== props.accountData.frappe_mail_site\n  );\n});\n\nasync function callRenameDoc() {\n  const d = await call(\"frappe.client.rename_doc\", {\n    doctype: \"Email Account\",\n    old_name: props.accountData.email_account_name,\n    new_name: state.email_account_name,\n  });\n  return d;\n}\n\nasync function callSetValue(values) {\n  const d = await call(\"frappe.client.set_value\", {\n    doctype: \"Email Account\",\n    name: state.email_account_name,\n    fieldname: values,\n  });\n  return d.name;\n}\n\nfunction succesHandler() {\n  emit(\"update:step\", \"email-list\");\n  createToast({\n    title: \"Email account updated successfully\",\n    icon: \"check\",\n    iconClasses: \"text-green-600\",\n  });\n}\n\nfunction errorHandler() {\n  loading.value = false;\n  error.value = \"Failed to update email account, Invalid credentials\";\n}\n</script>\n","<template>\n  <div class=\"flex-1\">\n    <div v-if=\"step === 'email-add'\" class=\"h-full\">\n      <EmailAdd @update:step=\"updateStep\" />\n    </div>\n    <div v-else-if=\"step === 'email-list'\" class=\"h-full\">\n      <EmailAccountList @update:step=\"updateStep\" />\n    </div>\n    <div v-else-if=\"step === 'email-edit'\" class=\"h-full\">\n      <EmailEdit :account-data=\"accountData\" @update:step=\"updateStep\" />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { Ref, ref } from \"vue\";\nimport EmailAdd from \"./EmailAdd.vue\";\nimport EmailAccountList from \"./EmailAccountList.vue\";\nimport EmailEdit from \"./EmailEdit.vue\";\nimport { EmailAccount, EmailStep } from \"@/types\";\n\nconst step: Ref<EmailStep> = ref(\"email-list\");\nconst accountData: Ref<EmailAccount> = ref(null);\nfunction updateStep(newStep: EmailStep, data?: EmailAccount) {\n  step.value = newStep;\n  accountData.value = data;\n}\n</script>\n","<template>\n  <div class=\"flex flex-col gap-4\">\n    <h1 class=\"text-lg font-semibold\">Customise your Helpdesk</h1>\n\n    <!-- Brand Logo & Favicon -->\n    <div v-for=\"config in brandingConfig\" class=\"flex flex-col gap-2\">\n      <p class=\"text-sm text-gray-600\">{{ config.title }}</p>\n      <div class=\"flex gap-4 items-center\">\n        <Avatar\n          v-if=\"config.image && !config.loading\"\n          size=\"3xl\"\n          :image=\"config.image\"\n        />\n        <FileUploader\n          v-if=\"!config.image\"\n          :fileTypes=\"['image/*']\"\n          @success=\"\n            (file) => {\n              update(file.file_url, config.doctype, config.fieldname);\n            }\n          \"\n        >\n          <template #default=\"{ openFileSelector }\">\n            <Button\n              @click=\"openFileSelector()\"\n              iconLeft=\"upload\"\n              label=\"Upload Image\"\n              :loading=\"config.loading\"\n            />\n          </template>\n        </FileUploader>\n\n        <div v-else>\n          <Button\n            label=\"Remove\"\n            @click=\"update('', config.doctype, config.fieldname)\"\n            iconLeft=\"trash\"\n            :loading=\"config.loading\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { FileUploader, Avatar, createResource } from \"frappe-ui\";\nimport { computed, reactive } from \"vue\";\nimport { useConfigStore } from \"@/stores/config\";\nimport { createToast } from \"@/utils\";\n\nconst config = useConfigStore();\n\nconst websiteSettings = createResource({\n  url: \"frappe.client.get_value\",\n  cache: true,\n  params: {\n    doctype: \"Website Settings\",\n    fieldname: \"favicon\",\n  },\n  onSuccess(data) {\n    state.brandFavicon = data.favicon;\n  },\n  auto: true,\n});\n\nconst state = reactive({\n  brandLogo: config.brandLogo,\n  brandFavicon: websiteSettings.data?.favicon || \"\",\n});\n\nconst loadingState = reactive({\n  logoLoading: false,\n  faviconLoading: false,\n});\n\nconst brandingConfig = computed(() => [\n  {\n    title: \"Brand Logo\",\n    image: state.brandLogo,\n    doctype: \"HD Settings\",\n    fieldname: \"brand_logo\",\n    loading: loadingState.logoLoading,\n  },\n  {\n    title: \"Brand Favicon\",\n    image: state.brandFavicon,\n    doctype: \"Website Settings\",\n    fieldname: \"favicon\",\n    loading: loadingState.faviconLoading,\n  },\n]);\n\nconst settingsResource = createResource({\n  url: \"frappe.client.set_value\",\n  debounce: 1000,\n  onSuccess(data) {\n    if (data.doctype === \"HD Settings\") {\n      handleLogoChange(data.brand_logo);\n    } else {\n      handleFaviconChange(data.favicon);\n    }\n  },\n  onError() {\n    createToast({\n      title: \"Failed to update, please try again\",\n      icon: \"x\",\n      iconClasses: \"text-red-600\",\n    });\n    loadingState.logoLoading = false;\n    loadingState.faviconLoading = false;\n  },\n});\n\nfunction update(file: string, doctype: string, fieldname: string) {\n  settingsResource.submit({\n    doctype: doctype,\n    name: doctype,\n    fieldname: fieldname,\n    value: file,\n  });\n  doctype === \"HD Settings\"\n    ? (loadingState.logoLoading = true)\n    : (loadingState.faviconLoading = true);\n}\n\nfunction handleLogoChange(url: string) {\n  state.brandLogo = url;\n  loadingState.logoLoading = false;\n\n  createToast({\n    title: \"Brand Logo Updated\",\n    icon: \"check\",\n    iconClasses: \"text-green-600\",\n  });\n}\n\nfunction handleFaviconChange(url: string) {\n  state.brandFavicon = url;\n  loadingState.faviconLoading = false;\n\n  createToast({\n    title: \"Favicon Updated\",\n    text: \"Please refresh the page to see the changes\",\n    icon: \"check\",\n    iconClasses: \"text-green-600\",\n  });\n}\n</script>\n\n<style scoped></style>\n","<template>\n  <Dialog v-model=\"show\" :options=\"{ size: '4xl' }\">\n    <template #body>\n      <div class=\"flex\" :style=\"{ height: 'calc(100vh - 8rem)' }\">\n        <div class=\"flex w-52 shrink-0 flex-col bg-gray-50 p-2\">\n          <h1 class=\"px-2 pt-2 text-lg font-semibold\">Settings</h1>\n          <div class=\"mt-3\">\n            <button\n              v-for=\"tab in tabs\"\n              :key=\"tab.label\"\n              class=\"flex h-7 w-full items-center gap-2 rounded px-2 py-1\"\n              :class=\"[\n                activeTab?.label == tab.label\n                  ? 'bg-white shadow-sm'\n                  : 'hover:bg-gray-100',\n              ]\"\n              @click=\"activeTab = tab\"\n            >\n              <component :is=\"tab.icon\" class=\"h-4 w-4 text-gray-700\" />\n              <span class=\"text-base text-gray-800\">\n                {{ tab.label }}\n              </span>\n            </button>\n          </div>\n        </div>\n        <div class=\"flex flex-1 flex-col overflow-scroll p-4\">\n          <component :is=\"activeTab.component\" v-if=\"activeTab\" />\n        </div>\n      </div>\n    </template>\n  </Dialog>\n</template>\n<script setup lang=\"ts\">\nimport { ModelRef, ref } from \"vue\";\nimport { Dialog } from \"frappe-ui\";\nimport LucideMail from \"~icons/lucide/mail\";\nimport ImageUp from \"~icons/lucide/image-up\";\nimport EmailConfig from \"./EmailConfig.vue\";\nimport Branding from \"./Branding.vue\";\nlet tabs = [\n  {\n    label: \"Email Accounts\",\n    icon: LucideMail,\n    component: EmailConfig,\n  },\n  {\n    label: \"Branding\",\n    icon: ImageUp,\n    component: Branding,\n  },\n];\nconst show: ModelRef<boolean> = defineModel();\nconst activeTab = ref(tabs[0]);\n</script>\n","<template>\n  <div\n    class=\"z-0 flex select-none flex-col border-r border-gray-200 bg-gray-50 p-2 text-base duration-300 ease-in-out\"\n    :style=\"{\n      'min-width': width,\n      'max-width': width,\n    }\"\n  >\n    <UserMenu class=\"mb-2 ml-0.5\" :options=\"profileSettings\" />\n    <SidebarLink\n      v-if=\"!isCustomerPortal\"\n      label=\"Search\"\n      class=\"mb-1\"\n      :icon=\"LucideSearch\"\n      :on-click=\"() => openCommandPalette()\"\n      :is-expanded=\"isExpanded\"\n    >\n      <template #right>\n        <span class=\"flex items-center gap-0.5 font-medium text-gray-600\">\n          <component :is=\"device.modifierIcon\" class=\"h-3 w-3\" />\n          <span>K</span>\n        </span>\n      </template>\n    </SidebarLink>\n    <div class=\"mb-4\" v-if=\"!isCustomerPortal\">\n      <div\n        v-if=\"notificationStore.unread\"\n        class=\"absolute z-20 h-1.5 w-1.5 translate-x-6 translate-y-1 rounded-full bg-blue-400 left-1\"\n        theme=\"gray\"\n        variant=\"solid\"\n      />\n      <SidebarLink\n        class=\"relative\"\n        label=\"Notifications\"\n        :icon=\"LucideBell\"\n        :on-click=\"() => notificationStore.toggle()\"\n        :is-expanded=\"isExpanded\"\n      >\n        <template #right>\n          <Badge\n            v-if=\"isExpanded && notificationStore.unread\"\n            :label=\"\n              notificationStore.unread > 9 ? '9+' : notificationStore.unread\n            \"\n            theme=\"gray\"\n            variant=\"subtle\"\n          />\n        </template>\n      </SidebarLink>\n    </div>\n    <div class=\"overflow-y-auto\">\n      <div v-for=\"view in allViews\" :key=\"view.label\">\n        <div\n          v-if=\"!view.hideLabel && !isExpanded && view.views?.length\"\n          class=\"mx-2 my-2 h-1\"\n        />\n        <Section\n          :label=\"view.label\"\n          :hideLabel=\"view.hideLabel\"\n          :opened=\"view.opened\"\n        >\n          <template #header=\"{ opened, hide, toggle }\">\n            <div\n              v-if=\"!hide\"\n              class=\"flex cursor-pointer gap-1.5 px-1 text-base font-medium text-ink-gray-5 transition-all duration-300 ease-in-out\"\n              :class=\"\n                !isExpanded\n                  ? 'ml-0 h-0 overflow-hidden opacity-0'\n                  : 'mt-4 h-7 w-auto opacity-100'\n              \"\n              @click=\"toggle()\"\n            >\n              <FeatherIcon\n                name=\"chevron-right\"\n                class=\"h-4 text-ink-gray-9 transition-all duration-300 ease-in-out\"\n                :class=\"{ 'rotate-90': opened }\"\n              />\n              <span>{{ view.label }}</span>\n            </div>\n          </template>\n          <nav class=\"flex flex-col\">\n            <SidebarLink\n              v-for=\"link in view.views\"\n              :icon=\"link.icon\"\n              :label=\"link.label\"\n              :to=\"link.to\"\n              :key=\"link.label\"\n              :is-expanded=\"isExpanded\"\n              :is-active=\"isActiveTab(link.to)\"\n              class=\"my-0.5 emoji\"\n              :onClick=\"link.onClick\"\n            />\n          </nav>\n        </Section>\n      </div>\n    </div>\n    <div class=\"grow\" />\n    <TrialBanner\n      v-if=\"isFCSite && !isCustomerPortal\"\n      :isSidebarCollapsed=\"!isExpanded\"\n    />\n    <SidebarLink\n      :icon=\"isExpanded ? LucideArrowLeftFromLine : LucideArrowRightFromLine\"\n      :is-active=\"false\"\n      :is-expanded=\"isExpanded\"\n      :label=\"isExpanded ? 'Collapse' : 'Expand'\"\n      :on-click=\"() => (isExpanded = !isExpanded)\"\n    />\n    <SettingsModal v-model=\"showSettingsModal\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, markRaw, ref } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport { TrialBanner } from \"frappe-ui/frappe\";\nimport { storeToRefs } from \"pinia\";\nimport { useAuthStore } from \"@/stores/auth\";\nimport { useNotificationStore } from \"@/stores/notification\";\nimport { useSidebarStore } from \"@/stores/sidebar\";\nimport { CUSTOMER_PORTAL_LANDING } from \"@/router\";\nimport { useDevice } from \"@/composables\";\nimport { SidebarLink } from \"@/components\";\nimport UserMenu from \"@/components/UserMenu.vue\";\nimport LucideArrowLeftFromLine from \"~icons/lucide/arrow-left-from-line\";\nimport LucideArrowRightFromLine from \"~icons/lucide/arrow-right-from-line\";\nimport LucideBell from \"~icons/lucide/bell\";\nimport LucideSearch from \"~icons/lucide/search\";\nimport SettingsModal from \"@/components/Settings/SettingsModal.vue\";\nimport Apps from \"@/components/Apps.vue\";\nimport { isCustomerPortal } from \"@/utils\";\nimport {\n  agentPortalSidebarOptions,\n  customerPortalSidebarOptions,\n} from \"./layoutSettings\";\nimport { Section } from \"@/components\";\nimport { useView, currentView } from \"@/composables/useView\";\nimport { FrappeCloudIcon } from \"@/components/icons\";\nimport { confirmLoginToFrappeCloud } from \"@/composables/fc\";\nimport { useScreenSize } from \"@/composables/screen\";\nconst { isMobileView } = useScreenSize();\n\nconst route = useRoute();\nconst router = useRouter();\nconst authStore = useAuthStore();\nconst notificationStore = useNotificationStore();\nconst { isExpanded, width } = storeToRefs(useSidebarStore());\nconst device = useDevice();\nconst showSettingsModal = ref(false);\n\nconst { pinnedViews, publicViews } = useView();\n\ndeclare global {\n  interface Window {\n    is_fc_site: boolean;\n  }\n}\nconst isFCSite = ref(window.is_fc_site);\n\nconst allViews = computed(() => {\n  const items = isCustomerPortal.value\n    ? customerPortalSidebarOptions\n    : agentPortalSidebarOptions;\n\n  const options = [\n    {\n      label: \"All Views\",\n      hideLabel: true,\n      opened: true,\n      views: items,\n    },\n  ];\n  if (publicViews.value?.length && !isCustomerPortal.value) {\n    options.push({\n      label: \"Public Views\",\n      opened: true,\n      hideLabel: false,\n      views: parseViews(publicViews.value),\n    });\n  }\n  if (pinnedViews.value?.length) {\n    options.push({\n      label: \"Private Views\",\n      opened: true,\n      hideLabel: false,\n      views: parseViews(pinnedViews.value),\n    });\n  }\n  return options;\n});\n\nfunction parseViews(views) {\n  return views.map((view) => {\n    return {\n      label: view.label,\n      icon: view.icon,\n      to: {\n        name: view.route_name,\n        query: { view: view.name },\n      },\n      onClick: () => {\n        currentView.value = {\n          label: view.label,\n          icon: view.icon,\n        };\n      },\n    };\n  });\n}\n\nconst customerPortalDropdown = computed(() => [\n  {\n    label: \"Log out\",\n    icon: \"log-out\",\n    onClick: () => authStore.logout(),\n  },\n]);\n\nconst agentPortalDropdown = computed(() => [\n  {\n    component: markRaw(Apps),\n  },\n  {\n    icon: \"user\",\n    label: \"My Profile\",\n    onClick: () => window.open(`${window.location.origin}/me`),\n  },\n  {\n    label: \"Customer portal\",\n    icon: \"users\",\n    onClick: () => {\n      const path = router.resolve({ name: CUSTOMER_PORTAL_LANDING });\n      window.open(path.href);\n    },\n  },\n  {\n    label: \"Settings\",\n    icon: \"settings\",\n    onClick: () => (showSettingsModal.value = true),\n    condition: () => authStore.isAdmin || authStore.isManager,\n  },\n  {\n    label: \"Log out\",\n    icon: \"log-out\",\n    onClick: () => authStore.logout(),\n  },\n]);\n\nconst profileSettings = computed(() => {\n  return isCustomerPortal.value\n    ? customerPortalDropdown.value\n    : agentPortalDropdown.value;\n});\n\nfunction isActiveTab(to: any) {\n  if (route.query.view) {\n    return route.query.view == to?.query?.view;\n  }\n  return route.name === to;\n}\n\nfunction openCommandPalette() {\n  window.dispatchEvent(\n    new KeyboardEvent(\"keydown\", { key: \"k\", metaKey: true })\n  );\n}\n</script>\n"],"names":["notificationStore","useNotificationStore","sidebarStore","useSidebarStore","target","ref","onClickOutside","handleNotificationClick","n","getRoute","agentStatus","currentUser","agentDocName","onMounted","createResource","user","data","updateAgentStatus","reactive","useStorage","_hoisted_1","_sfc_render","_ctx","_cache","_openBlock","_createElementBlock","_createElementVNode","trialMessage","props","__props","trialEndDays","showBanner","baseEndpoint","siteName","trialTitle","computed","calculateTrialEndDays","trialEndDate","diffTime","upgradePlan","_a","LogoGmail","LogoOutlook","LogoSendgrid","LogoSparkpost","LogoYahoo","LogoYandex","LogoFrappeMail","fixedFields","incomingOutgoingFields","popularProviderFields","customProviderFields","services","emailIcon","validateInputs","state","isCustom","validateEmailWithZod","emit","__emit","selectedService","fields","handleSelect","service","addEmailRes","val","createToast","error","createEmailAccount","badgeTitleColor","emailAccounts","createListResource","accounts","account","_b","_c","_d","info","isCustomService","s","loading","updateAccount","old","updatedEmailAccount","nameChanged","otherFieldsChanged","isDirty","values","callRenameDoc","succesHandler","errorHandler","callSetValue","call","step","accountData","updateStep","newStep","config","useConfigStore","websiteSettings","loadingState","brandingConfig","settingsResource","handleLogoChange","handleFaviconChange","update","file","doctype","fieldname","url","tabs","LucideMail","EmailConfig","ImageUp","Branding","show","_useModel","activeTab","useScreenSize","route","useRoute","router","useRouter","authStore","useAuthStore","isExpanded","width","storeToRefs","device","useDevice","showSettingsModal","pinnedViews","publicViews","useView","isFCSite","allViews","options","isCustomerPortal","customerPortalSidebarOptions","agentPortalSidebarOptions","parseViews","views","view","currentView","customerPortalDropdown","agentPortalDropdown","markRaw","Apps","path","CUSTOMER_PORTAL_LANDING","profileSettings","isActiveTab","to","openCommandPalette"],"mappings":"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","x_google_ignoreList":[2,3,4,5,6]}