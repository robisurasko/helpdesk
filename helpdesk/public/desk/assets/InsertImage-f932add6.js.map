{"version":3,"file":"InsertImage-f932add6.js","sources":["../../../../node_modules/frappe-ui/src/components/TextEditor/InsertImage.vue"],"sourcesContent":["<template>\n  <slot v-bind=\"{ onClick: openDialog }\"></slot>\n  <Dialog\n    :options=\"{ title: 'Add Image' }\"\n    v-model=\"addImageDialog.show\"\n    @after-leave=\"reset\"\n  >\n    <template #body-content>\n      <label\n        class=\"relative cursor-pointer rounded-lg bg-surface-gray-2 py-1 focus-within:bg-surface-gray-3 hover:bg-surface-gray-3\"\n      >\n        <input\n          type=\"file\"\n          class=\"w-full opacity-0\"\n          @change=\"onImageSelect\"\n          accept=\"image/*\"\n        />\n        <span class=\"absolute inset-0 select-none px-2 py-1 text-base\">\n          {{ addImageDialog.file ? 'Select another image' : 'Select an image' }}\n        </span>\n      </label>\n      <img\n        v-if=\"addImageDialog.url\"\n        :src=\"addImageDialog.url\"\n        class=\"mt-2 w-full rounded-lg\"\n      />\n    </template>\n    <template #actions>\n      <div class=\"flex gap-2\">\n        <Button variant=\"solid\" @click=\"addImage(addImageDialog.url)\">\n          Insert Image\n        </Button>\n        <Button @click=\"reset\"> Cancel </Button>\n      </div>\n    </template>\n  </Dialog>\n</template>\n<script>\nimport fileToBase64 from '../../utils/file-to-base64'\nimport Dialog from '../Dialog.vue'\nimport { Button } from '../Button'\n\nexport default {\n  name: 'InsertImage',\n  props: ['editor'],\n  expose: ['openDialog'],\n  data() {\n    return {\n      addImageDialog: { url: '', file: null, show: false },\n    }\n  },\n  components: { Button, Dialog },\n  methods: {\n    openDialog() {\n      this.addImageDialog.show = true\n    },\n    onImageSelect(e) {\n      let file = e.target.files[0]\n      if (!file) {\n        return\n      }\n      this.addImageDialog.file = file\n      fileToBase64(file).then((base64) => {\n        this.addImageDialog.url = base64\n      })\n    },\n    addImage(src) {\n      if (!src) return\n      this.editor.chain().focus().setImage({ src }).run()\n      this.reset()\n    },\n    reset() {\n      this.addImageDialog = this.$options.data().addImageDialog\n    },\n  },\n}\n</script>\n"],"names":["_sfc_main","Button","Dialog","e","file","fileToBase64","base64","src","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_openBlock","_createElementBlock","_Fragment","_renderSlot","_ctx","_normalizeProps","_guardReactiveProps","$options","_createVNode","_component_Dialog","$data","_cache","$event","_createElementVNode","args","_toDisplayString","_createCommentVNode","_component_Button","_withCtx","_createTextVNode"],"mappings":"0JA0CA,MAAKA,EAAU,CACb,KAAM,cACN,MAAO,CAAC,QAAQ,EAChB,OAAQ,CAAC,YAAY,EACrB,MAAO,CACL,MAAO,CACL,eAAgB,CAAE,IAAK,GAAI,KAAM,KAAM,KAAM,EAAO,CACtD,CACD,EACD,WAAY,CAAA,OAAEC,EAAM,OAAEC,CAAQ,EAC9B,QAAS,CACP,YAAa,CACX,KAAK,eAAe,KAAO,EAC5B,EACD,cAAcC,EAAG,CACf,IAAIC,EAAOD,EAAE,OAAO,MAAM,CAAC,EACtBC,IAGL,KAAK,eAAe,KAAOA,EAC3BC,EAAaD,CAAI,EAAE,KAAME,GAAW,CAClC,KAAK,eAAe,IAAMA,EAC3B,EACF,EACD,SAASC,EAAK,CACPA,IACL,KAAK,OAAO,MAAK,EAAG,MAAK,EAAG,SAAS,CAAE,IAAAA,EAAK,EAAE,IAAI,EAClD,KAAK,MAAM,EACZ,EACD,OAAQ,CACN,KAAK,eAAiB,KAAK,SAAS,KAAM,EAAC,cAC5C,CACF,CACH,EAlEQC,EAAA,CAAA,MAAM,kHAAkH,EAQlHC,EAAA,CAAA,MAAM,kDAAkD,EAjBtEC,EAAA,CAAA,KAAA,EA4BWC,EAAA,CAAA,MAAM,YAAY,4DA5B7B,OAAAC,EAAA,EAAAC,EAAAC,EAAA,KAAA,CACEC,EAA8CC,EAAA,OAAA,UADhDC,EAAAC,EAAA,CAAA,QAC2BC,EAAU,UAAA,CAAA,CAAA,CAAA,EACnCC,EAiCSC,EAAA,CAhCN,QAAS,CAAsB,MAAA,WAAA,EAHpC,WAIaC,EAAA,eAAe,KAJ5B,sBAIaC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAF,EAAA,eAAe,KAAIE,GAC3B,aAAaL,EAAK,QAER,iBACT,IAYQ,CAZRM,EAYQ,QAZRjB,EAYQ,CATNiB,EAKE,QAAA,CAJA,KAAK,OACL,MAAM,mBACL,6BAAQN,EAAa,eAAAA,EAAA,cAAA,GAAAO,CAAA,GACtB,OAAO,oBAETD,EAEO,OAFPhB,EACKkB,EAAAL,EAAA,eAAe,KAAI,uBAAA,iBAAA,EAAA,CAAA,IAIlBA,EAAA,eAAe,SADvBT,EAIE,MAAA,CAzBR,IAAA,EAuBS,IAAKS,EAAc,eAAC,IACrB,MAAM,wBAxBd,EAAA,KAAA,EAAAZ,CAAA,GAAAkB,EAAA,GAAA,EAAA,IA2Be,UACT,IAKM,CALNH,EAKM,MALNd,EAKM,CAJJS,EAESS,EAAA,CAFD,QAAQ,QAAS,QAAON,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAL,EAAA,SAASG,EAAA,eAAe,GAAG,KA7BnE,QAAAQ,EA6BsE,IAE9DP,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CA/BRQ,EA6BsE,gBAE9D,KA/BR,EAAA,IAgCQX,EAAwCS,EAAA,CAA/B,QAAOV,EAAK,KAAA,EAAA,CAhC7B,QAAAW,EAgC+B,IAAQP,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAhCvCQ,EAgC+B,UAAQ,KAhCvC,EAAA,sBAAA,EAAA","x_google_ignoreList":[0]}