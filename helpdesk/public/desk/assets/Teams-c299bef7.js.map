{"version":3,"file":"Teams-c299bef7.js","sources":["../../../../desk/src/pages/desk/team/Teams.vue"],"sourcesContent":["<template>\n  <div class=\"flex flex-col\">\n    <LayoutHeader>\n      <template #left-header>\n        <div class=\"text-lg font-medium text-gray-900\">Teams</div>\n      </template>\n      <template #right-header>\n        <Button\n          label=\"New team\"\n          theme=\"gray\"\n          variant=\"solid\"\n          @click=\"showNewDialog = !showNewDialog\"\n          iconLeft=\"plus\"\n        />\n      </template>\n    </LayoutHeader>\n    <ListViewBuilder\n      :options=\"{\n        doctype: 'HD Team',\n        emptyState: {\n          title: emptyMessage,\n        },\n        rowRoute: {\n          name: 'Team',\n          prop: 'teamId',\n        },\n      }\"\n      @row-click=\"handleRowClick\"\n      @empty-state-action=\"showNewDialog = true\"\n    />\n    <Dialog\n      v-model=\"showNewDialog\"\n      :options=\"{\n        title: 'New team',\n      }\"\n    >\n      <template #body-content>\n        <form class=\"space-y-2\" @submit.prevent=\"newTeam.submit\">\n          <FormControl\n            v-model=\"newTeamTitle\"\n            label=\"Title\"\n            placeholder=\"Product experts\"\n            type=\"text\"\n          />\n          <Button\n            :disabled=\"isEmpty(newTeamTitle)\"\n            class=\"w-full\"\n            label=\"Create\"\n            theme=\"gray\"\n            variant=\"solid\"\n          />\n        </form>\n      </template>\n    </Dialog>\n  </div>\n</template>\n<script setup lang=\"ts\">\nimport { ref } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { createResource, usePageMeta, Dialog, FormControl } from \"frappe-ui\";\nimport { isEmpty } from \"lodash\";\nimport LayoutHeader from \"@/components/LayoutHeader.vue\";\nimport ListViewBuilder from \"@/components/ListViewBuilder.vue\";\nimport { AGENT_PORTAL_TEAM_SINGLE } from \"@/router\";\nimport { useError } from \"@/composables/error\";\n\nconst router = useRouter();\nconst showNewDialog = ref(false);\nconst newTeamTitle = ref(null);\nconst emptyMessage = \"No Teams Found\";\n\nconst newTeam = createResource({\n  url: \"frappe.client.insert\",\n  makeParams() {\n    return {\n      doc: {\n        doctype: \"HD Team\",\n        team_name: newTeamTitle.value,\n      },\n    };\n  },\n  validate(params) {\n    if (isEmpty(params.doc.team_name)) return \"Title is required\";\n  },\n  auto: false,\n  onSuccess() {\n    router.replace({\n      name: AGENT_PORTAL_TEAM_SINGLE,\n      params: {\n        teamId: newTeamTitle.value,\n      },\n    });\n  },\n});\n\nusePageMeta(() => {\n  return {\n    title: \"Teams\",\n  };\n});\n\nfunction handleRowClick(rowID: string) {\n  router.push({\n    name: AGENT_PORTAL_TEAM_SINGLE,\n    params: {\n      teamId: rowID,\n    },\n  });\n}\n\n// onClick = {\n//         name: AGENT_PORTAL_TEAM_SINGLE,\n//         params: {\n//           teamId: d.name,\n//         },\n//       };\n</script>\n"],"names":["emptyMessage","router","useRouter","showNewDialog","ref","newTeamTitle","newTeam","createResource","params","isEmpty","AGENT_PORTAL_TEAM_SINGLE","usePageMeta","handleRowClick","rowID"],"mappings":"o1BAqEMA,EAAe,8CAHrB,MAAMC,EAASC,IACTC,EAAgBC,EAAI,EAAK,EACzBC,EAAeD,EAAI,IAAI,EAGvBE,EAAUC,EAAe,CAC7B,IAAK,uBACL,YAAa,CACJ,MAAA,CACL,IAAK,CACH,QAAS,UACT,UAAWF,EAAa,KAC1B,CAAA,CAEJ,EACA,SAASG,EAAQ,CACX,GAAAC,UAAQD,EAAO,IAAI,SAAS,EAAU,MAAA,mBAC5C,EACA,KAAM,GACN,WAAY,CACVP,EAAO,QAAQ,CACb,KAAMS,EACN,OAAQ,CACN,OAAQL,EAAa,KACvB,CAAA,CACD,CACH,CAAA,CACD,EAEDM,EAAY,KACH,CACL,MAAO,OAAA,EAEV,EAED,SAASC,EAAeC,EAAe,CACrCZ,EAAO,KAAK,CACV,KAAMS,EACN,OAAQ,CACN,OAAQG,CACV,CAAA,CACD,CACH"}