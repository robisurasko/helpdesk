import{d as R,B as C,e as d,bi as ae,a8 as te,av as W,ax as se,a4 as le,bj as ne,au as oe,O as X,ab as re,K as H,ar as ie,bn as ue,aq as de,aw as ce,H as U,bE as me,aA as q,bo as pe,o as g,f as B,w as h,l as u,x as T,h as t,s as L,t as M,y as F,g as i,a7 as fe,z as be,b1 as ve,bF as J,k,I as Y,b as ge,Z as ye,b5 as Z,a2 as N,$ as he,Y as Q,J as P}from"./index-adf298f8.js";import{_ as xe}from"./Avatar.vue_vue_type_script_setup_true_lang-53016530.js";import{_ as _e}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-80786aad.js";import{s as we,_ as ke}from"./Dropdown.vue_vue_type_script_setup_true_lang-897a4f2b.js";import{E as Ve,K as Ce}from"./label-3363e8b1.js";import{u as Se}from"./agent-d2b033e5.js";import{u as G}from"./error-df2ee9a0.js";import{I as $e}from"./more-horizontal-20f1eb21.js";import{_ as Ee}from"./plus-f971c398.js";import{_ as Te}from"./Pill-3d31b079.js";import{_ as Ae}from"./LayoutHeader-bce3c99e.js";let ee=Symbol("GroupContext"),De=R({name:"SwitchGroup",props:{as:{type:[Object,String],default:"template"}},setup(r,{slots:x,attrs:a}){let c=C(null),f=Ve({name:"SwitchLabel",props:{htmlFor:d(()=>{var m;return(m=c.value)==null?void 0:m.id}),onClick(m){c.value&&(m.currentTarget.tagName==="LABEL"&&m.preventDefault(),c.value.click(),c.value.focus({preventScroll:!0}))}}}),y=ae({name:"SwitchDescription"});return te(ee,{switchRef:c,labelledby:f,describedby:y}),()=>W({theirProps:r,ourProps:{},slot:{},slots:x,attrs:a,name:"SwitchGroup"})}}),Ie=R({name:"Switch",emits:{"update:modelValue":r=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:null},disabled:{type:Boolean,default:!1},tabIndex:{type:Number,default:0}},inheritAttrs:!1,setup(r,{emit:x,attrs:a,slots:c,expose:f}){var y;let m=(y=r.id)!=null?y:`headlessui-switch-${se()}`,l=le(ee,null),[b,V]=ne(d(()=>r.modelValue),n=>x("update:modelValue",n),d(()=>r.defaultChecked));function S(){V(!b.value)}let p=C(null),v=l===null?p:l.switchRef,A=we(d(()=>({as:r.as,type:a.type})),v);f({el:v,$el:v});function z(n){n.preventDefault(),S()}function O(n){n.key===q.Space?(n.preventDefault(),S()):n.key===q.Enter&&pe(n.currentTarget)}function $(n){n.preventDefault()}let w=d(()=>{var n,_;return(_=(n=oe(v))==null?void 0:n.closest)==null?void 0:_.call(n,"form")});return X(()=>{re([w],()=>{if(!w.value||r.defaultChecked===void 0)return;function n(){V(r.defaultChecked)}return w.value.addEventListener("reset",n),()=>{var _;(_=w.value)==null||_.removeEventListener("reset",n)}},{immediate:!0})}),()=>{let{name:n,value:_,form:K,tabIndex:o,...e}=r,E={checked:b.value},D={id:m,ref:v,role:"switch",type:A.value,tabIndex:o===-1?0:o,"aria-checked":b.value,"aria-labelledby":l==null?void 0:l.labelledby.value,"aria-describedby":l==null?void 0:l.describedby.value,onClick:z,onKeyup:O,onKeypress:$};return H(U,[n!=null&&b.value!=null?H(ie,ue({features:de.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:b.value,form:K,disabled:e.disabled,name:n,value:_})):null,W({ourProps:D,theirProps:{...a,...ce(e,["modelValue","defaultChecked"])},slot:E,attrs:a,slots:c,name:"Switch"})])}}}),Ne=Ce,Be=me;const Le=R({__name:"Switch",props:{size:{default:"sm"},label:{default:""},description:{default:""},disabled:{type:Boolean,default:!1},modelValue:{type:[Boolean,Number,String]}},emits:["change","update:modelValue"],setup(r,{emit:x}){const a=r,c=x,f=d(()=>a.label&&a.description?2:a.label?1:0),y=d(()=>["relative inline-flex flex-shrink-0 cursor-pointer rounded-full border-transparent transition-colors duration-100 ease-in-out items-center","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-outline-gray-3","disabled:cursor-not-allowed disabled:bg-surface-gray-3",a.modelValue?"bg-surface-gray-7 enabled:hover:bg-surface-gray-6 active:bg-surface-gray-5 group-hover:enabled:bg-surface-gray-6":"bg-surface-gray-4 enabled:hover:bg-gray-400 active:bg-gray-500 group-hover:enabled:bg-gray-400",a.size==="md"?"h-5 w-8 border-[3px]":"h-4 w-[26px] border-2"]),m=d(()=>["pointer-events-none inline-block transform rounded-full bg-surface-white shadow ring-0 transition duration-100 ease-in-out",a.size==="md"?"h-3.5 w-3.5":"h-3 w-3",a.size==="md"?a.modelValue?"translate-x-3":"translate-x-0":a.modelValue?"translate-x-2.5":"translate-x-0"]),l=d(()=>["font-medium leading-normal",a.disabled&&f.value===1?"text-ink-gray-4":"text-ink-gray-8",a.size==="md"?"text-lg":"text-base"]),b=d(()=>["max-w-xs text-p-base text-ink-gray-7"]),V=d(()=>{const p=["flex justify-between"];return f.value===1?(p.push("group items-center space-x-3 cursor-pointer rounded focus-visible:bg-surface-gray-2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-outline-gray-3"),p.push(a.disabled?"cursor-not-allowed":"hover:bg-surface-gray-3 active:bg-surface-gray-4"),p.push(a.size==="md"?"px-3 py-1.5":"px-2.5 py-1.5")):f.value===2&&(p.push("items-start"),p.push(a.size==="md"?"space-x-3.5":"space-x-2.5")),p}),S=d(()=>["flex flex-col text-left space-y-0.5"]);return(p,v)=>(g(),B(t(De),{as:"div",tabindex:f.value==1?0:-1,onKeyup:v[1]||(v[1]=fe(be(A=>c("update:modelValue",!p.modelValue),["self"]),["space"])),class:T(V.value)},{default:h(()=>[u("span",{class:T(S.value)},[a.label?(g(),B(t(Ne),{key:0,as:"span",class:T(l.value)},{default:h(()=>[L(M(a.label),1)]),_:1},8,["class"])):F("",!0),a.description?(g(),B(t(Be),{key:1,as:"span",class:T(b.value)},{default:h(()=>[L(M(a.description),1)]),_:1},8,["class"])):F("",!0)],2),i(t(Ie),{disabled:a.disabled,"model-value":p.modelValue,class:T(y.value),"onUpdate:modelValue":v[0]||(v[0]=A=>c("update:modelValue",!p.modelValue))},{default:h(()=>[u("span",{"aria-hidden":"true",class:T(m.value)},null,2)]),_:1},8,["disabled","model-value","class"])]),_:1},8,["tabindex","class"]))}}),Me={class:"flex flex-col"},Re={class:"flex items-center gap-2"},ze={class:"m-2 my-4"},Oe={class:"container"},Ke={class:"space-y-4"},Pe={key:0,class:"flex flex-wrap gap-2"},Ge={key:1,class:"text-base text-gray-900"},Ue={class:"space-y-2"},je={class:"space-y-4"},He={key:0},qe={class:"text-base text-gray-600"},Fe={key:1,class:"flex flex-col gap-4"},Je={class:"flex flex-col gap-2"},Ye={class:"flex items-center gap-2"},Ze={class:"text-base"},ia=R({__name:"TeamSingle",props:{teamId:{type:String,required:!0}},setup(r){const x=r,a=ge(),c=Se(),f=C(!1),y=C(!1),m=C(!1),l=ve({doctype:"HD Team",name:x.teamId,auto:!0,setValue:{onError:G({title:"Error updating team"})},delete:{onSuccess(){a.replace({name:J})},onError:G({title:"Error deleting team"})}}),b=d({get(){var o;return(o=l.doc)==null?void 0:o.name},set(o){l.doc.name=o}}),V=d({get(){var o;return!!((o=l.doc)!=null&&o.ignore_restrictions)},set(o){l.doc&&l.setValue.submit({ignore_restrictions:o})}}),S=[{label:"Rename",icon:"edit-3",onClick:()=>f.value=!f.value},{label:"Delete",icon:"trash-2",onClick:()=>y.value=!y.value}],p={title:"Rename team"},v={title:"Add member"},A={title:"Delete team",message:`Are you sure you want to delete ${x.teamId}? This action cannot be reversed!`,actions:[{label:"Confirm",theme:"red",variant:"solid",onClick:()=>l.delete.submit()}]};function z(){ye({url:"frappe.client.rename_doc",makeParams(){return{doctype:"HD Team",old_name:x.teamId,new_name:b.value}},validate(e){if(!e.new_name)return"New title is required";if(e.new_name===e.old_name)return"New and old title cannot be same"},onSuccess(){a.replace({name:Z,params:{teamId:b.value}})},onError:G({title:"Error renaming team"})}).submit()}function O(o){const e=l.doc.users.concat([{user:o}]);l.setValue.submit({users:e})}const $=C(""),w=C([]),n=d(()=>w.value.length||$.value.length?w.value:c.agents.data);function _(){const o=c.searchAgents($.value);w.value=o}X(()=>{c.agents.reload()});function K(o){const e=l.doc.users.filter(E=>E.user!==o);l.setValue.submit({users:e})}return(o,e)=>{var E,D;return g(),k("span",null,[u("div",Me,[i(Ae,null,{"left-header":h(()=>[i(t(_e),{class:"-ml-0.5",items:[{label:"Teams",route:{name:t(J)}},{label:r.teamId,route:{name:t(Z)}}]},null,8,["items"])]),"right-header":h(()=>[u("div",Re,[i(t(ke),{options:S},{default:h(()=>[i(t(N),{variant:"ghost"},{icon:h(()=>[i(t($e),{class:"h-4 w-4"})]),_:1})]),_:1}),i(t(N),{label:"Add member",theme:"gray",variant:"solid",onClick:e[0]||(e[0]=s=>m.value=!m.value)},{prefix:h(()=>[i(t(Ee),{class:"h-4 w-4"})]),_:1})])]),_:1}),u("div",ze,[u("div",Oe,[u("div",Ke,[e[10]||(e[10]=u("div",{class:"text-lg font-medium"},"Members",-1)),t(he.isEmpty)((E=t(l).doc)==null?void 0:E.users)?(g(),k("div",Ge," No members found in team: "+M(r.teamId),1)):(g(),k("div",Pe,[(g(!0),k(U,null,Y((D=t(l).doc)==null?void 0:D.users,s=>(g(),B(Te,{key:s.user,label:s.user,disabled:t(l).loading,onClick:e[1]||(e[1]=I=>K(I))},null,8,["label","disabled"]))),128))])),i(t(Le),{modelValue:V.value,"onUpdate:modelValue":e[2]||(e[2]=s=>V.value=s),size:"md",label:"Bypass restrictions",description:"Members of this team will be able to bypass any team-wise restriction",class:"rounded border p-4"},null,8,["modelValue"])])])])]),i(t(P),{modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=s=>f.value=s),options:p},{"body-content":h(()=>[u("div",Ue,[i(t(Q),{modelValue:b.value,"onUpdate:modelValue":e[3]||(e[3]=s=>b.value=s),label:"Title",placeholder:"Product Experts"},null,8,["modelValue"]),i(t(N),{label:"Confirm",theme:"gray",variant:"solid",class:"w-full",disabled:b.value===r.teamId,onClick:z},null,8,["disabled"])])]),_:1},8,["modelValue"]),i(t(P),{modelValue:y.value,"onUpdate:modelValue":e[5]||(e[5]=s=>y.value=s),options:A},null,8,["modelValue"]),i(t(P),{modelValue:m.value,"onUpdate:modelValue":e[9]||(e[9]=s=>m.value=s),options:v},{"body-content":h(()=>[u("div",je,[i(t(Q),{type:"text",modelValue:$.value,"onUpdate:modelValue":e[6]||(e[6]=s=>$.value=s),placeholder:"Search agents",onInput:e[7]||(e[7]=s=>_())},null,8,["modelValue"]),n.value.length===0?(g(),k("div",He,[u("p",qe,[e[11]||(e[11]=L(" No agents found, please add ")),u("span",{class:"cursor-pointer underline",onClick:e[8]||(e[8]=s=>t(a).push("/agents"))},"agents"),e[12]||(e[12]=L(" in the system. "))])])):(g(),k("div",Fe,[u("div",Je,[(g(!0),k(U,null,Y(n.value,s=>{var I;return g(),k("div",{key:s.name,class:"flex items-center justify-between"},[u("div",Ye,[i(t(xe),{label:s.agent_name,image:s.user_image},null,8,["label","image"]),u("div",Ze,M(s.agent_name),1)]),i(t(N),{disabled:!!((I=t(l).doc)!=null&&I.users.find(j=>j.user===s.user)),label:"Add",theme:"gray",variant:"outline",onClick:j=>O(s.user)},null,8,["disabled","onClick"])])}),128))])]))])]),_:1},8,["modelValue"])])}}});export{ia as default};
//# sourceMappingURL=TeamSingle-87e5cffe.js.map
