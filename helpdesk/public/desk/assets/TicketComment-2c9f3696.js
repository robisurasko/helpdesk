import{d as I,aX as w,u as N,K as m,e as S,Z as f,V as $,o as d,k as B,l as r,g as i,aa as D,h as e,w as u,t as V,f as _,y as g,N as z,L as h,a2 as L}from"./index-14da1b96.js";import{_ as M}from"./Dropdown.vue_vue_type_script_setup_true_lang-608b497a.js";import{I as c}from"./useView-c256aa2e.js";import{d as v}from"./dayjs-1848fb71.js";import"./more-horizontal-4b0bead1.js";import{_ as j}from"./UserAvatar.vue_vue_type_script_setup_true_lang-c18f002f.js";import"./knowledgeBase-b86a51f6.js";import"./Avatar.vue_vue_type_script_setup_true_lang-31924be6.js";function R(n){return{all:n=n||new Map,on:function(s,a){var t=n.get(s);t?t.push(a):n.set(s,[a])},off:function(s,a){var t=n.get(s);t&&(a?t.splice(t.indexOf(a)>>>0,1):n.set(s,[]))},emit:function(s,a){var t=n.get(s);t&&t.slice().map(function(o){o(a)}),(t=n.get("*"))&&t.slice().map(function(o){o(s,a)})}}}const k=R(),U={class:"my-4 rounded border bg-cyan-50 p-4"},A={class:"mb-4 flex items-center justify-between"},E={class:"flex items-center gap-0.5 text-base"},K={class:"text-gray-600"},O={class:"flex items-center gap-1"},X=["innerHTML"],te=I({__name:"TicketComment",props:{content:{},date:{},isPinned:{},name:{},user:{}},setup(n){const s=n,{content:a,name:t,isPinned:o,user:p}=w(s),y=N(),x=m(c,{icon:"lucide:trash-2"}),b=m(c,{icon:"lucide:pin"}),C=m(c,{icon:"lucide:pin-off"}),P=S(()=>[{label:o.value?"Unpin":"Pin",icon:o.value?C:b,onClick:()=>T.submit()},{label:"Delete",icon:x,onClick:()=>H.submit(),isHidden:p.value.email!==y.userId}].filter(l=>!l.isHidden)),T=f({url:"frappe.client.set_value",makeParams:()=>({doctype:"HD Ticket Comment",name:t.value,fieldname:"is_pinned",value:!o.value}),onSuccess:()=>k.emit("update:ticket")}),H=f({url:"frappe.client.delete",makeParams:()=>({doctype:"HD Ticket Comment",name:t.value}),onSuccess(){k.emit("update:ticket"),$({title:"Comment deleted",icon:"check",iconClasses:"text-green-500"})}});return(l,Z)=>(d(),B("div",U,[r("div",A,[r("div",E,[i(e(j),D(e(p),{size:"lg",expand:"",strong:""}),null,16),i(e(c),{icon:"lucide:dot",class:"text-gray-500"}),i(e(z),{text:e(v)(l.date).long()},{default:u(()=>[r("div",K,V(e(v).tz(l.date).fromNow()),1)]),_:1},8,["text"]),e(o)?(d(),_(e(c),{key:0,icon:"lucide:dot",class:"text-gray-500"})):g("",!0),e(o)?(d(),_(e(h),{key:1,label:"Pinned",theme:"blue",variant:"outline"})):g("",!0)]),r("div",O,[i(e(h),{label:"Comment",theme:"green",variant:"outline"}),i(e(M),{options:P.value},{default:u(()=>[i(e(L),{theme:"gray",variant:"ghost"},{icon:u(()=>[i(e(c),{icon:"lucide:more-horizontal"})]),_:1})]),_:1},8,["options"])])]),r("span",{class:"prose-f",innerHTML:e(a)},null,8,X)]))}});export{te as default};
//# sourceMappingURL=TicketComment-2c9f3696.js.map
