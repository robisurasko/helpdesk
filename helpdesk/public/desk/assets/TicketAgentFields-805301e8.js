import{d as M,B as $,K as z,aq as dt,ar as Ze,e as S,as as me,a8 as Fe,O as X,ab as Ie,at as mt,au as N,av as ye,aw as ft,H as R,ax as Ge,a6 as We,a4 as ie,ay as Ue,az as we,aA as J,aB as ke,aC as pt,aD as vt,aE as re,aF as Y,aG as de,o as r,f as I,w as y,k as _,I as U,h as e,E as pe,aa as _e,l as d,x as G,v as De,y as A,s as ve,t as L,m as H,n as ee,g as v,F as He,G as ze,j as ae,ap as Je,aH as Ye,a9 as xe,Z as le,r as F,aI as Ee,z as W,ag as Qe,ah as Pe,aJ as Re,ai as Se,V as ce,aK as xt,a7 as ue,P as gt,aL as bt,a0 as Ae,aM as yt,aN as _t,a1 as je,aO as ht,J as Xe,c as Ct,aP as ge,aQ as se,aR as oe,u as kt,an as qe,ae as wt,R as $t,N as be,aS as Tt,a3 as fe,L as It,Y as Ke,aT as St}from"./index-04936222.js";import{s as Vt,_ as et}from"./Dropdown.vue_vue_type_script_setup_true_lang-7c445c44.js";import{a as tt,T as Bt,L as lt}from"./useView-0740861b.js";import"./more-horizontal-1bcf38b1.js";import{d as O}from"./dayjs-5f17143d.js";import{F as at}from"./FileUploader-38365a62.js";import{_ as Ve}from"./AttachmentItem.vue_vue_type_script_setup_true_lang-9f4d9f38.js";import{E as he}from"./TicketFeedback.vue_vue_type_script_setup_true_lang-3d86481f.js";import{_ as Me}from"./UserAvatar.vue_vue_type_script_setup_true_lang-5247534f.js";import{u as Et}from"./knowledgeBase-3a84fed8.js";import{u as Lt}from"./agent-5f280df1.js";import{_ as $e}from"./Autocomplete-3be040f4.js";import{_ as Oe}from"./Avatar.vue_vue_type_script_setup_true_lang-d3cc4d2c.js";import{_ as Ft}from"./EmailContent-05c09618.js";import{_ as At}from"./ticketStatus-0753d42d.js";import{a as jt}from"./FadedScrollableDiv.vue_vue_type_script_setup_true_lang-5f800415.js";import{_ as Mt}from"./Link-22744168.js";let Dt=M({props:{onFocus:{type:Function,required:!0}},setup(t){let n=$(!0);return()=>n.value?z(Ze,{as:"button",type:"button",features:dt.Focusable,onFocus(g){g.preventDefault();let s,c=50;function i(){var a;if(c--<=0){s&&cancelAnimationFrame(s);return}if((a=t.onFocus)!=null&&a.call(t)){n.value=!1,cancelAnimationFrame(s);return}s=requestAnimationFrame(i)}s=requestAnimationFrame(i)}}):null}});var Pt=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(Pt||{}),Rt=(t=>(t[t.Less=-1]="Less",t[t.Equal=0]="Equal",t[t.Greater=1]="Greater",t))(Rt||{});let nt=Symbol("TabsContext");function Ce(t){let n=ie(nt,null);if(n===null){let g=new Error(`<${t} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(g,Ce),g}return n}let Ne=Symbol("TabsSSRContext"),qt=M({name:"TabGroup",emits:{change:t=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:n,attrs:g,emit:s}){var c;let i=$((c=t.selectedIndex)!=null?c:t.defaultIndex),a=$([]),l=$([]),u=S(()=>t.selectedIndex!==null),x=S(()=>u.value?t.selectedIndex:i.value);function f(p){var h;let b=me(m.tabs.value,N),o=me(m.panels.value,N),w=b.filter(T=>{var B;return!((B=N(T))!=null&&B.hasAttribute("disabled"))});if(p<0||p>b.length-1){let T=we(i.value===null?0:Math.sign(p-i.value),{[-1]:()=>1,0:()=>we(Math.sign(p),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),B=we(T,{0:()=>b.indexOf(w[0]),1:()=>b.indexOf(w[w.length-1])});B!==-1&&(i.value=B),m.tabs.value=b,m.panels.value=o}else{let T=b.slice(0,p),B=[...b.slice(p),...T].find(j=>w.includes(j));if(!B)return;let D=(h=b.indexOf(B))!=null?h:m.selectedIndex.value;D===-1&&(D=m.selectedIndex.value),i.value=D,m.tabs.value=b,m.panels.value=o}}let m={selectedIndex:S(()=>{var p,h;return(h=(p=i.value)!=null?p:t.defaultIndex)!=null?h:null}),orientation:S(()=>t.vertical?"vertical":"horizontal"),activation:S(()=>t.manual?"manual":"auto"),tabs:a,panels:l,setSelectedIndex(p){x.value!==p&&s("change",p),u.value||f(p)},registerTab(p){var h;if(a.value.includes(p))return;let b=a.value[i.value];if(a.value.push(p),a.value=me(a.value,N),!u.value){let o=(h=a.value.indexOf(b))!=null?h:i.value;o!==-1&&(i.value=o)}},unregisterTab(p){let h=a.value.indexOf(p);h!==-1&&a.value.splice(h,1)},registerPanel(p){l.value.includes(p)||(l.value.push(p),l.value=me(l.value,N))},unregisterPanel(p){let h=l.value.indexOf(p);h!==-1&&l.value.splice(h,1)}};Fe(nt,m);let k=$({tabs:[],panels:[]}),V=$(!1);X(()=>{V.value=!0}),Fe(Ne,S(()=>V.value?null:k.value));let C=S(()=>t.selectedIndex);return X(()=>{Ie([C],()=>{var p;return f((p=t.selectedIndex)!=null?p:t.defaultIndex)},{immediate:!0})}),mt(()=>{if(!u.value||x.value==null||m.tabs.value.length<=0)return;let p=me(m.tabs.value,N);p.some((h,b)=>N(m.tabs.value[b])!==N(h))&&m.setSelectedIndex(p.findIndex(h=>N(h)===N(m.tabs.value[x.value])))}),()=>{let p={selectedIndex:i.value};return z(R,[a.value.length<=0&&z(Dt,{onFocus:()=>{for(let h of a.value){let b=N(h);if((b==null?void 0:b.tabIndex)===0)return b.focus(),!0}return!1}}),ye({theirProps:{...g,...ft(t,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:p,slots:n,attrs:g,name:"TabGroup"})])}}}),Ot=M({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(t,{attrs:n,slots:g}){let s=Ce("TabList");return()=>{let c={selectedIndex:s.selectedIndex.value},i={role:"tablist","aria-orientation":s.orientation.value};return ye({ourProps:i,theirProps:t,slot:c,attrs:n,slots:g,name:"TabList"})}}}),Nt=M({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(t,{attrs:n,slots:g,expose:s}){var c;let i=(c=t.id)!=null?c:`headlessui-tabs-tab-${Ge()}`,a=Ce("Tab"),l=$(null);s({el:l,$el:l}),X(()=>a.registerTab(l)),We(()=>a.unregisterTab(l));let u=ie(Ne),x=S(()=>{if(u.value){let o=u.value.tabs.indexOf(i);return o===-1?u.value.tabs.push(i)-1:o}return-1}),f=S(()=>{let o=a.tabs.value.indexOf(l);return o===-1?x.value:o}),m=S(()=>f.value===a.selectedIndex.value);function k(o){var w;let T=o();if(T===ke.Success&&a.activation.value==="auto"){let B=(w=vt(l))==null?void 0:w.activeElement,D=a.tabs.value.findIndex(j=>N(j)===B);D!==-1&&a.setSelectedIndex(D)}return T}function V(o){let w=a.tabs.value.map(T=>N(T)).filter(Boolean);if(o.key===J.Space||o.key===J.Enter){o.preventDefault(),o.stopPropagation(),a.setSelectedIndex(f.value);return}switch(o.key){case J.Home:case J.PageUp:return o.preventDefault(),o.stopPropagation(),k(()=>re(w,Y.First));case J.End:case J.PageDown:return o.preventDefault(),o.stopPropagation(),k(()=>re(w,Y.Last))}if(k(()=>we(a.orientation.value,{vertical(){return o.key===J.ArrowUp?re(w,Y.Previous|Y.WrapAround):o.key===J.ArrowDown?re(w,Y.Next|Y.WrapAround):ke.Error},horizontal(){return o.key===J.ArrowLeft?re(w,Y.Previous|Y.WrapAround):o.key===J.ArrowRight?re(w,Y.Next|Y.WrapAround):ke.Error}}))===ke.Success)return o.preventDefault()}let C=$(!1);function p(){var o;C.value||(C.value=!0,!t.disabled&&((o=N(l))==null||o.focus({preventScroll:!0}),a.setSelectedIndex(f.value),pt(()=>{C.value=!1})))}function h(o){o.preventDefault()}let b=Vt(S(()=>({as:t.as,type:n.type})),l);return()=>{var o,w;let T={selected:m.value,disabled:(o=t.disabled)!=null?o:!1},{...B}=t,D={ref:l,onKeydown:V,onMousedown:h,onClick:p,id:i,role:"tab",type:b.value,"aria-controls":(w=N(a.panels.value[f.value]))==null?void 0:w.id,"aria-selected":m.value,tabIndex:m.value?0:-1,disabled:t.disabled?!0:void 0};return ye({ourProps:D,theirProps:B,slot:T,attrs:n,slots:g,name:"Tab"})}}}),Ut=M({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:n,attrs:g}){let s=Ce("TabPanels");return()=>{let c={selectedIndex:s.selectedIndex.value};return ye({theirProps:t,ourProps:{},slot:c,attrs:g,slots:n,name:"TabPanels"})}}}),Ht=M({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(t,{attrs:n,slots:g,expose:s}){var c;let i=(c=t.id)!=null?c:`headlessui-tabs-panel-${Ge()}`,a=Ce("TabPanel"),l=$(null);s({el:l,$el:l}),X(()=>a.registerPanel(l)),We(()=>a.unregisterPanel(l));let u=ie(Ne),x=S(()=>{if(u.value){let k=u.value.panels.indexOf(i);return k===-1?u.value.panels.push(i)-1:k}return-1}),f=S(()=>{let k=a.panels.value.indexOf(l);return k===-1?x.value:k}),m=S(()=>f.value===a.selectedIndex.value);return()=>{var k;let V={selected:m.value},{tabIndex:C,...p}=t,h={ref:l,id:i,role:"tabpanel","aria-labelledby":(k=N(a.tabs.value[f.value]))==null?void 0:k.id,tabIndex:m.value?C:-1};return!m.value&&t.unmount&&!t.static?z(Ze,{as:"span","aria-hidden":!0,...h}):ye({ourProps:h,theirProps:p,slot:V,attrs:n,slots:g,features:Ue.Static|Ue.RenderStrategy,visible:m.value,name:"TabPanel"})}}});const zt={__name:"TabList",setup(t){const n=ie("tab"),g=$([]),s=$(null),c=S(()=>{var l;return(l=n.value.tabs.value)==null?void 0:l.length}),i=$("");function a(l){l>=c.value&&(l=c.value-1);const u=g.value[l].el;n.value.vertical.value?(s.value.style.height=`${u.offsetHeight}px`,s.value.style.top=`${u.offsetTop}px`):(s.value.style.width=`${u.offsetWidth}px`,s.value.style.left=`${u.offsetLeft}px`)}return Ie(()=>n.value.tabIndex.value,l=>{l>=c.value&&(n.value.tabIndex.value=c.value-1),i.value="transition-all duration-300 ease-in-out",de(()=>a(l))}),X(()=>{de(()=>a(n.value.tabIndex.value)),setTimeout(()=>a(n.value.tabIndex.value),100)}),(l,u)=>(r(),I(e(Ot),{class:G(["relative flex",e(n).vertical?"flex-col border-r overflow-y-auto":"gap-7.5 border-b overflow-x-auto items-center px-5"])},{default:y(()=>[(r(!0),_(R,null,U(e(n).tabs,(x,f)=>(r(),I(e(Nt),{ref_for:!0,ref_key:"tabRef",ref:g,as:"template",key:f,class:"focus:outline-none focus:transition-none"},{default:y(({selected:m})=>[pe(l.$slots,"default",_e({ref_for:!0},{tab:x,selected:m}),()=>[d("button",{class:G(["flex items-center gap-1.5 text-base text-ink-gray-5 duration-300 ease-in-out hover:text-ink-gray-9",[m?"text-ink-gray-9":"",e(n).vertical?"py-2.5 px-4 border-r border-transparent hover:border-outline-gray-3":"py-3 border-b border-transparent hover:border-outline-gray-3"]])},[x.icon?(r(),I(De(x.icon),{key:0,class:"size-4"})):A("",!0),ve(" "+L(x.label),1)],2)])]),_:2},1024))),128)),d("div",{ref_key:"indicator",ref:s,class:G(["tab-indicator absolute bg-surface-gray-7",[e(n).vertical?"right-0 w-px":"bottom-0 h-px",i.value]])},null,2)]),_:3},8,["class"]))}},Kt={__name:"TabPanel",setup(t){const n=ie("tab");return(g,s)=>(r(),I(e(Ut),{class:"flex flex-1 overflow-hidden"},{default:y(()=>[(r(!0),_(R,null,U(e(n).tabs,(c,i)=>(r(),I(e(Ht),{class:"flex flex-1 flex-col overflow-y-auto focus:outline-none",key:i},{default:y(()=>[pe(g.$slots,"default",_e({ref_for:!0},{tab:c}))]),_:2},1024))),128))]),_:3}))}},Tn={__name:"Tabs",props:H({as:{type:String,default:"template"},tabs:{type:Array,required:!0},vertical:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const n=t,g=ee(t,"modelValue");return Fe("tab",S(()=>({tabIndex:g,tabs:n.tabs,vertical:n.vertical}))),(s,c)=>(r(),I(e(qt),_e(t.as!=="template"?{as:t.as,class:["flex flex-1 overflow-hidden",t.vertical?"":"flex-col "]}:{},{defaultIndex:g.value,selectedIndex:g.value,onChange:c[0]||(c[0]=i=>g.value=i)}),{default:y(()=>[pe(s.$slots,"default",{},()=>[v(zt,null,{default:y(({tab:i,selected:a})=>[pe(s.$slots,"tab-item",He(ze({tab:i,selected:a})))]),_:3}),v(Kt,null,{default:y(({tab:i})=>[pe(s.$slots,"tab-panel",He(ze({tab:i})))]),_:3})])]),_:3},16,["defaultIndex","selectedIndex"]))}},Zt={},Gt={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Wt(t,n){return r(),_("svg",Gt,n[0]||(n[0]=[d("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.29021 2.64272C6.68375 0.785763 9.33429 0.785757 9.72783 2.64272L10.3657 5.65238L13.3753 6.29021C15.2323 6.68375 15.2323 9.33429 13.3753 9.72783L10.3657 10.3657L9.72783 13.3753C9.33429 15.2323 6.68375 15.2323 6.29021 13.3753L5.65238 10.3657L2.64272 9.72783C0.785763 9.33429 0.785757 6.68375 2.64272 6.29021L5.65238 5.65238L6.29021 2.64272ZM8.74956 2.85004C8.58 2.04999 7.43804 2.04998 7.26848 2.85004L6.56324 6.17777L6.49584 6.49583L6.17777 6.56324L2.85004 7.26848C2.04999 7.43804 2.04998 8.58 2.85004 8.74956L6.17777 9.4548L6.49584 9.5222L6.56324 9.84027L7.26848 13.168C7.43804 13.9681 8.58 13.9681 8.74956 13.168L9.4548 9.84027L9.5222 9.5222L9.84027 9.4548L13.168 8.74956C13.9681 8.58 13.9681 7.43804 13.168 7.26848L9.84027 6.56324L9.5222 6.49583L9.4548 6.17777L8.74956 2.85004Z",fill:"currentColor"},null,-1)]))}const Jt=ae(Zt,[["render",Wt]]),Yt={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Qt=["r"],Xt={__name:"DotIcon",props:{radius:{type:Number,default:3.5}},setup(t){return(n,g)=>(r(),_("svg",Yt,[d("circle",{cx:"8",cy:"8",r:t.radius,fill:"currentColor"},null,8,Qt)]))}},el={},tl={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ll(t,n){return r(),_("svg",tl,n[0]||(n[0]=[d("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 2.5C4.2911 2.5 1.5 4.84419 1.5 7.5C1.5 9.14452 2.54729 10.6518 4.25112 11.5816C4.50048 11.7177 4.758 12.0041 4.7326 12.4082C4.71107 12.7508 4.61659 13.2533 4.47175 13.6657C4.44071 13.7541 4.40789 13.8389 4.37434 13.9195C4.62005 13.8524 4.91964 13.7411 5.26646 13.5579C5.48882 13.4404 5.69385 13.2901 5.9102 13.1207C5.95058 13.089 5.9922 13.056 6.03481 13.0222C6.20816 12.8848 6.39803 12.7342 6.58835 12.6102C6.7875 12.4803 7.01146 12.4447 7.20831 12.4631C7.46767 12.4875 7.73186 12.5 8 12.5C11.7089 12.5 14.5 10.1558 14.5 7.5C14.5 4.84419 11.7089 2.5 8 2.5ZM0.5 7.5C0.5 4.08068 3.97691 1.5 8 1.5C12.0231 1.5 15.5 4.08068 15.5 7.5C15.5 10.9193 12.0231 13.5 8 13.5C7.70158 13.5 7.40709 13.4861 7.11751 13.459C6.97583 13.5528 6.83777 13.6621 6.67569 13.7905C6.62832 13.828 6.5789 13.8671 6.52674 13.908C6.30071 14.085 6.03818 14.2812 5.73354 14.4421C4.73389 14.9702 3.9948 15.0302 3.62977 15.0147C3.39759 15.0048 3.20936 14.8646 3.12194 14.6754C3.03801 14.4938 3.05143 14.2816 3.15736 14.1099C3.24804 13.963 3.40655 13.6808 3.52825 13.3343C3.62961 13.0457 3.70134 12.6878 3.72712 12.4347C1.81521 11.3748 0.5 9.58517 0.5 7.5Z",fill:"currentColor"},null,-1)]))}const Te=ae(el,[["render",ll]]),al={},nl={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function sl(t,n){return r(),_("svg",nl,n[0]||(n[0]=[d("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.5684 2.50774C11.5403 1.49742 9.95026 1.49742 8.92215 2.50774L3.62404 7.71417C2.12532 9.18695 2.12532 11.669 3.62404 13.1418C5.12762 14.6194 7.66861 14.6194 9.17219 13.1418L12.1609 10.2049C12.3578 10.0113 12.6744 10.0141 12.8679 10.211C13.0615 10.408 13.0587 10.7246 12.8618 10.9181L9.8731 13.8551C7.98045 15.715 4.81578 15.715 2.92313 13.8551C1.02562 11.9904 1.02562 8.86558 2.92313 7.00091L8.22124 1.79449C9.63842 0.401838 11.8521 0.401838 13.2693 1.79449C14.6914 3.19191 14.6914 5.38225 13.2693 6.77968L13.2668 6.78213L13.2668 6.78212L8.37876 11.5189C8.37834 11.5193 8.37793 11.5197 8.37752 11.5201C7.51767 12.3638 6.11144 12.3939 5.29119 11.5097C4.43611 10.6596 4.40778 9.26893 5.30922 8.46081L7.33823 6.46692C7.53518 6.27337 7.85175 6.27613 8.04531 6.47309C8.23886 6.67005 8.23609 6.98662 8.03913 7.18017L6.0014 9.18264L5.99203 9.19185L5.98219 9.20055C5.5391 9.59243 5.5104 10.3231 6.0014 10.8056L6.01078 10.8148L6.01967 10.8245C6.42299 11.2649 7.18224 11.2926 7.67785 10.8056L7.68034 10.8032L7.68035 10.8032L12.5684 6.06643C12.5688 6.06604 12.5692 6.06565 12.5696 6.06526C13.5917 5.05969 13.5913 3.51289 12.5684 2.50774Z",fill:"currentColor"},null,-1)]))}const st=ae(al,[["render",sl]]),ol={},il={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function rl(t,n){return r(),_("svg",il,n[0]||(n[0]=[d("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.64645 3.14645C5.84171 2.95118 6.15829 2.95118 6.35355 3.14645C6.54882 3.34171 6.54882 3.65829 6.35355 3.85355L3.20711 7H10C12.4853 7 14.5 9.01472 14.5 11.5V12C14.5 12.2761 14.2761 12.5 14 12.5C13.7239 12.5 13.5 12.2761 13.5 12V11.5C13.5 9.567 11.933 8 10 8H3.20711L6.35355 11.1464C6.54882 11.3417 6.54882 11.6583 6.35355 11.8536C6.15829 12.0488 5.84171 12.0488 5.64645 11.8536L1.64645 7.85355C1.45118 7.65829 1.45118 7.34171 1.64645 7.14645L5.64645 3.14645Z",fill:"currentColor"},null,-1)]))}const ul=ae(ol,[["render",rl]]),cl={},dl={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ml(t,n){return r(),_("svg",dl,n[0]||(n[0]=[d("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.85355 3.14645C5.65829 2.95118 5.34171 2.95118 5.14645 3.14645L1.14645 7.14645C0.951184 7.34171 0.951184 7.65829 1.14645 7.85355L5.14645 11.8536C5.34171 12.0488 5.65829 12.0488 5.85355 11.8536C6.04882 11.6583 6.04882 11.3417 5.85355 11.1464L2.20711 7.5L5.85355 3.85355C6.04882 3.65829 6.04882 3.34171 5.85355 3.14645ZM10 8C11.933 8 13.5 9.567 13.5 11.5V12C13.5 12.2761 13.7239 12.5 14 12.5C14.2761 12.5 14.5 12.2761 14.5 12V11.5C14.5 9.01472 12.4853 7 10 7H6.6728L9.81924 3.85355C10.0145 3.65829 10.0145 3.34171 9.81924 3.14645C9.62398 2.95118 9.3074 2.95118 9.11214 3.14645L5.11214 7.14645C4.91688 7.34171 4.91688 7.65829 5.11214 7.85355L9.11214 11.8536C9.3074 12.0488 9.62398 12.0488 9.81924 11.8536C10.0145 11.6583 10.0145 11.3417 9.81924 11.1464L6.6728 8H10Z",fill:"currentColor"},null,-1)]))}const fl=ae(cl,[["render",ml]]),pl={},vl={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-forward"};function xl(t,n){return r(),_("svg",vl,n[0]||(n[0]=[d("polyline",{points:"15 17 20 12 15 7"},null,-1),d("path",{d:"M4 18v-2a4 4 0 0 1 4-4h12"},null,-1)]))}const gl=ae(pl,[["render",xl]]),bl=M({__name:"SearchComplete",props:{value:{type:String,required:!1,default:""},doctype:{type:String,required:!0},searchField:{type:String,required:!1,default:"name"},labelField:{type:String,required:!1,default:"name"},valueField:{type:String,required:!1,default:"name"},pageLength:{type:Number,required:!1,default:100},resetInput:{type:Boolean,required:!1,default:!1},customFilters:{type:Object,required:!1,default:{}}},emits:["change"],setup(t,{emit:n}){const g=n,s=t,c=Je({doctype:s.doctype,pageLength:s.pageLength,auto:!0,fields:[s.labelField,s.searchField,s.valueField],filters:{[s.searchField]:["like",`%${s.value}%`],...s.customFilters},onSuccess:()=>{a.value=s.value?i.value.find(u=>u.value===s.value):null}}),i=S(()=>{var u;return((u=c.data)==null?void 0:u.map(x=>({label:x[s.labelField],value:x[s.valueField]})))||[]}),a=$(null);function l(u){c.update({filters:{[s.searchField]:["like",`%${u}%`],...s.customFilters}}),c.reload()}return(u,x)=>(r(),I(e($e),{placeholder:"Select an option",options:i.value,value:a.value,"onUpdate:query":x[0]||(x[0]=f=>l(f)),onChange:x[1]||(x[1]=f=>{t.resetInput||(a.value=f),g("change",f)})},null,8,["options","value"]))}}),yl={class:"mx-10 flex items-center gap-2 border-y py-2.5"},_l={class:"flex flex-wrap gap-2 px-10"},hl={class:"flex justify-between gap-2 overflow-hidden px-10 py-2.5"},Cl={class:"flex items-center overflow-x-auto"},kl={class:"flex gap-1"},wl={class:"mt-2 flex items-center justify-end space-x-2 sm:mt-0"},$l=M({__name:"EmailEditor",props:H({placeholder:{type:String,default:null},editable:{type:Boolean,default:!0},doctype:{type:String,default:"HD Ticket"},toEmails:{type:Array,default:()=>[]},ccEmails:{type:Array,default:()=>[]},bccEmails:{type:Array,default:()=>[]}},{modelValue:{},modelModifiers:{}}),emits:H(["submit","discard"],["update:modelValue"]),setup(t,{expose:n,emit:g}){const s=$(null),c=$(!1),i=t,a=g,l=ee(t,"modelValue"),u=Ye("emailBoxContent"+l.value.name,""),x=$([]),f=S(()=>xe(u.value)),m=$([...i.toEmails]),k=$([...i.ccEmails]),V=$([...i.bccEmails]),C=$(!1),p=$(!1),h=S(()=>{var q;return!!((q=k.value)!=null&&q.length)}),b=S(()=>{var q;return!!((q=V.value)!=null&&q.length)}),o=$(null),w=$(null);function T(q){u.value=q.message,c.value=!1}const B=le({url:"run_doc_method",makeParams:()=>{var q,E;return{dt:i.doctype,dn:l.value.name,method:"reply_via_agent",args:{attachments:x.value.map(Z=>Z.name),to:m.value.join(","),cc:(q=k.value)==null?void 0:q.join(","),bcc:(E=V.value)==null?void 0:E.join(","),message:u.value}}},onSuccess:()=>{it(),a("submit")},debounce:300});function D(){if(!xe(u.value)){if(!m.value.length){ce({text:"Please enter a recipient email address",icon:"x",iconClasses:"text-red-600"});return}B.submit()}}function j(){C.value=!C.value,C.value&&de(()=>{o.value.setFocus()})}function K(){p.value=!p.value,p.value&&de(()=>{w.value.setFocus()})}function ne(q){x.value=x.value.filter(E=>E!==q)}function Q(q,E,Z,Be){m.value=E,k.value=Z,V.value=Be,s.value.editor.chain().clearContent().insertContent(q).focus("all").setBlockquote().insertContentAt(0,{type:"paragraph"}).focus("start").run()}function ot(q,E,Z){u.value=q,x.value=Z,s.value.editor.chain().clearContent().insertContent(q).focus("all").insertContentAt(0,{type:"paragraph"}).focus("start").run()}function it(){u.value=null,x.value=[]}function rt(){x.value=[],u.value=null,k.value=[],V.value=[],k.value=[],C.value=!1,p.value=!1,a("discard")}const ut=S(()=>s.value.editor);return n({addToReply:Q,addToForward:ot,editor:ut,submitMail:D}),(q,E)=>{const Z=F("Button"),Be=F("FeatherIcon");return r(),_(R,null,[v(e(Se),{ref_key:"editorRef",ref:s,"editor-class":["prose-sm max-w-none mx-10 max-h-[50vh] overflow-y-auto py-3","min-h-[7rem]",e(Re)(e(u))],content:e(u),"starterkit-options":{heading:{levels:[2,3,4,5,6]}},placeholder:t.placeholder,editable:t.editable,onChange:E[8]||(E[8]=P=>t.editable?u.value=P:null),extensions:[e(tt)]},{top:y(()=>[d("div",yl,[E[10]||(E[10]=d("span",{class:"text-xs text-gray-500"},"TO:",-1)),v(e(Le),{modelValue:m.value,"onUpdate:modelValue":E[0]||(E[0]=P=>m.value=P),class:"flex-1",validate:e(Ee),"error-message":P=>`${P} is an invalid email address`},null,8,["modelValue","validate","error-message"]),v(Z,{label:"CC",class:G([h.value?"bg-gray-300 hover:bg-gray-200":""]),onClick:E[1]||(E[1]=P=>j())},null,8,["class"]),v(Z,{label:"BCC",class:G([b.value?"bg-gray-300 hover:bg-gray-200":""]),onClick:E[2]||(E[2]=P=>K())},null,8,["class"])]),C.value||h.value?(r(),_("div",{key:0,class:G(["mx-10 flex items-center gap-2 py-2.5",h.value||C.value?"border-b":""])},[E[11]||(E[11]=d("span",{class:"text-xs text-gray-500"},"CC:",-1)),v(e(Le),{ref_key:"ccInput",ref:o,modelValue:k.value,"onUpdate:modelValue":E[3]||(E[3]=P=>k.value=P),class:"flex-1",validate:e(Ee),"error-message":P=>`${P} is an invalid email address`},null,8,["modelValue","validate","error-message"])],2)):A("",!0),p.value||b.value?(r(),_("div",{key:1,class:G(["mx-10 flex items-center gap-2 py-2.5",b.value||p.value?"border-b":""])},[E[12]||(E[12]=d("span",{class:"text-xs text-gray-500"},"BCC:",-1)),v(e(Le),{ref_key:"bccInput",ref:w,modelValue:V.value,"onUpdate:modelValue":E[4]||(E[4]=P=>V.value=P),class:"flex-1",validate:e(Ee),"error-message":P=>`${P} is an invalid email address`},null,8,["modelValue","validate","error-message"])],2)):A("",!0)]),bottom:y(()=>{var P;return[d("div",_l,[(r(!0),_(R,null,U(x.value,te=>(r(),I(e(Ve),{key:te.file_url,label:te.file_name},{suffix:y(()=>[v(Be,{class:"h-3.5",name:"x",onClick:W(ct=>ne(te),["stop"])},null,8,["onClick"])]),_:2},1032,["label"]))),128))]),d("div",hl,[d("div",Cl,[v(e(Qe),{class:"-ml-1",buttons:e(Pe)},null,8,["buttons"]),d("div",kl,[v(e(at),{"upload-args":{doctype:t.doctype,docname:(P=t.modelValue)==null?void 0:P.name,private:!0},onSuccess:E[5]||(E[5]=te=>{x.value.push(te)})},{default:y(({openFileSelector:te})=>[v(Z,{variant:"ghost",onClick:ct=>te()},{icon:y(()=>[v(e(st),{class:"h-4",style:{color:"#000000","stroke-width":"1.5 !important"}})]),_:2},1032,["onClick"])]),_:1},8,["upload-args"]),v(Z,{variant:"ghost",onClick:E[6]||(E[6]=te=>c.value=!0)},{icon:y(()=>[v(e(he),{class:"h-4",style:{color:"#000000","stroke-width":"1.2"}})]),_:1})])]),d("div",wl,[v(Z,{label:"Discard",onClick:rt}),v(Z,{variant:"solid",disabled:f.value,loading:e(B).loading,label:"Send",onClick:E[7]||(E[7]=()=>{D()})},null,8,["disabled","loading"])])])]}),_:1},8,["editor-class","content","placeholder","editable","extensions"]),v(e(Pa),{modelValue:c.value,"onUpdate:modelValue":E[9]||(E[9]=P=>c.value=P),doctype:t.doctype,onApply:T},null,8,["modelValue","doctype"])],64)}}}),Tl={key:0,class:"flex flex-col gap-2"},Il={class:"flex flex-wrap gap-2 px-10"},Sl={class:"flex justify-between gap-2 overflow-hidden border-t px-10 py-2.5"},Vl={class:"flex items-center overflow-x-auto"},Bl={class:"mt-2 flex items-center justify-end space-x-2 sm:mt-0"},El=M({__name:"CommentTextEditor",props:H({placeholder:{type:String,default:null},editable:{type:Boolean,default:!0},doctype:{type:String,default:"HD Ticket"}},{modelValue:{},modelModifiers:{}}),emits:H(["submit","discard"],["update:modelValue"]),setup(t,{expose:n,emit:g}){const{agents:s}=Lt();X(()=>{s.fetch()});const c=t,i=g,a=ee(t,"modelValue"),l=Ye("commentBoxContent"+a.value.name,""),u=$([]),x=S(()=>xe(l.value)),f=$(!1),m=S(()=>{var C;return((C=s.data)==null?void 0:C.map(p=>({label:p.agent_name.trimEnd(),value:p.name})))||[]});function k(C){u.value=u.value.filter(p=>p!==C)}async function V(){if(xe(l.value))return;le({url:"run_doc_method",makeParams:()=>({dt:c.doctype,dn:a.value.name,method:"new_comment",args:{content:l.value,attachments:u.value}}),onSuccess:()=>{i("submit"),f.value=!1,u.value=[],l.value=null},onError:()=>{f.value=!1}}).submit()}return n({submitComment:V}),(C,p)=>{const h=F("FeatherIcon"),b=F("Button");return e(s).data?(r(),I(e(Se),{key:0,ref:"textEditor","editor-class":["prose-sm max-w-none",t.editable&&"min-h-[7rem] mx-10 max-h-[50vh] overflow-y-auto border-t py-3",e(Re)(e(l))],content:e(l),"starterkit-options":{heading:{levels:[2,3,4,5,6]}},placeholder:t.placeholder,editable:t.editable,mentions:m.value,onChange:p[3]||(p[3]=o=>t.editable?l.value=o:null),extensions:[e(tt)]},{bottom:y(()=>[t.editable?(r(),_("div",Tl,[d("div",Il,[(r(!0),_(R,null,U(u.value,o=>(r(),I(e(Ve),{key:o.file_url,label:o.file_name},{suffix:y(()=>[v(h,{class:"h-3.5",name:"x",onClick:W(w=>k(o),["stop"])},null,8,["onClick"])]),_:2},1032,["label"]))),128))]),d("div",Sl,[d("div",Vl,[v(e(Qe),{class:"-ml-1",buttons:e(Pe)},null,8,["buttons"]),v(e(at),{"upload-args":{doctype:t.doctype,docname:t.modelValue.name,private:!0},onSuccess:p[0]||(p[0]=o=>u.value.push(o))},{default:y(({openFileSelector:o})=>[v(b,{theme:"gray",variant:"ghost",onClick:w=>o()},{icon:y(()=>[v(e(st),{class:"h-4",style:{color:"#000000","stroke-width":"1.5 !important"}})]),_:2},1032,["onClick"])]),_:1},8,["upload-args"])]),d("div",Bl,[v(b,{label:"Discard",onClick:p[1]||(p[1]=()=>{l.value="",u.value=[],i("discard")})}),v(b,{variant:"solid",label:"Comment",disabled:x.value,loading:f.value,onClick:p[2]||(p[2]=()=>{f.value=!0,V(),l.value=""})},null,8,["disabled","loading"])])])])):A("",!0)]),_:1},8,["editor-class","content","placeholder","editable","mentions","extensions"])):A("",!0)}}}),Ll={class:"flex flex-wrap gap-1"},Fl={class:"flex-1"},Al={class:"mt-1 rounded-lg bg-white py-1 text-base shadow-2xl"},jl={class:"flex flex-col gap-1 p-1 text-gray-800"},Ml={class:"text-base font-medium"},Dl={class:"text-sm text-gray-600"},Le=M({__name:"MultiSelectInput",props:H({validate:{type:Function,default:null},errorMessage:{type:Function,default:t=>`${t} is an Invalid value`}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t,{expose:n}){const g=t,s=ee(t,"modelValue"),c=$([]),i=$(null),a=$(null),l=$(""),u=$(""),x=$(!1),f=S({get:()=>l.value||"",set:o=>{l.value="",o&&(x.value=!1),o!=null&&o.value&&C(o.value)}});xt(l,o=>{o=o||"",u.value!==o&&(u.value=o,V(o))},{debounce:300,immediate:!0});const m=le({url:"frappe.desk.search.search_link",method:"POST",cache:[u.value,"Contact"],params:{txt:u.value,doctype:"Contact"},transform:o=>o.filter(T=>T.description.split(", ")[1]).map(T=>{let B=T.description.split(", ")[1];return{label:T.label||B,value:B}})}),k=S(()=>{let o=m.data||[];return!o.length&&l.value&&o.push({label:l.value,value:l.value}),o});function V(o){m.update({params:{txt:o,doctype:"Contact"}}),m.reload()}const C=o=>{a.value=null,o&&(o.split(",").forEach(T=>{var B;if(T=T.trim(),T&&!((B=s.value)!=null&&B.includes(T))){if(T&&g.validate&&!g.validate(T)){a.value=g.errorMessage(T);return}s.value?s.value.push(T):s.value=[T],T=T.replace(T,"")}}),!a.value&&(o=""))},p=o=>{s.value=s.value.filter(w=>w!==o)},h=()=>{var w;if(l.value)return;let o=(w=c.value[c.value.length-1])==null?void 0:w.$el;document.activeElement===o?(s.value.pop(),de(()=>{s.value.length?(o=c.value[c.value.length-1].$el,o==null||o.focus()):b()})):o==null||o.focus()};function b(){i.value.$el.focus()}return n({setFocus:b}),(o,w)=>{const T=F("FeatherIcon"),B=F("Button"),D=F("ErrorMessage");return r(),_("div",null,[d("div",Ll,[(r(!0),_(R,null,U(s.value,j=>(r(),I(B,{ref_for:!0,ref_key:"emails",ref:c,key:j,label:j,theme:"gray",variant:"subtle",class:"rounded-full",onKeydownCapture:ue(W(h,["stop"]),["delete"])},{suffix:y(()=>[v(T,{class:"h-3.5",name:"x",onClick:W(K=>p(j),["stop"])},null,8,["onClick"])]),_:2},1032,["label","onKeydownCapture"]))),128)),d("div",Fl,[v(e(ht),{modelValue:f.value,"onUpdate:modelValue":w[2]||(w[2]=j=>f.value=j),nullable:""},{default:y(()=>[v(e(gt),{show:x.value,"onUpdate:show":w[1]||(w[1]=j=>x.value=j),class:"w-full"},{target:y(({togglePopover:j})=>[v(e(bt),{ref_key:"search",ref:i,class:"search-input form-input w-full border-none bg-white hover:bg-white focus:border-none focus:!shadow-none focus-visible:!ring-0",type:"text",value:l.value,autocomplete:"off",onChange:w[0]||(w[0]=K=>{l.value=K.target.value,x.value=!0}),onFocus:()=>j(),onKeydownCapture:ue(W(h,["stop"]),["delete"])},null,8,["value","onFocus","onKeydownCapture"])]),body:y(({isOpen:j})=>[Ae(d("div",null,[d("div",Al,[v(e(yt),{class:"my-1 max-h-[12rem] overflow-y-auto px-1.5",static:""},{default:y(()=>[(r(!0),_(R,null,U(k.value,K=>(r(),I(e(_t),{key:K.value,value:K},{default:y(({active:ne})=>[d("li",{class:G(["flex cursor-pointer items-center rounded px-2 py-1 text-base",{"bg-gray-100":ne}])},[v(e(Me),{class:"mr-2",name:K.value,size:"lg"},null,8,["name"]),d("div",jl,[d("div",Ml,L(K.label),1),d("div",Dl,L(K.value),1)])],2)]),_:2},1032,["value"]))),128))]),_:1})])],512),[[je,j]])]),_:1},8,["show"])]),_:1},8,["modelValue"])])]),a.value?(r(),I(D,{key:0,class:"mt-2 pl-2",message:a.value},null,8,["message"])):A("",!0)])}}}),Pl={class:"flex flex-col comm-area"},Rl={class:"flex justify-between gap-3 border-t px-4 lg:px-10 py-4 md:py-2.5"},ql={class:"flex gap-1.5"},Ol=["onKeydownCapture"],Nl=["onKeydownCapture"],In=M({__name:"CommunicationArea",props:H({doctype:{type:String,default:"HD Ticket"},toEmails:{type:Array,default:()=>[]},ccEmails:{type:Array,default:()=>[]},bccEmails:{type:Array,default:()=>[]}},{content:{},contentModifiers:{},modelValue:{},modelModifiers:{}}),emits:H(["update"],["update:content","update:modelValue"]),setup(t,{expose:n,emit:g}){const s=g,c=ee(t,"content"),i=ee(t,"modelValue"),a=$(!1),l=$(!1),u=$(null),x=$(null);function f(){l.value&&(l.value=!1),a.value=!a.value}function m(){a.value&&(a.value=!1),l.value=!l.value}function k(){u.value.submitMail(),s("update")}function V(){x.value.submitComment(),s("update")}function C(h){var b,o,w;a.value=!0,u.value.addToReply(h.content,(b=h.to)==null?void 0:b.split(","),(o=h.cc)==null?void 0:o.split(","),(w=h.bcc)==null?void 0:w.split(","))}function p(h){a.value=!0,u.value.addToForward(h.content,h.subject,h.attachments)}return n({replyToEmail:C,forwardEmail:p,toggleEmailBox:f,toggleCommentBox:m,editor:u}),(h,b)=>{const o=F("Button");return r(),_("div",Pl,[d("div",Rl,[d("div",ql,[v(o,{ref:"sendEmailRef",variant:"ghost",label:"Reply",class:G([a.value?"!bg-gray-300 hover:!bg-gray-200":""]),onClick:b[0]||(b[0]=w=>f())},{prefix:y(()=>[v(e(he),{class:"h-4"})]),_:1},8,["class"]),v(o,{variant:"ghost",label:"Comment",class:G([l.value?"!bg-gray-300 hover:!bg-gray-200":""]),onClick:b[1]||(b[1]=w=>m())},{prefix:y(()=>[v(e(Te),{class:"h-4"})]),_:1},8,["class"])])]),Ae(d("div",{onKeydownCapture:[ue(W(V,["ctrl","stop"]),["enter"]),ue(W(V,["meta","stop"]),["enter"])]},[v(e(El),{ref_key:"commentTextEditorRef",ref:x,modelValue:i.value,"onUpdate:modelValue":b[2]||(b[2]=w=>i.value=w),editable:l.value,doctype:t.doctype,placeholder:"@John could you please look into this?",onSubmit:b[3]||(b[3]=()=>{l.value=!1,s("update")}),onDiscard:b[4]||(b[4]=()=>{l.value=!1})},null,8,["modelValue","editable","doctype"])],40,Ol),[[je,l.value]]),Ae(d("div",{class:"flex gap-1.5",onKeydownCapture:[ue(W(k,["ctrl","stop"]),["enter"]),ue(W(k,["meta","stop"]),["enter"])]},[v(e($l),{ref_key:"emailEditorRef",ref:u,modelValue:i.value,"onUpdate:modelValue":b[5]||(b[5]=w=>i.value=w),content:c.value,"onUpdate:content":b[6]||(b[6]=w=>c.value=w),placeholder:"Hi John, we are looking into this issue.","to-emails":t.toEmails,"cc-emails":t.ccEmails,"bcc-emails":t.bccEmails,onSubmit:b[7]||(b[7]=()=>{a.value=!1,s("update")}),onDiscard:b[8]||(b[8]=()=>{a.value=!1})},null,8,["modelValue","content","to-emails","cc-emails","bcc-emails"])],40,Nl),[[je,a.value]])])}}}),Ul={class:"flex flex-col gap-4"},Hl={class:"flex items-center gap-2 rounded-md p-2 ring-1 ring-gray-200"},zl=M({__name:"TicketSplitModal",props:H({ticket_id:{},communication_id:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:H(["update"],["update:modelValue"]),setup(t,{emit:n}){const g=t,s=ee(t,"modelValue"),c=$(null),i=le({url:"helpdesk.helpdesk.doctype.hd_ticket.api.split_ticket",makeParams({subject:l,communication_id:u}){return{subject:l,communication_id:u}},validate({subject:l,communication_id:u}){if(!l)throw{message:"Subject is required"};if(!u)throw{message:"Communication ID is required"}},onSuccess:l=>{ce({title:"Ticket split successfully",icon:"check",iconClasses:"text-green-600"}),s.value=!1,window.open(window.location.origin+"/helpdesk/tickets/"+l,"_blank"),window.location.reload()}});function a(){i.submit({subject:c.value,communication_id:g.communication_id})}return(l,u)=>{const x=F("FormControl"),f=F("Button");return r(),I(e(Xe),{options:{title:"Split ticket"},modelValue:s.value,"onUpdate:modelValue":u[1]||(u[1]=m=>s.value=m)},{"body-content":y(()=>[d("div",Ul,[u[3]||(u[3]=d("p",{class:"text-p-base text-ink-gray-8"},[ve(" All "),d("span",{class:"underline"},"emails/ comments"),ve(" from this email onwards will be moved to new ticket. ")],-1)),v(x,{label:"New Ticket Subject",type:"text",modelValue:c.value,"onUpdate:modelValue":u[0]||(u[0]=m=>c.value=m),placeholder:"Add a subject for the new ticket"},null,8,["modelValue"]),d("div",Hl,[v(e(Bt),{class:"h-6 w-5 w-min-5 w-max-5 min-h-5 max-w-5 text-yellow-500"}),u[2]||(u[2]=d("div",{class:"text-wrap text-sm text-gray-700"}," This action is irreversible. ",-1))])])]),actions:y(()=>[v(f,{class:"w-full",variant:"solid",label:"Split into new ticket",loading:e(i).loading,"icon-left":e(lt),onClick:a},null,8,["loading","icon-left"])]),_:1},8,["modelValue"])}}}),Kl={class:"mb-1 flex items-center justify-between gap-2"},Zl={key:0,class:"flex items-center gap-2 text-sm"},Gl={class:"leading-tight"},Wl={class:"text-xs md:text-sm text-gray-600"},Jl={key:0,class:"sm:flex hidden text-sm text-gray-600"},Yl={key:1,class:"flex items-center gap-2"},Ql={key:0,class:"sm:flex hidden text-sm text-gray-600"},Xl={class:"flex gap-0.5 items-center"},ea={class:"text-xs md:text-sm text-gray-600"},ta={class:"mb-3 text-sm leading-5 text-gray-600"},la={key:0,class:"text-2xs mr-1 font-bold text-gray-500"},aa={key:1},na={key:2},sa={key:3,class:"text-2xs mr-1 font-bold text-gray-500"},oa={key:4},ia={key:5},ra={key:6,class:"text-2xs mr-1 font-bold text-gray-500"},ua={key:7},ca={class:"flex flex-wrap gap-2"},da=M({__name:"EmailArea",props:{activity:{type:Object,required:!0},showSplitOption:{type:Boolean,default:!1}},emits:["reply","forward"],setup(t,{emit:n}){const g=t,{sender:s,to:c,cc:i,bcc:a,creation:l,subject:u,attachments:x,content:f,name:m}=g.activity,k=n,{isMobileView:V}=Ct(),C=$(!1);return(p,h)=>{const b=F("Tooltip"),o=F("Button"),w=At,T=Ft;return r(),_(R,null,[d("div",_e(p.$attrs,{class:"grow cursor-pointer border-transparent bg-white rounded-md shadow text-base leading-6 transition-all duration-300 ease-in-out"}),[d("div",Kl,[e(V)?(r(),_("div",Zl,[d("div",Gl,[d("p",null,L(e(s).full_name||"No name found"),1),v(b,{text:e(se)(e(l),e(oe))},{default:y(()=>[d("p",Wl,L(e(ge)(e(l))),1)]),_:1},8,["text"]),e(s).name?(r(),_("p",Jl,L("<"+e(s).name+">"),1)):A("",!0)])])):(r(),_("div",Yl,[d("span",null,L(e(s).full_name||"No name found"),1),e(s).name?(r(),_("span",Ql,L("<"+e(s).name+">"),1)):A("",!0)])),d("div",Xl,[e(V)?A("",!0):(r(),I(b,{key:0,text:e(se)(e(l),e(oe))},{default:y(()=>[d("p",ea,L(e(ge)(e(l))),1)]),_:1},8,["text"])),v(o,{variant:"ghost",class:"text-gray-700",onClick:h[0]||(h[0]=B=>{var D;return k("reply",{content:e(f),to:((D=e(s))==null?void 0:D.name)??e(c)})})},{default:y(()=>[v(e(ul),{class:"h-4 w-4"})]),_:1}),v(o,{variant:"ghost",class:"text-gray-700",onClick:h[1]||(h[1]=B=>{var D;return k("reply",{content:e(f),to:((D=e(s))==null?void 0:D.name)??e(c),cc:e(i),bcc:e(a)})})},{default:y(()=>[v(e(fl),{class:"h-4 w-4"})]),_:1}),v(w,{options:[...t.showSplitOption?[{label:"Split Ticket",icon:e(lt),onClick:()=>C.value=!0}]:[],{label:"Forward",icon:e(gl),onClick:()=>{var B;return k("forward",{content:e(f),attachments:e(x),subject:e(u),to:((B=e(s))==null?void 0:B.name)??e(c),cc:e(i),bcc:e(a)})}}]},{default:y(()=>[v(o,{icon:"more-horizontal",class:"text-gray-600",variant:"ghost"})]),_:1},8,["options"])])]),d("div",ta,[e(c)?(r(),_("span",la,"TO:")):A("",!0),e(c)?(r(),_("span",aa,L(e(c)),1)):A("",!0),e(i)?(r(),_("span",na,", ")):A("",!0),e(i)?(r(),_("span",sa," CC: ")):A("",!0),e(i)?(r(),_("span",oa,L(e(i)),1)):A("",!0),e(a)?(r(),_("span",ia,", ")):A("",!0),e(a)?(r(),_("span",ra," BCC: ")):A("",!0),e(a)?(r(),_("span",ua,L(e(a)),1)):A("",!0)]),v(T,{content:e(f)},null,8,["content"]),d("div",ca,[(r(!0),_(R,null,U(e(x),B=>(r(),I(e(Ve),{key:B.file_url,label:B.file_name,url:B.file_url},null,8,["label","url"]))),128))])],16),v(zl,{modelValue:C.value,"onUpdate:modelValue":h[2]||(h[2]=B=>C.value=B),ticket_id:e(m),communication_id:e(m)},null,8,["modelValue","ticket_id","communication_id"])],64)}}}),ma={class:"mb-1 ml-0.5 flex items-center justify-between"},fa={class:"text-gray-600 flex items-center gap-2"},pa={class:"font-medium text-gray-800"},va={class:"flex items-center gap-1"},xa={class:"pl-0.5 text-sm text-gray-600"},ga={key:0},ba={class:"rounded bg-gray-50 px-4 py-3"},ya={class:"flex flex-row-reverse gap-2"},_a={key:0,class:"flex flex-wrap gap-2"},ha=M({__name:"CommentBox",props:{activity:{type:Object,required:!0}},emits:["update"],setup(t,{emit:n}){const g=kt(),s=t,{getUser:c}=qe(),{name:i,creation:a,content:l,commenter:u,commentedBy:x,attachments:f}=s.activity,m=S(()=>/has been merged with ticket #\d+/.test(l)),k=n,V=$(!1),C=$(!1),p=$(l),h=$(null),b=$(null);function o(){C.value=!0,b.value.editor.chain().focus("start")}function w(){p.value=l,C.value=!1}const T=le({url:"frappe.client.delete",makeParams:()=>({doctype:"HD Ticket Comment",name:i}),onSuccess(){k("update"),ce({title:"Comment deleted",icon:"check",iconClasses:"text-green-500"})}});function B(){if(l===p.value){C.value=!1;return}if(xe(p.value)){ce({title:"Comment cannot be empty",icon:"x",iconClasses:"text-red-600"});return}Et.submit({doctype:"HD Ticket Comment",name:i,fieldname:"content",value:p.value},{onSuccess:()=>{C.value=!1,k("update"),ce({title:"Comment updated",icon:"check",iconClasses:"text-green-500"})}})}return X(()=>{h.value.style.width="0px"}),(D,j)=>{const K=F("Tooltip"),ne=F("Button");return r(),_(R,null,[d("div",{class:"flex-col text-base flex-1",ref_key:"commentBoxRef",ref:h},[d("div",ma,[d("div",fa,[v(e(Oe),{size:"sm",label:e(u),image:e(c)(e(x)).user_image},null,8,["label","image"]),d("p",null,[d("span",pa,L(e(u)),1),j[2]||(j[2]=d("span",null," added a",-1)),j[3]||(j[3]=d("span",{class:"max-w-xs truncate font-medium text-gray-800"}," comment ",-1))])]),d("div",va,[v(K,{text:e(se)(e(a),e(oe))},{default:y(()=>[d("span",xa,L(e(ge)(e(a))),1)]),_:1},8,["text"]),e(g).userId===e(x)&&!C.value?(r(),_("div",ga,[v(e(et),{options:[{label:"Edit",onClick:()=>o(),icon:"edit-2",condition:()=>!m.value},{label:"Delete",onClick:()=>V.value=!0,icon:"trash-2"}]},{default:y(()=>[v(ne,{icon:"more-horizontal",class:"text-gray-600",variant:"ghost"})]),_:1},8,["options"])])):A("",!0)])]),d("div",ba,[v(e(Se),{ref_key:"editorRef",ref:b,"editor-class":["prose-f shrink  text-p-sm transition-all duration-300 ease-in-out block w-full content",e(Re)(p.value)],content:p.value,editable:C.value,"bubble-menu":e(Pe),onChange:j[0]||(j[0]=Q=>{p.value=Q})},wt({_:2},[C.value?{name:"bottom",fn:y(()=>[d("div",ya,[v(ne,{label:"Save",onClick:B,variant:"solid"}),v(ne,{label:"Discard",onClick:w})])]),key:"0"}:void 0]),1032,["editor-class","content","editable","bubble-menu"]),C.value?A("",!0):(r(),_("div",_a,[(r(!0),_(R,null,U(e(f),Q=>(r(),I(e(Ve),{key:Q.file_url,label:Q.file_name,url:Q.file_url},null,8,["label","url"]))),128))]))])],512),v(e(Xe),{modelValue:V.value,"onUpdate:modelValue":j[1]||(j[1]=Q=>V.value=Q),options:{title:"Delete Comment",message:"Are you sure you want to confirm this action?",actions:[{label:"Cancel",onClick:()=>V.value=!1},{label:"Delete",onClick:()=>e(T).submit(),variant:"solid"}]}},null,8,["modelValue","options"])],64)}}}),Ca={class:"flex-1"},ka={class:"mt-1.5 flex justify-between text-base items-center"},wa={class:"text-gray-600"},$a={class:"font-medium text-gray-800"},Ta={class:"text-gray-600 text-sm"},Ia={key:0},Sa={class:"text-gray-600"},Va={class:"font-medium text-gray-800"},Ba={class:"text-gray-600 text-sm"},Ea=M({__name:"HistoryBox",props:{activity:{type:Object,required:!0}},setup(t){const n=t,{user:g,content:s,creation:c,relatedActivities:i}=n.activity;let a=$(!1);return(l,u)=>{const x=F("Tooltip"),f=F("FeatherIcon"),m=F("Button");return r(),_("div",Ca,[d("div",ka,[d("div",wa,[d("span",$a,L(e(g)),1),d("span",null,L(e(s)),1)]),v(x,{text:e(se)(e(c),e(oe))},{default:y(()=>[d("div",Ta,L(e(ge)(e(c))),1)]),_:1},8,["text"])]),e(a)&&e(s)!=="created this ticket"?(r(),_("div",Ia,[(r(!0),_(R,null,U(e(i),k=>(r(),_("div",{key:k.creation,class:"mt-2 flex justify-between text-base"},[d("div",Sa,[d("span",Va,L(k.user),1),d("span",null,L(k.content),1)]),v(x,{text:e(se)(k.creation,e(oe))},{default:y(()=>[d("div",Ba,L(e(ge)(k.creation)),1)]),_:2},1032,["text"])]))),128))])):A("",!0),e(i).length&&e(s)!=="created this ticket"?(r(),I(m,{key:1,label:e(a)?"Hide":`${e(i).length} other activities`,variant:"outline",class:"mt-2",onClick:u[0]||(u[0]=k=>$t(a)?a.value=!e(a):a=!e(a))},{suffix:y(()=>[v(f,{name:e(a)?"chevron-up":"chevron-down",class:"h-4 text-gray-600"},null,8,["name"])]),_:1},8,["label"])):A("",!0)])}}}),La={class:"mt-3 flex flex-wrap items-center gap-2"},Sn=M({__name:"AssignmentModal",props:H({assignees:{type:Array,required:!0},doctype:{type:String,required:!0},docname:{type:String,required:!0}},{modelValue:{},modelModifiers:{}}),emits:H(["update"],["update:modelValue"]),setup(t,{emit:n}){const g=t,s=ee(t,"modelValue"),c=n,{getUser:i}=qe(),a=$(""),l=f=>{a.value="",le({url:"frappe.desk.form.assign_to.add",auto:!0,params:{doctype:g.doctype,name:g.docname,assign_to:[f]},onSuccess:()=>{c("update")}}),c("update")},u=f=>{le({url:"frappe.desk.form.assign_to.remove",auto:!0,params:{doctype:g.doctype,name:g.docname,assign_to:f},onSuccess:()=>{c("update")}})},x=S(()=>{var m;const f={};return f.is_active=["=",1],(m=g.assignees)!=null&&m.length&&(f.name=["not in",[...g.assignees.map(k=>k.name)]]),f});return(f,m)=>{const k=F("Tooltip"),V=F("FeatherIcon"),C=F("Button"),p=F("ErrorMessage"),h=F("Dialog");return r(),I(h,{modelValue:s.value,"onUpdate:modelValue":m[1]||(m[1]=b=>s.value=b),options:{title:"Assign To",size:"xl"}},{"body-content":y(()=>[v(e(bl),{class:"form-control",doctype:"HD Agent","custom-filters":x.value,"reset-input":!0,onChange:m[0]||(m[0]=b=>{l(b.value)})},{"item-prefix":y(({option:b})=>[v(e(Me),{class:"mr-2",name:b.value,size:"sm"},null,8,["name"])]),"item-label":y(({option:b})=>[v(k,{text:b.value},{default:y(()=>[ve(L(e(i)(b.value).full_name),1)]),_:2},1032,["text"])]),_:1},8,["custom-filters"]),d("div",La,[(r(!0),_(R,null,U(t.assignees,b=>(r(),I(k,{key:b.name,text:b.name},{default:y(()=>[v(C,{label:e(i)(b.name).full_name,theme:"gray",variant:"outline"},{prefix:y(()=>[v(e(Me),{name:b.name,size:"sm"},null,8,["name"])]),suffix:y(()=>[v(V,{class:"h-3.5",name:"x",onClick:W(o=>u(b.name),["stop"])},null,8,["onClick"])]),_:2},1032,["label"])]),_:2},1032,["text"]))),128))]),a.value?(r(),I(p,{key:0,class:"mt-2",message:a.value},null,8,["message"])):A("",!0)]),_:1},8,["modelValue"])}}}),Fa={key:0,class:"mt-2 grid max-h-[560px] grid-cols-1 md:grid-cols-3 gap-2 overflow-y-auto"},Aa=["onClick"],ja={class:"border-b pb-2 text-base font-semibold"},Ma={key:1,class:"mt-2"},Da={class:"flex justify-end mt-4"},Pa={__name:"CannedResponseSelectorModal",props:H({doctype:{type:String,default:""}},{modelValue:{},modelModifiers:{}}),emits:H(["apply"],["update:modelValue"]),setup(t,{emit:n}){const g=t,s=ee(t,"modelValue"),c=$(""),i=n,a=$(""),l=Je({type:"list",doctype:"HD Canned Response",cache:["cannedResponses",g.doctype],fields:["title","message","modified"],orderBy:"modified desc",pageLength:99999});X(()=>{l.data==null&&l.fetch()});const u=S(()=>{var x;return((x=l.data)==null?void 0:x.filter(f=>f.title.toLowerCase().includes(a.value.toLowerCase())))??[]});return Ie(s,x=>x&&de(()=>{var f,m;return(m=(f=c.value)==null?void 0:f.el)==null?void 0:m.focus()})),(x,f)=>{const m=F("FeatherIcon"),k=F("TextInput"),V=F("Button"),C=F("Dialog");return r(),I(C,{modelValue:s.value,"onUpdate:modelValue":f[2]||(f[2]=p=>s.value=p),options:{title:"Canned Responses",size:"4xl"}},{"body-content":y(()=>[v(k,{ref_key:"searchInput",ref:c,modelValue:a.value,"onUpdate:modelValue":f[0]||(f[0]=p=>a.value=p),type:"text",placeholder:"Site Down"},{prefix:y(()=>[v(m,{name:"search",class:"h-4 w-4 text-gray-500"})]),_:1},8,["modelValue"]),u.value.length?(r(),_("div",Fa,[(r(!0),_(R,null,U(u.value,p=>(r(),_("div",{key:p.name,class:"flex h-56 cursor-pointer flex-col gap-2 rounded-lg border p-3 hover:bg-gray-100",onClick:h=>i("apply",p)},[d("div",ja,L(p.title),1),p.message?(r(),I(e(Se),{key:0,content:p.message,editable:!1,"editor-class":"!prose-sm max-w-none !text-sm text-gray-600 focus:outline-none",class:"flex-1 overflow-hidden"},null,8,["content"])):A("",!0)],8,Aa))),128))])):(r(),_("div",Ma,f[3]||(f[3]=[d("div",{class:"flex h-56 flex-col items-center justify-center"},[d("div",{class:"text-lg text-gray-500"},L("No templates found"))],-1)]))),d("div",Da,[v(V,{label:"New Canned Response",onClick:f[1]||(f[1]=()=>{x.$router.push("/canned-responses#new"),e(l).data=null})})])]),_:1},8,["modelValue"])}}},Ra={class:"flex items-center justify-start gap-5 border-b p-5"},qa={class:"flex items-center justify-between flex-1"},Oa={class:"w-[242px] truncate text-2xl font-medium"},Na={class:"flex gap-1.5"},Vn=M({__name:"TicketAgentContact",props:{contact:{type:Object,required:!0}},emits:["email:open"],setup(t,{emit:n}){const g=t,s=n;function c(){s("email:open",g.contact.email_id)}return(i,a)=>{const l=F("Button");return r(),_("div",Ra,[v(e(Oe),{size:"3xl",image:t.contact.image,label:t.contact.name},null,8,["image","label"]),d("div",qa,[v(e(be),{text:t.contact.name},{default:y(()=>[d("div",Oa,L(t.contact.name),1)]),_:1},8,["text"]),d("div",Na,[v(e(be),{text:t.contact.email_id},{default:y(()=>[v(l,{class:"h-7 w-7"},{default:y(()=>[v(e(he),{class:"h-4 w-4",onClick:a[0]||(a[0]=u=>c())})]),_:1})]),_:1},8,["text"])])])])}}}),Ua={class:"md:mx-8 md:my-4 flex items-center justify-between text-lg font-medium !mx-10 mb-4 !mt-8"},Ha={class:"flex h-8 items-center text-xl font-semibold text-gray-800"},za=M({__name:"ActivityHeader",props:{title:{type:String,required:!0}},setup(t){const n=ie("communicationArea"),g=S(()=>[{icon:z(he,{class:"h-4 w-4"}),label:"Email",onClick:()=>n.value.toggleEmailBox()},{icon:z(Te,{class:"h-4 w-4"}),label:"Comment",onClick:()=>n.value.toggleCommentBox()}]);return(s,c)=>{const i=F("FeatherIcon"),a=F("Button");return r(),_("div",Ua,[d("div",Ha,L(t.title),1),t.title=="Emails"?(r(),I(a,{key:0,variant:"solid",onClick:c[0]||(c[0]=l=>e(n).toggleEmailBox())},{prefix:y(()=>[v(i,{name:"plus",class:"h-4 w-4"})]),default:y(()=>[c[3]||(c[3]=d("span",null,L("New Email"),-1))]),_:1})):t.title=="Comments"?(r(),I(a,{key:1,variant:"solid",onClick:c[1]||(c[1]=l=>e(n).toggleCommentBox())},{prefix:y(()=>[v(i,{name:"plus",class:"h-4 w-4"})]),default:y(()=>[c[4]||(c[4]=d("span",null,L("New Comment"),-1))]),_:1})):(r(),I(e(et),{key:2,options:g.value,onClick:c[2]||(c[2]=W(()=>{},["stop"]))},{default:y(({open:l})=>[v(a,{variant:"solid",class:"flex items-center gap-1"},{prefix:y(()=>[v(i,{name:"plus",class:"h-4 w-4"})]),suffix:y(()=>[v(i,{name:l?"chevron-up":"chevron-down",class:"h-4 w-4"},null,8,["name"])]),default:y(()=>[c[5]||(c[5]=d("span",null,L("New"),-1))]),_:2},1024)]),_:1},8,["options"]))])}}}),Ka={key:0,class:"activities flex-1 h-full mt-1"},Za={class:"w-full px-3 sm:px-10 grid grid-cols-[30px_minmax(auto,_1fr)] gap-2 sm:gap-4"},Ga={class:"mb-4 flex flex-1"},Wa={key:1,class:"h-full flex flex-col items-center justify-center gap-3 text-xl font-medium text-gray-500"},Bn=M({__name:"TicketAgentActivities",props:{activities:{type:Array,required:!0},title:{type:String,required:!0},ticketStatus:{type:String,default:""}},emits:["email:reply","email:forward","update"],setup(t,{expose:n,emit:g}){const s=t,c=g,{getUser:i}=qe(),a=ie("communicationArea"),l=S(()=>{let f="No Activities";if(s.title=="Emails")f="No Email Communications";else if(s.title=="Comments")return f="No Comments",f}),u=S(()=>{let f=Jt;return s.title=="Emails"?f=he:s.title=="Comments"&&(f=Te),z(f,{class:"text-gray-500"})});function x(){setTimeout(()=>{let f,m=document.getElementsByClassName("activity");f=m[m.length-1],f&&!Tt(f).value&&(f.scrollIntoView(),f.focus())},500)}return n({scrollToLatestActivity:x}),X(()=>{x()}),Ie(()=>s.title,()=>{x()}),(f,m)=>{const k=za,V=F("Button");return r(),_(R,null,[v(k,{title:t.title},null,8,["title"]),v(e(jt),{class:"flex flex-col flex-1 overflow-y-auto"},{default:y(()=>[t.activities.length?(r(),_("div",Ka,[(r(!0),_(R,null,U(t.activities,(C,p)=>{var h,b;return r(),_("div",{key:C.key,class:"activity"},[d("div",Za,[d("div",{class:G(["relative flex justify-center after:absolute after:left-[50%] after:top-1 after:-z-10 after:border-l after:border-gray-200",[p!=t.activities.length-1?"after:h-full":"after:h-4"]])},[d("div",{class:G(["z-10 flex h-7 w-7 items-center justify-center rounded-full bg-white",[C.type==="comment"?"mt-0.5":"",C.type==="history"?"mt-1":""]])},[C.type==="email"?(r(),I(e(Oe),{key:0,size:"md",label:(h=C.sender)==null?void 0:h.full_name,image:e(i)((b=C.sender)==null?void 0:b.name).user_image,class:"bg-white"},null,8,["label","image"])):C.type==="comment"?(r(),I(e(Te),{key:1,class:"text-gray-800"})):(r(),I(e(Xt),{key:2,class:"text-gray-600"}))],2)],2),d("div",Ga,[C.type==="email"?(r(),I(e(da),{key:0,activity:C,"show-split-option":!C.isFirstEmail&&t.ticketStatus!=="Closed",class:"py-2 px-3",onReply:m[0]||(m[0]=o=>c("email:reply",o)),onForward:m[1]||(m[1]=o=>c("email:forward",o))},null,8,["activity","show-split-option"])):C.type==="comment"?(r(),I(e(ha),{key:1,activity:C,onUpdate:m[2]||(m[2]=()=>c("update"))},null,8,["activity"])):(r(),I(e(Ea),{key:2,activity:C},null,8,["activity"]))])])])}),128))])):(r(),_("div",Wa,[(r(),I(De(u.value),{class:"h-10 w-10"})),d("span",null,L(l.value),1),t.title=="Emails"?(r(),I(V,{key:0,label:"New Email",onClick:m[3]||(m[3]=C=>e(a).toggleEmailBox())})):t.title=="Comments"?(r(),I(V,{key:1,label:"New Comment",onClick:m[4]||(m[4]=C=>e(a).toggleCommentBox())})):A("",!0)]))]),_:1})],64)}}}),Ja={class:"flex flex-col gap-3 border-b px-6 py-3"},Ya={class:"w-[126px] text-sm text-gray-600"},Qa={class:"flex items-center justify-between"},Xa={key:0},En=M({__name:"TicketAgentDetails",props:{ticket:{type:Object,required:!0}},setup(t){const n=t,g=S(()=>{let i=null;return!n.ticket.first_responded_on&&O().isBefore(O(n.ticket.response_by))?i={label:`Due in ${fe(O(n.ticket.response_by).diff(O(),"s"))}`,color:"orange"}:O(n.ticket.first_responded_on).isBefore(O(n.ticket.response_by))?i={label:`Fulfilled in ${fe(O(n.ticket.first_responded_on).diff(O(n.ticket.creation),"s"))}`,color:"green"}:i={label:"Failed",color:"red"},i}),s=S(()=>{let i=null;return n.ticket.status==="Replied"&&n.ticket.on_hold_since&&O(n.ticket.resolution_by).isAfter(O(n.ticket.on_hold_since))?i={label:`${fe(O(n.ticket.resolution_by).diff(O(n.ticket.on_hold_since),"s"))} left (On Hold)`,color:"blue"}:!n.ticket.resolution_date&&O().isBefore(n.ticket.resolution_by)?i={label:`Due in ${fe(O(n.ticket.resolution_by).diff(O(),"s"))}`,color:"orange"}:O(n.ticket.resolution_date).isBefore(n.ticket.resolution_by)?i={label:`Fulfilled in ${fe(O(n.ticket.resolution_date).diff(O(n.ticket.creation),"s"))}`,color:"green"}:i={label:"Failed",color:"red"},i}),c=S(()=>[{label:"First Response",tooltipValue:se(n.ticket.first_responded_on||n.ticket.response_by,oe),badgeText:g.value.label,badgeColor:g.value.color},{label:"Resolution",tooltipValue:se(n.ticket.resolution_date||n.ticket.resolution_by,oe),badgeText:s.value.label,badgeColor:s.value.color},{label:"Source",value:n.ticket.via_customer_portal?"Portal":"Mail"}]);return(i,a)=>(r(),_("div",Ja,[(r(!0),_(R,null,U(c.value,l=>(r(),_("div",{key:l.label,class:"flex items-center text-base leading-5"},[v(e(be),{text:l.label},{default:y(()=>[d("div",Ya,L(l.label),1)]),_:2},1032,["text"]),d("div",Qa,[l.value?(r(),_("div",Xa,L(l.value),1)):A("",!0),v(e(be),{text:l.tooltipValue},{default:y(()=>[l.badgeText?(r(),I(e(It),{key:0,class:"-ml-1",label:l.badgeText,variant:"subtle",theme:l.badgeColor},null,8,["label","theme"])):A("",!0)]),_:2},1032,["text"])])]))),128))]))}}),en={class:"flex gap-2 px-6 pb-1 leading-5 first:mt-3 items-baseline"},tn={class:"w-[106px] shrink-0 truncate text-sm text-gray-600"},ln={key:0,class:"text-red-500"},an={class:"-m-0.5 min-h-[28px] flex-1 items-center overflow-hidden p-0.5 text-base"},nn=M({__name:"UniInput2",props:{field:{},value:{type:[String,Number,Boolean]}},emits:["change"],setup(t,{emit:n}){const g=t,s=n,c=["Long Text","Small Text","Text","Text Editor"],i=S(()=>g.field.url_method?z($e,{options:a.data}):g.field.fieldtype==="Link"&&g.field.options?z(Mt,{doctype:g.field.options,hideMe:!0}):g.field.fieldtype==="Select"?z($e,{options:g.field.options.split(`
`).map(x=>({label:x,value:x}))}):g.field.fieldtype==="Check"?z($e,{options:[{label:"Yes",value:1},{label:"No",value:0}]}):c.includes(g.field.fieldtype)?z(Ke,{type:"textarea"}):z(Ke)),a=le({url:g.field.url_method,auto:!!g.field.url_method,transform:x=>x.map(f=>({label:f,value:f}))}),l=S(()=>g.field.fieldtype==="Check"?g.value?"Yes":"No":g.value);function u(x,f){s("change",{fieldname:x,value:f})}return(x,f)=>(r(),_("div",en,[v(e(be),{text:x.field.label},{default:y(()=>[d("div",tn,[ve(L(x.field.label)+" ",1),x.field.required?(r(),_("span",ln," * ")):A("",!0)])]),_:1},8,["text"]),d("div",an,[(r(),I(De(i.value),_e({key:x.field.fieldname,class:"form-control",placeholder:`Add ${x.field.label}`,value:l.value,autocomplete:"off"},St(c.includes(x.field.fieldtype)?{blur:m=>{u(x.field.fieldname,m.target.value)}}:{change:m=>{var k;u(x.field.fieldname,(m==null?void 0:m.value)||((k=m==null?void 0:m.target)==null?void 0:k.value)||m)}})),null,16,["placeholder","value"]))])]))}});const sn=ae(nn,[["__scopeId","data-v-aa25d1be"]]),on={class:"flex flex-1 flex-col overflow-hidden overflow-y-auto border-b"},rn=M({__name:"TicketAgentFields",props:{ticket:{type:Object,required:!0}},emits:["update"],setup(t,{emit:n}){const g=n,s=t,c=S(()=>s.ticket.fields);function i(a,l,u=null){if(a==="subject"&&l===""){ce({title:"Subject is required",icon:"x",iconClasses:"text-red-600"}),u.target.value=s.ticket.subject;return}g("update",{field:a,value:l})}return(a,l)=>(r(),_("div",on,[(r(!0),_(R,null,U(c.value,u=>(r(),I(sn,{key:u.fieldname,field:u,value:t.ticket[u.fieldname],onChange:l[0]||(l[0]=x=>i(x.fieldname,x.value))},null,8,["field","value"]))),128))]))}});const Ln=ae(rn,[["__scopeId","data-v-98d1b702"]]);export{Jt as A,Te as C,Ln as T,En as _,Vn as a,zt as b,Kt as c,Bn as d,Tn as e,In as f,Sn as g};
//# sourceMappingURL=TicketAgentFields-805301e8.js.map
