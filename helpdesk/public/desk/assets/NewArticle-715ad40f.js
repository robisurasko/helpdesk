import{_ as k}from"./Link-b119251e.js";import{d as S,an as V,B as c,e as x,Q as N,r as $,o as D,k as E,g as o,w as d,h as s,l as a,a0 as K,af as T,b as M,q as U,V as v,ag as q,ah as I,ai as H}from"./index-7cfac70d.js";import{_ as L}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-321ee831.js";import{g as R}from"./knowledgeBase-7671002e.js";import{g as j}from"./globalStore-ea71a2d6.js";import"./useView-6086fe67.js";import"./more-horizontal-baf6d079.js";import"./dayjs-44da97f0.js";import{_ as z}from"./UserAvatar.vue_vue_type_script_setup_true_lang-161cf044.js";import{_ as F}from"./LayoutHeader-ae45b9e1.js";import"./Dropdown.vue_vue_type_script_setup_true_lang-78ec013f.js";import"./Avatar.vue_vue_type_script_setup_true_lang-c9c85df3.js";const P={class:"flex flex-col flex-1"},Q={class:"pt-6 mx-auto w-full max-w-4xl px-5"},W={class:"flex flex-col gap-3 rounded-lg border w-full p-4"},G={class:"flex justify-between items-center mb-3"},J={class:"flex gap-1 items-center flex-1 mr-7 max-w-fit overflow-hidden"},O={class:"flex gap-2"},de=S({__name:"NewArticle",props:{id:{type:String,required:!0}},setup(h){const b=V().getUser(),{$dialog:w}=j(),i=M(),_=U(),r=c(""),n=c(""),u=c(h.id||null),m=x(()=>_.query.title||"");function y(){R.submit({title:r.value,content:n.value,category:u.value},{onSuccess:t=>{v({title:"Article created successfully",icon:"check",iconClasses:"text-green-600"}),p(),i.push({name:"Article",params:{articleId:t.name}})},onError:t=>{v({title:t,icon:"x",iconClasses:"text-red-600"})}})}function A(){if(!r.value&&!n.value){i.push({name:"AgentKnowledgeBase"});return}w({title:"Discard Article",message:"Are you sure you want to discard this article?",actions:[{label:"Confirm",variant:"solid",onClick(t){i.push({name:"AgentKnowledgeBase"}),p(),t()}}]})}function p(){r.value="",n.value=""}const C=x(()=>{const t=[{label:"Knowledge Base",route:{name:"AgentKnowledgeBase"}}];return m.value&&t.push({label:m.value,route:{name:"AgentKnowledgeBase"}}),t.push({label:"New Article"}),t});return N(()=>({title:"New Article"})),(t,e)=>{const B=k,f=$("Button");return D(),E("div",P,[o(s(F),null,{"left-header":d(()=>[o(s(L),{items:C.value},null,8,["items"])]),"right-header":d(()=>e[4]||(e[4]=[])),_:1}),a("div",Q,[a("div",W,[a("div",G,[a("div",J,[o(s(z),{name:s(b).name,expand:!0},null,8,["name"]),e[5]||(e[5]=a("span",null,"in",-1)),o(B,{class:"form-control",doctype:"HD Article Category",placeholder:"Select Category",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=l=>u.value=l),pageLength:100,"hide-clear-button":!0},null,8,["modelValue"])]),a("div",O,[o(f,{label:"Discard",onClick:A}),o(f,{label:"Create",variant:"solid",onClick:y})])]),K(a("textarea",{class:"w-full resize-none border-0 text-3xl font-bold placeholder-ink-gray-3 p-0 pb-3 border-b border-gray-200 focus:ring-0 focus:border-gray-200","onUpdate:modelValue":e[1]||(e[1]=l=>r.value=l),placeholder:"Title",rows:"1",wrap:"soft",maxlength:"140",autofocus:"",onInput:e[2]||(e[2]=l=>{const g=l.target;g.style.height=`${g.scrollHeight}px`})},null,544),[[T,r.value]]),o(s(H),{content:n.value,onChange:e[3]||(e[3]=l=>n.value=l),placeholder:"Write your article here...","editor-class":"rounded-b-lg max-w-[unset] prose-sm h-[calc(100vh-340px)] sm:h-[calc(100vh-250px)] overflow-auto"},{bottom:d(()=>[o(s(q),{class:"-ml-1 overflow-x-auto w-full",buttons:s(I)},null,8,["buttons"])]),_:1},8,["content"])])])])}}});export{de as default};
//# sourceMappingURL=NewArticle-715ad40f.js.map
