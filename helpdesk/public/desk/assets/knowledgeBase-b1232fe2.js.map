{"version":3,"file":"knowledgeBase-b1232fe2.js","sources":["../../../../desk/src/stores/knowledgeBase.ts"],"sourcesContent":["import { createResource } from \"frappe-ui\";\n\n// Title\nexport const newArticle = createResource({\n  url: \"frappe.client.insert\",\n  makeParams({ title, content, category }) {\n    return {\n      doc: {\n        doctype: \"HD Article\",\n        title,\n        content,\n        category,\n      },\n    };\n  },\n  validate({ doc }) {\n    if (!doc.title) throw \"Title is required\";\n    if (!doc.content) throw \"Content is required\";\n  },\n});\n\nexport const updateRes = createResource({\n  url: \"frappe.client.set_value\",\n});\n\nexport const deleteRes = createResource({\n  url: \"frappe.client.delete\",\n});\n\nexport const deleteArticles = createResource({\n  url: \"helpdesk.api.knowledge_base.delete_articles\",\n  makeParams({ articles }) {\n    return {\n      articles,\n    };\n  },\n  validate({ articles }) {\n    if (!articles) throw \"Articles are required\";\n  },\n});\n\n// Category\nexport const newCategory = createResource({\n  url: \"helpdesk.api.knowledge_base.create_category\",\n  makeParams({ title }) {\n    return {\n      title,\n    };\n  },\n  validate({ title }) {\n    if (!title) throw \"Title is required\";\n  },\n});\n\nexport const updateCategoryTitle = createResource({\n  url: \"frappe.client.set_value\",\n  validate({ name, value }) {\n    if (!value) throw \"Title is required\";\n  },\n});\n\nexport const moveToCategory = createResource({\n  url: \"helpdesk.api.knowledge_base.move_to_category\",\n  makeParams({ category, articles }) {\n    return {\n      category,\n      articles,\n    };\n  },\n  validate({ category, articles }) {\n    if (!category) throw { message: \"Category is required\" };\n    if (!articles) throw { message: \"Articles are required\" };\n  },\n});\n\nexport const mergeCategory = createResource({\n  url: \"helpdesk.api.knowledge_base.merge_category\",\n  makeParams({ source, target }) {\n    return {\n      source,\n      target,\n    };\n  },\n  validate({ source, target }) {\n    if (!source) throw { message: \"Category is required\" };\n    if (!target) throw { message: \"Target is required\" };\n  },\n});\n\nexport const categories = createResource({\n  url: \"helpdesk.api.knowledge_base.get_categories\",\n  cache: [\"categories\"],\n});\n\nexport const categoryName = createResource({\n  url: \"helpdesk.api.knowledge_base.get_category_title\",\n  cache: [\"categoryName\"],\n  makeParams({ category }) {\n    return { category };\n  },\n});\n\n//feedback\nexport const setFeedback = createResource({\n  url: \"run_doc_method\",\n  debounce: 300,\n  makeParams: ({ articleId, action }) => ({\n    dt: \"HD Article\",\n    dn: articleId,\n    method: \"set_feedback\",\n    args: {\n      value: action,\n    },\n  }),\n});\n\n// view count\nexport const incrementView = createResource({\n  url: \"helpdesk.api.knowledge_base.increment_views\",\n  makeParams: ({ article }) => ({\n    article,\n  }),\n});\n"],"names":["newArticle","createResource","title","content","category","doc","updateRes","deleteRes","deleteArticles","articles","newCategory","updateCategoryTitle","name","value","moveToCategory","mergeCategory","source","target","categories","categoryName","setFeedback","articleId","action","incrementView","article"],"mappings":"wCAGO,MAAMA,EAAaC,EAAe,CACvC,IAAK,uBACL,WAAW,CAAE,MAAAC,EAAO,QAAAC,EAAS,SAAAC,GAAY,CAChC,MAAA,CACL,IAAK,CACH,QAAS,aACT,MAAAF,EACA,QAAAC,EACA,SAAAC,CACF,CAAA,CAEJ,EACA,SAAS,CAAE,IAAAC,GAAO,CAChB,GAAI,CAACA,EAAI,MAAa,KAAA,oBACtB,GAAI,CAACA,EAAI,QAAe,KAAA,qBAC1B,CACF,CAAC,EAEYC,EAAYL,EAAe,CACtC,IAAK,yBACP,CAAC,EAEYM,EAAYN,EAAe,CACtC,IAAK,sBACP,CAAC,EAEYO,EAAiBP,EAAe,CAC3C,IAAK,8CACL,WAAW,CAAE,SAAAQ,GAAY,CAChB,MAAA,CACL,SAAAA,CAAA,CAEJ,EACA,SAAS,CAAE,SAAAA,GAAY,CACrB,GAAI,CAACA,EAAgB,KAAA,uBACvB,CACF,CAAC,EAGYC,EAAcT,EAAe,CACxC,IAAK,8CACL,WAAW,CAAE,MAAAC,GAAS,CACb,MAAA,CACL,MAAAA,CAAA,CAEJ,EACA,SAAS,CAAE,MAAAA,GAAS,CAClB,GAAI,CAACA,EAAa,KAAA,mBACpB,CACF,CAAC,EAEYS,EAAsBV,EAAe,CAChD,IAAK,0BACL,SAAS,CAAE,KAAAW,EAAM,MAAAC,GAAS,CACxB,GAAI,CAACA,EAAa,KAAA,mBACpB,CACF,CAAC,EAEYC,EAAiBb,EAAe,CAC3C,IAAK,+CACL,WAAW,CAAE,SAAAG,EAAU,SAAAK,GAAY,CAC1B,MAAA,CACL,SAAAL,EACA,SAAAK,CAAA,CAEJ,EACA,SAAS,CAAE,SAAAL,EAAU,SAAAK,GAAY,CAC/B,GAAI,CAACL,EAAgB,KAAA,CAAE,QAAS,wBAChC,GAAI,CAACK,EAAgB,KAAA,CAAE,QAAS,wBAClC,CACF,CAAC,EAEYM,EAAgBd,EAAe,CAC1C,IAAK,6CACL,WAAW,CAAE,OAAAe,EAAQ,OAAAC,GAAU,CACtB,MAAA,CACL,OAAAD,EACA,OAAAC,CAAA,CAEJ,EACA,SAAS,CAAE,OAAAD,EAAQ,OAAAC,GAAU,CAC3B,GAAI,CAACD,EAAc,KAAA,CAAE,QAAS,wBAC9B,GAAI,CAACC,EAAc,KAAA,CAAE,QAAS,qBAChC,CACF,CAAC,EAEYC,EAAajB,EAAe,CACvC,IAAK,6CACL,MAAO,CAAC,YAAY,CACtB,CAAC,EAEYkB,EAAelB,EAAe,CACzC,IAAK,iDACL,MAAO,CAAC,cAAc,EACtB,WAAW,CAAE,SAAAG,GAAY,CACvB,MAAO,CAAE,SAAAA,CAAS,CACpB,CACF,CAAC,EAGYgB,EAAcnB,EAAe,CACxC,IAAK,iBACL,SAAU,IACV,WAAY,CAAC,CAAE,UAAAoB,EAAW,OAAAC,MAAc,CACtC,GAAI,aACJ,GAAID,EACJ,OAAQ,eACR,KAAM,CACJ,MAAOC,CACT,CAAA,EAEJ,CAAC,EAGYC,EAAgBtB,EAAe,CAC1C,IAAK,8CACL,WAAY,CAAC,CAAE,QAAAuB,MAAe,CAC5B,QAAAA,CAAA,EAEJ,CAAC"}